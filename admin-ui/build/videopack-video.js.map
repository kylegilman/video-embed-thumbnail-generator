{"version":3,"file":"videopack-video.js","mappings":"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","sources":["webpack://videopack-admin/./node_modules/@wordpress/icons/build-module/library/chevron-down.js","webpack://videopack-admin/./node_modules/@wordpress/icons/build-module/library/chevron-up.js","webpack://videopack-admin/./src/assets/icon.js","webpack://videopack-admin/./src/blocks/videopack-video/SingleVideoBlock.js","webpack://videopack-admin/./src/blocks/videopack-video/VideoSettings.js","webpack://videopack-admin/./src/blocks/videopack-video/edit.js","webpack://videopack-admin/./src/blocks/videopack-video/save.js","webpack://videopack-admin/./src/components/AdditionalFormats/AdditionalFormats.js","webpack://videopack-admin/./src/components/AdditionalFormats/EncodeFormatStatus.js","webpack://videopack-admin/./src/components/AdditionalFormats/EncodeProgress.js","webpack://videopack-admin/./src/components/AdditionalFormats/additional-formats.scss","webpack://videopack-admin/./src/components/Thumbnails/Thumbnails.js","webpack://videopack-admin/./src/components/Thumbnails/Thumbnails.scss","webpack://videopack-admin/./src/components/VideoPlayer/BelowVideo.js","webpack://videopack-admin/./src/components/VideoPlayer/MetaBar.js","webpack://videopack-admin/./src/components/VideoPlayer/VideoJs.js","webpack://videopack-admin/./src/components/VideoPlayer/VideoPlayer.js","webpack://videopack-admin/./src/hooks/useVideoSettings.js","webpack://videopack-admin/./src/utils/utils.js","webpack://videopack-admin/external window [\"wp\",\"apiFetch\"]","webpack://videopack-admin/external window [\"wp\",\"blob\"]","webpack://videopack-admin/external window [\"wp\",\"blockEditor\"]","webpack://videopack-admin/external window [\"wp\",\"blocks\"]","webpack://videopack-admin/external window [\"wp\",\"components\"]","webpack://videopack-admin/external window [\"wp\",\"coreData\"]","webpack://videopack-admin/external window [\"wp\",\"data\"]","webpack://videopack-admin/external window [\"wp\",\"element\"]","webpack://videopack-admin/external window [\"wp\",\"i18n\"]","webpack://videopack-admin/external window [\"wp\",\"mediaUtils\"]","webpack://videopack-admin/external window [\"wp\",\"notices\"]","webpack://videopack-admin/external window [\"wp\",\"primitives\"]","webpack://videopack-admin/external window [\"wp\",\"url\"]","webpack://videopack-admin/external window \"ReactJSXRuntime\"","webpack://videopack-admin/webpack/bootstrap","webpack://videopack-admin/webpack/runtime/compat get default export","webpack://videopack-admin/webpack/runtime/define property getters","webpack://videopack-admin/webpack/runtime/hasOwnProperty shorthand","webpack://videopack-admin/webpack/runtime/make namespace object","webpack://videopack-admin/./src/blocks/videopack-video/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst chevronDown = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z\"\n  })\n});\nexport default chevronDown;\n//# sourceMappingURL=chevron-down.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst chevronUp = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z\"\n  })\n});\nexport default chevronUp;\n//# sourceMappingURL=chevron-up.js.map","const videopack = <svg width='20px' height='20px' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 395.11 395.11\">\n<g data-name=\"Ellipse 1\" transform=\"rotate(-45 -201.149 592.789)\">\n  <circle\n    cx=\"360.24\"\n    cy=\"595.24\"\n    r=\"182.56\"\n    fill=\"none\"\n    stroke=\"#cd0000\"\n    strokeWidth=\"30\"\n  ></circle>\n</g>\n<path\n  fill=\"#cd0000\"\n  d=\"M95.4 108.3h45.81l57.42 98.69 55.57-98.69h47.49L198.54 286.81 95.4 109.68\"\n></path>\n<path fill=\"#f26a6b\" d=\"M254.2 108.3l-55.57 98.69-57.42-98.69\"></path>\n</svg>;\n\nconst volumeDown = <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"currentColor\">\n  <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n  <path d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/>\n</svg>;\n\nconst volumeUp = <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"currentColor\">\n  <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n  <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>\n</svg>;\n\nconst save = <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"currentColor\">\n  <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M17 3H3v18h18V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"/>\n</svg>;\n\nconst insertImage = <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"currentColor\">\n  <path d=\"M21 21V3H3v18h18zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n</svg>\n\nexport { insertImage, save, videopack, volumeDown, volumeUp };\n","import { useEntityRecord } from '@wordpress/core-data';\nimport { useEffect, useMemo } from '@wordpress/element';\nimport { InspectorControls, useBlockProps } from '@wordpress/block-editor';\nimport VideoSettings from './VideoSettings.js';\nimport Thumbnails from '../../components/Thumbnails/Thumbnails.js';\nimport AdditionalFormats from '../../components/AdditionalFormats/AdditionalFormats.js';\nimport VideoPlayer from '../../components/VideoPlayer/VideoPlayer.js';\n\nconst SingleVideoBlock = ({ setAttributes, attributes, options }) => {\n\tconst { id } = attributes;\n\n\tconst { record: attachment, hasResolved } = useEntityRecord(\n\t\t'postType',\n\t\t'attachment',\n\t\tid\n\t);\n\n\tuseEffect(() => {\n\t\tif (hasResolved && attachment) {\n\t\t\tconst newAttributes = {\n\t\t\t\tsrc: attachment.source_url,\n\t\t\t\tvideoTitle: attachment.title?.raw,\n\t\t\t\tcaption: attachment.caption?.raw,\n\t\t\t\tembedlink: attachment.link + 'embed',\n\t\t\t\tposter: attachment.meta?.['_videopack-meta']?.poster,\n\t\t\t};\n\n\t\t\tconst updatedAttributes = Object.keys(newAttributes).reduce(\n\t\t\t\t(acc, key) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tnewAttributes[key] &&\n\t\t\t\t\t\tnewAttributes[key] !== attributes[key]\n\t\t\t\t\t) {\n\t\t\t\t\t\tacc[key] = newAttributes[key];\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tif (Object.keys(updatedAttributes).length > 0) {\n\t\t\t\tsetAttributes(updatedAttributes);\n\t\t\t}\n\t\t}\n\t}, [attachment, hasResolved, setAttributes, attributes]);\n\n\tconst playerAttributes = useMemo(() => {\n\t\tconst newPlayerAttributes = { ...options, ...attributes };\n\n\t\tif (attachment?.videopack?.sources) {\n\t\t\tnewPlayerAttributes.sources = attachment.videopack.sources;\n\t\t}\n\t\treturn newPlayerAttributes;\n\t}, [options, attributes, attachment]);\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<Thumbnails\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t\tattributes={attributes}\n\t\t\t\t\tvideoData={attachment}\n\t\t\t\t\toptions={options}\n\t\t\t\t/>\n\t\t\t\t<VideoSettings\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t\tattributes={attributes}\n\t\t\t\t/>\n\t\t\t\t<AdditionalFormats attributes={attributes} options={options} />\n\t\t\t</InspectorControls>\n\t\t\t<div {...useBlockProps()}>\n\t\t\t\t<VideoPlayer attributes={playerAttributes} />\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default SingleVideoBlock;\n","import {\n\tPanelBody,\n\tPanelRow,\n\tRangeControl,\n\tSelectControl,\n\tTextControl,\n\tToggleControl,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nimport { volumeUp, volumeDown } from '../../assets/icon';\nimport useVideoSettings from '../../hooks/useVideoSettings';\n\nconst VideoSettings = ({ attributes, setAttributes }) => {\n\tconst { handleSettingChange, preloadOptions } = useVideoSettings(\n\t\tattributes,\n\t\tsetAttributes\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<PanelBody title={__('Player Settings')} initialOpen={false}>\n\t\t\t\t{!attributes.gifmode && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Autoplay')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('autoplay', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.autoplay}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Loop')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('loop', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.loop}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Muted')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('muted', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.muted}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t{!attributes.muted && (\n\t\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\tlabel={__('Volume')}\n\t\t\t\t\t\t\t\tvalue={attributes.volume}\n\t\t\t\t\t\t\t\tbeforeIcon={volumeDown}\n\t\t\t\t\t\t\t\tafterIcon={volumeUp}\n\t\t\t\t\t\t\t\tinitialPosition={1}\n\t\t\t\t\t\t\t\twithInputField={false}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('volume', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\t\t\tstep={0.05}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Playback controls')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('controls', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.controls}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Play inline')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('playsinline', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.playsinline}\n\t\t\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t\t\t'Plays inline instead of fullscreen on iPhones.'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Variable playback speeds')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('playback_rate', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.playback_rate}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\tlabel={__('Preload')}\n\t\t\t\t\t\t\t\tvalue={attributes.preload}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('preload', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\toptions={preloadOptions}\n\t\t\t\t\t\t\t\thideCancelButton={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={__('GIF mode')}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('gifmode', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={!!attributes.gifmode}\n\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t'Video acts like an animated GIF. Enables autoplay, loop, mute, and disables controls.'\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t</PanelBody>\n\t\t\t<PanelBody title={__('Sharing')} initialOpen={false}>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={__('Allow embedding on other sites')}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('embeddable', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={!!attributes.embeddable}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t\t{attributes.embeddable && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Download link')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('downloadlink', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.downloadlink}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Embed code')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('embedcode', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.embedcode}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Twitter button')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('twitter_button', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.twitter_button}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__('Facebook button')}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange(\n\t\t\t\t\t\t\t\t\t\t'facebook_button',\n\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!attributes.facebook_button}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</PanelBody>\n\t\t\t<PanelBody title={__('Metadata')} initialOpen={false}>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={__('Overlay title')}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('title', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={!!attributes.title}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t\t{attributes.title && (\n\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tlabel={__('Title')}\n\t\t\t\t\t\t\tvalue={attributes.videoTitle}\n\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\thandleSettingChange('videoTitle', value)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelRow>\n\t\t\t\t)}\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tlabel={__('Caption')}\n\t\t\t\t\t\tvalue={attributes.caption}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('caption', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={__('View count')}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('view_count', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={!!attributes.view_count}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t</PanelBody>\n\t\t</>\n\t);\n};\n\nexport default VideoSettings;\n","import { getBlobByURL, isBlobURL } from '@wordpress/blob';\nimport { Button, Placeholder } from '@wordpress/components';\nimport {\n\tBlockControls,\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaReplaceFlow,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\n\nimport { useEffect, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\n\nimport { getSettings } from '../../utils/utils';\nimport { videopack as icon } from '../../assets/icon';\nimport SingleVideoBlock from './SingleVideoBlock';\n\nconst ALLOWED_MEDIA_TYPES = ['video'];\n\nexport default function edit({ attributes, setAttributes }) {\n\tconst { id, src } = attributes;\n\tconst [options, setOptions] = useState();\n\tconst blockProps = useBlockProps();\n\tconst { createErrorNotice } = useDispatch(noticesStore);\n\tconst mediaUpload = useSelect(\n\t\t(select) => select(blockEditorStore).getSettings().mediaUpload,\n\t\t[]\n\t);\n\n\tconst { postId } = useSelect(\n\t\t(select) => ({\n\t\t\tpostId: select('core/editor').getCurrentPostId(),\n\t\t}),\n\t\t[]\n\t);\n\n\tuseEffect(() => {\n\t\tgetSettings().then((response) => {\n\t\t\tsetOptions(response);\n\t\t});\n\n\t\tif (!id && isBlobURL(src)) {\n\t\t\tconst file = getBlobByURL(src);\n\t\t\tif (file) {\n\t\t\t\tmediaUpload({\n\t\t\t\t\tfilesList: [file],\n\t\t\t\t\tonFileChange: ([media]) => onSelectVideo(media),\n\t\t\t\t\tonError: onUploadError,\n\t\t\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, []);\n\n\tfunction setAttributesFromMedia(media) {\n\t\tconst media_attributes = {\n\t\t\tsrc: media[0].url,\n\t\t\tid: media[0].id,\n\t\t\tposter: media[0].meta?.['_videopack-meta']?.poster,\n\t\t\ttotal_thumbnails:\n\t\t\t\tmedia[0].meta?.['_videopack-meta']?.total_thumbnails,\n\t\t\tvideoTitle: media[0].title,\n\t\t\tcaption: media[0].caption,\n\t\t};\n\n\t\tconst updatedAttributes = Object.keys(media_attributes).reduce(\n\t\t\t(acc, key) => {\n\t\t\t\tif (media_attributes[key]) {\n\t\t\t\t\tacc[key] = media_attributes[key];\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{}\n\t\t);\n\n\t\tsetAttributes(updatedAttributes);\n\t}\n\n\tfunction onSelectVideo(media) {\n\t\tconst mediaArray = Array.isArray(media) ? media : [media];\n\n\t\tif (\n\t\t\t!mediaArray ||\n\t\t\t!mediaArray.some((item) => item.hasOwnProperty('url'))\n\t\t) {\n\t\t\tsetAttributes({\n\t\t\t\tsrc: undefined,\n\t\t\t\tid: undefined,\n\t\t\t\tposter: undefined,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (mediaArray.length === 1) {\n\t\t\tsetAttributesFromMedia(mediaArray);\n\t\t}\n\t}\n\n\tfunction onSelectURL(newSrc) {\n\t\tif (newSrc !== src) {\n\t\t\tsetAttributes({ src: newSrc, id: false });\n\t\t}\n\t}\n\n\tfunction onUploadError(message) {\n\t\tcreateErrorNotice(message, { type: 'snackbar' });\n\t}\n\n\tconst placeholder = (content) => {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\tclassName=\"block-editor-media-placeholder\"\n\t\t\t\twithIllustration={true}\n\t\t\t\ticon={icon}\n\t\t\t\tlabel={__('Videopack Video')}\n\t\t\t\tinstructions={__(\n\t\t\t\t\t'Upload a video file, pick one from your media library, or add one with a URL.'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{content}\n\t\t\t</Placeholder>\n\t\t);\n\t};\n\n\tif (!src && !id) {\n\t\treturn (\n\t\t\t<div {...blockProps}>\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\ticon={<BlockIcon icon={icon} />}\n\t\t\t\t\tonSelect={onSelectVideo}\n\t\t\t\t\tonSelectURL={onSelectURL}\n\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\t\tvalue={attributes}\n\t\t\t\t\tonError={onUploadError}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls group=\"other\">\n\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\tmediaId={id}\n\t\t\t\t\tmediaURL={src}\n\t\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\tonSelect={onSelectVideo}\n\t\t\t\t\tonSelectURL={onSelectURL}\n\t\t\t\t\tonError={onUploadError}\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t\t<SingleVideoBlock\n\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\tattributes={attributes}\n\t\t\t\toptions={options}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/**\n * The save function defines the way in which the different attributes should\n * be combined into the final markup, which is then serialized by the block\n * editor into `post_content`.\n *\n * @see https://developer.wordpress.org/block-editor/developers/block-api/block-edit-save/#save\n *\n * @param {Object} props          The properties passed to the component.\n * @param {Object} props.attributes The block attributes.\n * @return {WPElement} Element to render.\n */\nexport default function save( { attributes } ) {\n\t// Returning null because this is a dynamic block.\n\t// The view is rendered on the server via a render_callback in PHP.\n\treturn null;\n}\n","/* global videopack_config */\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tPanelBody,\n\tPanelRow,\n\tSpinner,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport './additional-formats.scss';\nimport EncodeFormatStatus from './EncodeFormatStatus';\nimport {\n\tgetVideoFormats,\n\tenqueueJob,\n\tassignFormat,\n\tdeleteFile,\n\tdeleteJob,\n} from '../../utils/utils';\n\nconst AdditionalFormats = ({ attributes, options = {} }) => {\n\tconst { id, src } = attributes;\n\tconst { ffmpeg_exists } = options;\n\tconst [videoFormats, setVideoFormats] = useState({});\n\tconst [encodeMessage, setEncodeMessage] = useState();\n\tconst [itemToDelete, setItemToDelete] = useState(null); // { type: 'file'/'job', formatId: string, jobId?: int, id?: int, name?: string }\n\tconst [deleteInProgress, setDeleteInProgress] = useState(null); // Stores formatId or jobId being deleted\n\tconst [isConfirmOpen, setIsConfirmOpen] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [isEncoding, setIsEncoding] = useState(false);\n\tconst progressTimerRef = useRef(null);\n\n\tconst updateVideoFormats = (response) => {\n\t\tsetVideoFormats((currentVideoFormats) => {\n\t\t\tif (response && typeof response === 'object') {\n\t\t\t\tconst newFormats = { ...response };\n\t\t\t\tObject.keys(newFormats).forEach((key) => {\n\t\t\t\t\tconst newFormat = newFormats[key];\n\t\t\t\t\tconst oldFormat = currentVideoFormats?.[key];\n\n\t\t\t\t\t// Preserve the existing 'checked' state to prevent UI flicker on poll refresh.\n\t\t\t\t\tnewFormat.checked = oldFormat?.checked || false;\n\n\t\t\t\t\t// If the format is encoding, merge progress data carefully.\n\t\t\t\t\tif (newFormat.encoding_now && newFormat.progress) {\n\t\t\t\t\t\t// If there's old progress data, merge it to prevent flashes of 0%.\n\t\t\t\t\t\tif (oldFormat?.progress) {\n\t\t\t\t\t\t\tnewFormat.progress = {\n\t\t\t\t\t\t\t\t...oldFormat.progress,\n\t\t\t\t\t\t\t\t...newFormat.progress,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If no old progress, ensure we don't start with a negative percent.\n\t\t\t\t\t\t\tnewFormat.progress.percent =\n\t\t\t\t\t\t\t\tnewFormat.progress.percent > 0\n\t\t\t\t\t\t\t\t\t? newFormat.progress.percent\n\t\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Only update state if the formats have actually changed.\n\t\t\t\tif (\n\t\t\t\t\tJSON.stringify(currentVideoFormats) !==\n\t\t\t\t\tJSON.stringify(newFormats)\n\t\t\t\t) {\n\t\t\t\t\treturn newFormats;\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tJSON.stringify(currentVideoFormats) !== JSON.stringify(response)\n\t\t\t) {\n\t\t\t\t// Fallback for non-object responses\n\t\t\t\treturn response;\n\t\t\t}\n\t\t\treturn currentVideoFormats;\n\t\t});\n\t};\n\n\tconst fetchVideoFormats = async () => {\n\t\tif (!id) {\n\t\t\treturn;\n\t\t} // Don't fetch if there's no ID.\n\t\ttry {\n\t\t\tconst formats = await getVideoFormats(id);\n\t\t\tupdateVideoFormats(formats);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error fetching video formats:', error);\n\t\t}\n\t};\n\n\tconst pollVideoFormats = async () => {\n\t\tif (src && id) {\n\t\t\ttry {\n\t\t\t\tconst formats = await getVideoFormats(id);\n\t\t\t\tupdateVideoFormats(formats);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error polling video formats:', error);\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchVideoFormats();\n\t}, [id]); // Fetch formats when the attachment ID changes\n\n\tconst siteSettings = useSelect((select) => {\n\t\treturn select('core').getSite();\n\t}, []);\n\n\tconst shouldPoll = (formats) => {\n\t\tif (!formats) {\n\t\t\treturn false;\n\t\t}\n\t\t// Poll only if at least one format is still in a state that requires updates.\n\t\treturn Object.values(formats).some(\n\t\t\t(format) =>\n\t\t\t\tformat.status === 'queued' ||\n\t\t\t\tformat.status === 'encoding' ||\n\t\t\t\tformat.status === 'processing' ||\n\t\t\t\tformat.status === 'needs_insert'\n\t\t);\n\t};\n\n\tconst incrementEncodeProgress = () => {\n\t\tsetVideoFormats((currentVideoFormats) => {\n\t\t\tif (!currentVideoFormats || !isEncoding) {\n\t\t\t\treturn currentVideoFormats;\n\t\t\t}\n\n\t\t\tconst updatedVideoFormats = { ...currentVideoFormats };\n\t\t\tObject.keys(updatedVideoFormats).forEach((key) => {\n\t\t\t\tconst format = updatedVideoFormats[key];\n\t\t\t\tif (format.encoding_now && format.progress) {\n\t\t\t\t\tconst elapsed =\n\t\t\t\t\t\tnew Date().getTime() / 1000 - format.started;\n\t\t\t\t\tlet percent = format.progress.percent || 0;\n\t\t\t\t\tlet remaining = null;\n\n\t\t\t\t\t// Only calculate remaining time if video_duration is available.\n\t\t\t\t\tif (format.video_duration) {\n\t\t\t\t\t\tconst totalDurationInSeconds =\n\t\t\t\t\t\t\tformat.video_duration / 1000000;\n\t\t\t\t\t\tconst speedMatch = format.progress.speed\n\t\t\t\t\t\t\t? String(format.progress.speed).match(/(\\d*\\.?\\d+)/)\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\tconst speed = speedMatch\n\t\t\t\t\t\t\t? parseFloat(speedMatch[0])\n\t\t\t\t\t\t\t: 0;\n\n\t\t\t\t\t\t// Increment percent based on speed. This function runs every second.\n\t\t\t\t\t\tif (speed > 0) {\n\t\t\t\t\t\t\tconst increment =\n\t\t\t\t\t\t\t\t(1 / totalDurationInSeconds) * 100 * speed;\n\t\t\t\t\t\t\tpercent += increment;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Calculate remaining time based on current percent and speed\n\t\t\t\t\t\tif (percent > 0 && speed > 0) {\n\t\t\t\t\t\t\tconst remainingPercent = 100 - percent;\n\t\t\t\t\t\t\tremaining =\n\t\t\t\t\t\t\t\t(totalDurationInSeconds *\n\t\t\t\t\t\t\t\t\t(remainingPercent / 100)) /\n\t\t\t\t\t\t\t\tspeed;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tremaining = totalDurationInSeconds - elapsed;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clamp values to be within expected ranges.\n\t\t\t\t\tpercent = Math.min(100, Math.max(0, percent));\n\t\t\t\t\tremaining =\n\t\t\t\t\t\tremaining !== null ? Math.max(0, remaining) : null;\n\n\t\t\t\t\tupdatedVideoFormats[key] = {\n\t\t\t\t\t\t...format,\n\t\t\t\t\t\tprogress: {\n\t\t\t\t\t\t\t...format.progress,\n\t\t\t\t\t\t\telapsed,\n\t\t\t\t\t\t\tremaining,\n\t\t\t\t\t\t\tpercent,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn updatedVideoFormats;\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tsetIsEncoding(shouldPoll(videoFormats));\n\t}, [videoFormats]);\n\n\tuseEffect(() => {\n\t\tlet pollTimer = null;\n\t\t// Manage progress timer based on encoding state\n\t\tif (isEncoding) {\n\t\t\t// Start polling immediately and then every 5 seconds\n\t\t\tpollVideoFormats(); // Initial poll\n\t\t\tpollTimer = setInterval(pollVideoFormats, 5000);\n\n\t\t\tif (progressTimerRef.current === null) {\n\t\t\t\tprogressTimerRef.current = setInterval(\n\t\t\t\t\tincrementEncodeProgress,\n\t\t\t\t\t1000\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t// Clear all timers if not encoding\n\t\t\tclearInterval(progressTimerRef.current);\n\t\t\tprogressTimerRef.current = null;\n\t\t\tclearInterval(pollTimer);\n\t\t\tpollTimer = null;\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (progressTimerRef.current !== null) {\n\t\t\t\tclearInterval(progressTimerRef.current);\n\t\t\t\tprogressTimerRef.current = null;\n\t\t\t}\n\t\t\tif (pollTimer !== null) {\n\t\t\t\tclearInterval(pollTimer);\n\t\t\t\tpollTimer = null;\n\t\t\t}\n\t\t};\n\t}, [isEncoding]); // Depend on isEncoding state\n\n\tconst handleFormatCheckbox = (event, formatId) => {\n\t\tsetVideoFormats((prevVideoFormats) => {\n\t\t\tconst updatedFormats = { ...prevVideoFormats };\n\t\t\tif (updatedFormats[formatId]) {\n\t\t\t\tupdatedFormats[formatId].checked = event;\n\t\t\t}\n\t\t\treturn updatedFormats;\n\t\t});\n\t\t// Note: Checkbox state is now purely UI. Saving to DB happens on \"Encode\" button click.\n\t};\n\n\tconst handleEnqueue = async () => {\n\t\tif (!videopack_config) {\n\t\t\treturn <Spinner />;\n\t\t}\n\n\t\tsetIsLoading(true);\n\n\t\t// Get list of format IDs that are checked and available\n\t\tconst formatsToEncode = Object.entries(videoFormats)\n\t\t\t.filter(\n\t\t\t\t([key, value]) =>\n\t\t\t\t\tvalue.checked &&\n\t\t\t\t\tvalue.status !== 'queued' &&\n\t\t\t\t\tvalue.status !== 'processing' &&\n\t\t\t\t\tvalue.status !== 'completed'\n\t\t\t)\n\t\t\t.reduce((acc, [key, value]) => {\n\t\t\t\tacc[key] = true; // Backend expects an object { format_id: true, ... }\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\n\t\ttry {\n\t\t\tconst response = await enqueueJob(id, src, formatsToEncode);\n\t\t\tconst queueMessage = () => {\n\t\t\t\tconst queueList = (() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tresponse?.encode_list &&\n\t\t\t\t\t\tArray.isArray(response.encode_list) &&\n\t\t\t\t\t\tresponse.encode_list.length > 0\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn new Intl.ListFormat(\n\t\t\t\t\t\t\tsiteSettings?.language\n\t\t\t\t\t\t\t\t? siteSettings.language.replace('_', '-')\n\t\t\t\t\t\t\t\t: 'en-US',\n\t\t\t\t\t\t\t{ style: 'long', type: 'conjunction' }\n\t\t\t\t\t\t).format(response.encode_list);\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t})();\n\n\t\t\t\tif (!queueList) {\n\t\t\t\t\tif (response?.log?.length > 0) {\n\t\t\t\t\t\treturn response.log.join(' ');\n\t\t\t\t\t}\n\t\t\t\t\treturn __('No formats were added to the queue.');\n\t\t\t\t}\n\n\t\t\t\tconst queuePosition = response?.new_queue_position;\n\n\t\t\t\treturn sprintf(\n\t\t\t\t\t/* translators: %1$s is a list of video formats. %2$s is a number */\n\t\t\t\t\t__('%1$s added to queue in position %2$s.'),\n\t\t\t\t\tqueueList,\n\t\t\t\t\tqueuePosition\n\t\t\t\t);\n\t\t\t};\n\t\t\tsetEncodeMessage(queueMessage());\n\t\t\tfetchVideoFormats(); // Re-fetch to update statuses\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\t// Use the detailed error messages from the server if available\n\t\t\tconst errorMessage = error?.data?.details\n\t\t\t\t? error.data.details.join(', ')\n\t\t\t\t: error.message;\n\t\t\t/* translators: %s is an error message */\n\t\t\tsetEncodeMessage(sprintf(__('Error: %s'), errorMessage));\n\t\t\tfetchVideoFormats(); // Re-fetch to ensure UI is consistent\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\tconst onSelectFormat = (formatId) => async (media) => {\n\t\tif (!media || !media.id || !formatId) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsLoading(true);\n\n\t\ttry {\n\t\t\tawait assignFormat(media.id, formatId, id);\n\t\t\tsetEncodeMessage(__('Video format assigned successfully.'));\n\t\t\tfetchVideoFormats(); // Refresh the list\n\t\t} catch (error) {\n\t\t\tconsole.error('Error assigning video format:', error);\n\t\t\tsetEncodeMessage(\n\t\t\t\tsprintf(\n\t\t\t\t\t/* translators: %s is an error message */\n\t\t\t\t\t__('Error: %s'),\n\t\t\t\t\terror.message\n\t\t\t\t)\n\t\t\t);\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\t// Deletes the actual media file (WP Attachment)\n\tconst handleFileDelete = async (formatId) => {\n\t\tconst formatData = videoFormats?.[formatId];\n\t\tif (!formatData || !formatData.id) {\n\t\t\tsetEncodeMessage(\n\t\t\t\t__('Error: Cannot delete file, missing attachment ID.')\n\t\t\t);\n\t\t\tconsole.error(\n\t\t\t\t'Cannot delete file: Missing id for format',\n\t\t\t\tformatId\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tsetDeleteInProgress(formatId); // Mark this formatId as being deleted\n\t\ttry {\n\t\t\tawait deleteFile(formatData.id);\n\t\t\tsetEncodeMessage(__('File deleted successfully.'));\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status from backend\n\t\t} catch (error) {\n\t\t\tconsole.error('File delete failed:', error);\n\t\t\tsetEncodeMessage(\n\t\t\t\t/* translators: %s is an error message */\n\t\t\t\tsprintf(__('Error deleting file: %s'), error.message)\n\t\t\t);\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t} finally {\n\t\t\tsetDeleteInProgress(null);\n\t\t}\n\t};\n\n\t// Deletes/Cancels a queue job\n\tconst handleJobDelete = async (jobId) => {\n\t\tif (!jobId) {\n\t\t\tsetEncodeMessage(__('Error: Cannot delete job, missing job ID.'));\n\t\t\tconsole.error('Cannot delete job: Missing job ID');\n\t\t\treturn;\n\t\t}\n\t\tsetDeleteInProgress(jobId); // Mark this jobId as being deleted\n\t\ttry {\n\t\t\tawait deleteJob(jobId);\n\t\t\tsetEncodeMessage(__('Job cancelled/deleted successfully.'));\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t} catch (error) {\n\t\t\tconsole.error('Job delete failed:', error);\n\t\t\tsetEncodeMessage(\n\t\t\t\t/* translators: %s is an error message */\n\t\t\t\tsprintf(__('Error deleting job: %s'), error.message)\n\t\t\t);\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t} finally {\n\t\t\tsetDeleteInProgress(null);\n\t\t}\n\t};\n\n\tconst openConfirmDialog = (type, formatId) => {\n\t\tconst formatData = videoFormats?.[formatId];\n\t\tif (!formatData) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetItemToDelete({\n\t\t\ttype, // 'file' or 'job'\n\t\t\tformatId,\n\t\t\tjobId: formatData.job_id,\n\t\t\tid: formatData.id,\n\t\t\tname: formatData.name,\n\t\t});\n\t\tsetIsConfirmOpen(true);\n\t};\n\n\tconst handleConfirm = () => {\n\t\tsetIsConfirmOpen(false);\n\t\tif (itemToDelete) {\n\t\t\tif (itemToDelete.type === 'file' && itemToDelete.id) {\n\t\t\t\thandleFileDelete(itemToDelete.formatId);\n\t\t\t} else if (itemToDelete.type === 'job' && itemToDelete.jobId) {\n\t\t\t\thandleJobDelete(itemToDelete.jobId);\n\t\t\t}\n\t\t}\n\t\tsetItemToDelete(null);\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetItemToDelete(null);\n\t\tsetIsConfirmOpen(false);\n\t};\n\n\tconst somethingToEncode = () => {\n\t\tif (videoFormats) {\n\t\t\t// Check if any format is checked AND available AND not already in a terminal/pending state\n\t\t\treturn Object.values(videoFormats).some(\n\t\t\t\t(obj) =>\n\t\t\t\t\tobj.checked &&\n\t\t\t\t\tobj.status !== 'queued' &&\n\t\t\t\t\tobj.status !== 'processing' &&\n\t\t\t\t\tobj.status !== 'completed' &&\n\t\t\t\t\tobj.status !== 'pending_replacement'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst encodeButtonTitle = () => {\n\t\tif (somethingToEncode()) {\n\t\t\treturn isLoading ? __('Loading…') : __('Encode selected formats');\n\t\t}\n\n\t\treturn __('Select formats to encode');\n\t};\n\n\tconst isEncodeButtonDisabled =\n\t\tisLoading || ffmpeg_exists !== true || !somethingToEncode();\n\n\tconst confirmDialogMessage = () => {\n\t\tif (!itemToDelete) {\n\t\t\treturn '';\n\t\t}\n\t\tif (itemToDelete.type === 'file') {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s is the name of a video format (eg: H264 MP4 HD (720p) ) */\n\t\t\t\t__(\n\t\t\t\t\t'You are about to permanently delete the encoded %s video file from your site. This action cannot be undone.'\n\t\t\t\t),\n\t\t\t\titemToDelete.name\n\t\t\t);\n\t\t}\n\t\tif (itemToDelete.type === 'job') {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s is the name of a video format (eg: H264 MP4 HD (720p) ) */\n\t\t\t\t__(\n\t\t\t\t\t'You are about to permanently delete the encoding job for the %s video. This will also delete the encoded video file if it exists (if created by this job and not yet a separate attachment). This action cannot be undone.'\n\t\t\t\t),\n\t\t\t\titemToDelete.name\n\t\t\t);\n\t\t}\n\t};\n\n\tconst canUploadFiles = useSelect(\n\t\t(select) => select(coreStore).canUser('create', 'media', id),\n\t\t[id]\n\t);\n\n\tconst groupedFormats = Object.values(videoFormats).reduce((acc, format) => {\n\t\tif (!format.codec || !format.codec.id) {\n\t\t\treturn acc;\n\t\t}\n\t\tconst codecId = format.codec.id;\n\t\tif (!acc[codecId]) {\n\t\t\tacc[codecId] = {\n\t\t\t\tname: format.codec.name,\n\t\t\t\tformats: [],\n\t\t\t};\n\t\t}\n\t\tacc[codecId].formats.push(format);\n\t\t// sort formats by height\n\t\tacc[codecId].formats.sort(\n\t\t\t(a, b) => b.resolution.height - a.resolution.height\n\t\t);\n\t\treturn acc;\n\t}, {});\n\n\treturn (\n\t\t<>\n\t\t\t<PanelBody title={__('Additional Formats')}>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t{videoFormats ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\t\tclassName={`videopack-formats-list${\n\t\t\t\t\t\t\t\t\tffmpeg_exists === true ? '' : ' no-ffmpeg'\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{Object.keys(groupedFormats).map((codecId) => {\n\t\t\t\t\t\t\t\t\tconst codecGroup = groupedFormats[codecId];\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\toptions.encode[codecId]?.enabled !== true\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li key={codecId}>\n\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"videopack-codec-name\">\n\t\t\t\t\t\t\t\t\t\t\t\t{codecGroup.name}\n\t\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t{codecGroup.formats.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(formatData) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst formatId =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatData.id;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EncodeFormatStatus\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={formatId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatId={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatData={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatData\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tffmpegExists={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tffmpeg_exists\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCheckboxChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleFormatCheckbox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelectFormat={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelectFormat\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDeleteFile={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topenConfirmDialog(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'file',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCancelJob={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topenConfirmDialog(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'job',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteInProgress={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<ConfirmDialog\n\t\t\t\t\t\t\t\tisOpen={isConfirmOpen}\n\t\t\t\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t\t\t\t\tonCancel={handleCancel}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{confirmDialogMessage()}\n\t\t\t\t\t\t\t</ConfirmDialog>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</PanelRow>\n\t\t\t\t{ffmpeg_exists === true && videoFormats && canUploadFiles && (\n\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={handleEnqueue}\n\t\t\t\t\t\t\ttitle={encodeButtonTitle()}\n\t\t\t\t\t\t\ttext={__('Encode')}\n\t\t\t\t\t\t\tdisabled={isEncodeButtonDisabled}\n\t\t\t\t\t\t></Button>\n\t\t\t\t\t\t{isLoading && <Spinner />}\n\t\t\t\t\t\t{encodeMessage && (\n\t\t\t\t\t\t\t<span className=\"videopack-encode-message\">\n\t\t\t\t\t\t\t\t{encodeMessage}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</PanelRow>\n\t\t\t\t)}\n\t\t\t</PanelBody>\n\t\t</>\n\t);\n};\n\nexport default AdditionalFormats;\n","import { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tCheckboxControl,\n\tSpinner,\n\t__experimentalDivider as Divider,\n} from '@wordpress/components';\nimport { MediaUpload } from '@wordpress/media-utils';\nimport EncodeProgress from './EncodeProgress';\n\nconst EncodeFormatStatus = ({\n\tformatId,\n\tformatData,\n\tffmpegExists,\n\tonCheckboxChange,\n\tonSelectFormat,\n\tonDeleteFile,\n\tonCancelJob,\n\tdeleteInProgress,\n}) => {\n\tif (!formatData) {\n\t\treturn <Spinner />;\n\t}\n\n\tconst getCheckboxCheckedState = (data) => {\n\t\treturn data.checked || data.status === 'queued';\n\t};\n\n\tconst getCheckboxDisabledState = (data) => {\n\t\treturn (\n\t\t\tdata.exists ||\n\t\t\tdata.status === 'queued' ||\n\t\t\tdata.status === 'encoding' ||\n\t\t\tdata.status === 'processing' ||\n\t\t\tdata.status === 'completed'\n\t\t);\n\t};\n\n\treturn (\n\t\t<li key={formatId}>\n\t\t\t{ffmpegExists ? (\n\t\t\t\t<CheckboxControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"videopack-format\"\n\t\t\t\t\tlabel={formatData.label}\n\t\t\t\t\tchecked={getCheckboxCheckedState(formatData)}\n\t\t\t\t\tdisabled={getCheckboxDisabledState(formatData)}\n\t\t\t\t\tonChange={(event) => onCheckboxChange(event, formatId)}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<span className=\"videopack-format\">{formatData.label}</span>\n\t\t\t)}\n\n\t\t\t{formatData.status !== 'not_encoded' && (\n\t\t\t\t<span className=\"videopack-format-status\">\n\t\t\t\t\t{formatData.status_l10n}\n\t\t\t\t</span>\n\t\t\t)}\n\n\t\t\t{formatData.status === 'not_encoded' && !formatData.was_picked && (\n\t\t\t\t<MediaUpload\n\t\t\t\t\ttitle={__('Choose existing file')}\n\t\t\t\t\tonSelect={onSelectFormat(formatId)}\n\t\t\t\t\tallowedTypes={['video']}\n\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\tclassName=\"videopack-format-button\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Select')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{formatData.was_picked && (\n\t\t\t\t<MediaUpload\n\t\t\t\t\ttitle={sprintf(\n\t\t\t\t\t\t/* translators: %s is the label of a video resolution (eg: 720p ) */\n\t\t\t\t\t\t__('Replace %s'),\n\t\t\t\t\t\tformatData.label\n\t\t\t\t\t)}\n\t\t\t\t\tonSelect={onSelectFormat(formatId)}\n\t\t\t\t\tallowedTypes={['video']}\n\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\tclassName=\"videopack-format-button\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttitle={__('Replace file')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Replace')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{formatData.deletable && formatData.id && (\n\t\t\t\t<Button\n\t\t\t\t\tisBusy={deleteInProgress === formatId}\n\t\t\t\t\tonClick={onDeleteFile}\n\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\ttext={__('Delete Permanently')}\n\t\t\t\t\tisDestructive\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{(formatData.encoding_now || formatData.status === 'failed') && (\n\t\t\t\t<EncodeProgress\n\t\t\t\t\tformatData={formatData}\n\t\t\t\t\tonCancelJob={onCancelJob}\n\t\t\t\t\tdeleteInProgress={deleteInProgress}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Divider />\n\t\t</li>\n\t);\n};\n\nexport default EncodeFormatStatus;\n","import { __, sprintf } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\n\nconst EncodeProgress = ({ formatData, onCancelJob, deleteInProgress }) => {\n\tconst convertToTimecode = (time) => {\n\t\tif (time === null || time === undefined || isNaN(time)) {\n\t\t\treturn '--:--';\n\t\t}\n\t\tconst padZero = (num) => Math.floor(num).toString().padStart(2, '0');\n\n\t\tconst h = Math.floor(time / 3600);\n\t\tconst m = Math.floor((time % 3600) / 60);\n\t\tconst s = Math.floor(time % 60);\n\n\t\tconst hh = h > 0 ? padZero(h) + ':' : '';\n\t\tconst mm = padZero(m);\n\t\tconst ss = padZero(s);\n\n\t\treturn hh + mm + ':' + ss;\n\t};\n\n\tif (formatData?.encoding_now && formatData?.progress) {\n\t\tconst percent = Math.round(formatData.progress.percent);\n\t\tconst percentText = sprintf('%d%%', percent);\n\n\t\treturn (\n\t\t\t<div className=\"videopack-encode-progress\">\n\t\t\t\t<div className=\"videopack-meter\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"videopack-meter-bar\"\n\t\t\t\t\t\tstyle={{ width: percentText }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"videopack-meter-text\">\n\t\t\t\t\t\t\t{percentText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{formatData.job_id && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={onCancelJob}\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tisBusy={deleteInProgress === formatData.job_id}\n\t\t\t\t\t>\n\t\t\t\t\t\t{__('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t\t<div className=\"videopack-encode-progress-small-text\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{__('Elapsed:') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tconvertToTimecode(formatData.progress.elapsed)}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{__('Remaining:') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tconvertToTimecode(formatData.progress.remaining)}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>{__('fps:') + ' ' + formatData.progress.fps}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (formatData?.status === 'failed' && formatData?.error_message) {\n\t\treturn (\n\t\t\t<div className=\"videopack-encode-error\">\n\t\t\t\t{sprintf(__('Error: %s'), formatData.error_message)}\n\t\t\t\t{formatData.job_id && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() => onCancelJob(formatData.job_id)}\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\ttext={__('Delete Job')}\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tisBusy={deleteInProgress === formatData.job_id}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n\nexport default EncodeProgress;\n","// extracted by mini-css-extract-plugin\nexport {};","/* global Image, videopack_config */\n\nimport {\n\tBaseControl,\n\tButton,\n\tDashicon,\n\tIcon,\n\tPanelBody,\n\tRangeControl,\n\tSpinner,\n\tTextControl,\n} from '@wordpress/components';\nimport { useCallback, useRef, useEffect, useState } from '@wordpress/element';\nimport { MediaUpload } from '@wordpress/media-utils';\nimport { __ } from '@wordpress/i18n';\nimport { getFilename } from '@wordpress/url';\nimport {\n\tuploadThumbnail,\n\tsaveAllThumbnails,\n\tsetPosterImage,\n\tgenerateThumbnail,\n} from '../../utils/utils';\n\nimport { chevronUp, chevronDown } from '@wordpress/icons';\nimport './Thumbnails.scss';\n\nconst Thumbnails = ({\n\tsetAttributes,\n\tattributes,\n\tvideoData, // Changed from attachment\n\toptions = {},\n}) => {\n\tconst { id, src, poster, poster_id, isExternal } = attributes;\n\tconst total_thumbnails =\n\t\tattributes.total_thumbnails ||\n\t\tvideoData?.total_thumbnails ||\n\t\toptions.total_thumbnails;\n\tconst thumbVideoPanel = useRef();\n\tconst videoRef = useRef();\n\tconst currentThumb = useRef();\n\tconst posterImageButton = useRef();\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [isOpened, setIsOpened] = useState(false);\n\tconst [currentTime, setCurrentTime] = useState(false);\n\tconst [thumbChoices, setThumbChoices] = useState([]);\n\tconst [isSaving, setIsSaving] = useState(false);\n\n\tconst VIDEO_POSTER_ALLOWED_MEDIA_TYPES = ['image'];\n\n\tuseEffect(() => {\n\t\tif (window.mejs && window.mejs.players && poster) {\n\t\t\t// Find the MediaElement.js player within the media modal\n\t\t\tconst mejsContainer = document.querySelector(\n\t\t\t\t'.media-modal .mejs-container, .wp_attachment_holder .mejs-container'\n\t\t\t);\n\t\t\tif (mejsContainer) {\n\t\t\t\tconst mejsId = mejsContainer.id;\n\t\t\t\tif (mejsId && window.mejs.players[mejsId]) {\n\t\t\t\t\tconst player = window.mejs.players[mejsId];\n\t\t\t\t\tplayer.setPoster(poster);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [poster]);\n\n\tfunction onSelectPoster(image) {\n\t\tsetAttributes({\n\t\t\t...attributes,\n\t\t\tposter: image.url,\n\t\t\tposter_id: Number(image.id),\n\t\t});\n\t}\n\n\tfunction onRemovePoster() {\n\t\tsetAttributes({ ...attributes, poster: undefined });\n\n\t\t// Move focus back to the Media Upload button.\n\t\tposterImageButton.current.focus();\n\t}\n\n\tconst handleGenerate = async (type = 'generate') => {\n\t\tsetIsSaving(true);\n\t\tconst ffmpegExists = videopack_config.ffmpeg_exists;\n\t\tconst browserThumbnailsEnabled = videopack_config.browser_thumbnails;\n\n\t\tif (!browserThumbnailsEnabled && ffmpegExists) {\n\t\t\t// Browser thumbnails explicitly disabled, use FFmpeg directly\n\t\t\tconst newThumbImages = [];\n\t\t\tfor (let i = 1; i <= Number(total_thumbnails); i++) {\n\t\t\t\tconst response = await generateThumb(i, type);\n\t\t\t\tconst thumb = {\n\t\t\t\t\tsrc: response.real_thumb_url,\n\t\t\t\t\ttype: 'ffmpeg',\n\t\t\t\t};\n\t\t\t\tnewThumbImages.push(thumb);\n\t\t\t\tsetThumbChoices([...newThumbImages]); // Update incrementally\n\t\t\t}\n\t\t\tsetIsSaving(false);\n\t\t} else {\n\t\t\t// Attempt browser-based generation\n\t\t\tgenerateThumbCanvases(type);\n\t\t}\n\t};\n\n\tconst generateThumbCanvases = useCallback(async (type) => {\n\t\tconst thumbsInt = Number(total_thumbnails);\n\t\tconst newThumbCanvases = [];\n\t\tconst ffmpegExists = videopack_config.ffmpeg_exists;\n\n\t\tconst timePoints = [...Array(thumbsInt)].map((_, i) => {\n\t\t\tlet movieoffset =\n\t\t\t\t((i + 1) / (thumbsInt + 1)) * videoRef.current.duration;\n\t\t\tif (type === 'random') {\n\t\t\t\tconst randomOffset = Math.floor(\n\t\t\t\t\tMath.random() * (videoRef.current.duration / thumbsInt)\n\t\t\t\t);\n\t\t\t\tmovieoffset = Math.max(movieoffset - randomOffset, 0);\n\t\t\t}\n\t\t\treturn movieoffset;\n\t\t});\n\n\t\tconst processNextThumbnail = async (index) => {\n\t\t\tif (index >= thumbsInt) {\n\t\t\t\tvideoRef.current.removeEventListener(\n\t\t\t\t\t'timeupdate',\n\t\t\t\t\ttimeupdateListener\n\t\t\t\t);\n\t\t\t\tsetIsSaving(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvideoRef.current.currentTime = timePoints[index];\n\t\t};\n\n\t\tconst timeupdateListener = async () => {\n\t\t\tlet thumb;\n\t\t\ttry {\n\t\t\t\tconst canvas = await drawCanvasThumb();\n\t\t\t\tthumb = {\n\t\t\t\t\tsrc: canvas.toDataURL(),\n\t\t\t\t\ttype: 'canvas',\n\t\t\t\t\tcanvasObject: canvas,\n\t\t\t\t};\n\t\t\t\tnewThumbCanvases.push(thumb);\n\t\t\t\tsetThumbChoices([...newThumbCanvases]);\n\t\t\t\tprocessNextThumbnail(newThumbCanvases.length);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error generating canvas thumbnail:', error);\n\t\t\t\tif (ffmpegExists) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t'Falling back to FFmpeg for thumbnail generation.'\n\t\t\t\t\t);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await generateThumb(\n\t\t\t\t\t\t\tnewThumbCanvases.length + 1,\n\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthumb = {\n\t\t\t\t\t\t\tsrc: response.real_thumb_url,\n\t\t\t\t\t\t\ttype: 'ffmpeg',\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewThumbCanvases.push(thumb);\n\t\t\t\t\t\tsetThumbChoices([...newThumbCanvases]);\n\t\t\t\t\t\tprocessNextThumbnail(newThumbCanvases.length);\n\t\t\t\t\t} catch (ffmpegError) {\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t'FFmpeg fallback also failed:',\n\t\t\t\t\t\t\tffmpegError\n\t\t\t\t\t\t);\n\t\t\t\t\t\t// Display a user-friendly error message if both methods fail\n\t\t\t\t\t\t// For now, just log and stop\n\t\t\t\t\t\tvideoRef.current.removeEventListener(\n\t\t\t\t\t\t\t'timeupdate',\n\t\t\t\t\t\t\ttimeupdateListener\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetIsSaving(false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Browser thumbnail generation failed and FFmpeg is not available.'\n\t\t\t\t\t);\n\t\t\t\t\t// Display a user-friendly error message\n\t\t\t\t\tvideoRef.current.removeEventListener(\n\t\t\t\t\t\t'timeupdate',\n\t\t\t\t\t\ttimeupdateListener\n\t\t\t\t\t);\n\t\t\t\t\tsetIsSaving(false);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvideoRef.current.addEventListener('timeupdate', timeupdateListener);\n\t\tprocessNextThumbnail(0); // Start the process\n\t});\n\n\t// function to toggle video playback\n\tconst togglePlayback = () => {\n\t\tif (videoRef.current?.paused) {\n\t\t\tvideoRef.current.play();\n\t\t\tsetIsPlaying(true);\n\t\t} else {\n\t\t\tvideoRef.current?.pause();\n\t\t\tsetIsPlaying(false);\n\t\t}\n\t};\n\n\tconst pauseVideo = () => {\n\t\tvideoRef.current.pause();\n\t\tsetIsPlaying(false);\n\t};\n\n\tconst playVideo = () => {\n\t\tvideoRef.current.play();\n\t\tsetIsPlaying(true);\n\t};\n\n\t// function to handle slider changes\n\tconst handleSliderChange = (value) => {\n\t\tvideoRef.current.currentTime = value;\n\t\tsetCurrentTime(value);\n\t};\n\n\tuseEffect(() => {\n\t\tconst handleTimeUpdate = () => {\n\t\t\tsetCurrentTime(videoRef.current.currentTime); // update currentTime state variable\n\t\t};\n\n\t\tvideoRef.current?.addEventListener('timeupdate', handleTimeUpdate);\n\t\treturn () => {\n\t\t\tvideoRef.current?.removeEventListener(\n\t\t\t\t'timeupdate',\n\t\t\t\thandleTimeUpdate\n\t\t\t);\n\t\t};\n\t}, []);\n\n\tconst drawCanvasThumb = async () => {\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.width = videoRef.current.videoWidth;\n\t\tcanvas.height = videoRef.current.videoHeight;\n\t\tconst ctx = canvas.getContext('2d');\n\t\tctx.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n\n\t\tif (options?.ffmpeg_thumb_watermark?.url) {\n\t\t\ttry {\n\t\t\t\tconst watermarkCanvas = drawWatermarkOnCanvas(canvas);\n\t\t\t\treturn watermarkCanvas;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error drawing watermark:', error);\n\t\t\t}\n\t\t} else {\n\t\t\treturn canvas;\n\t\t}\n\t};\n\n\tconst handleSaveThumbnail = (event, thumb) => {\n\t\tevent.currentTarget.classList.add('saving');\n\t\tsetIsSaving(true);\n\t\tif (thumb.type === 'ffmpeg') {\n\t\t\tsetImgAsPoster(thumb.src);\n\t\t} else {\n\t\t\tsetCanvasAsPoster(thumb.canvasObject);\n\t\t}\n\t};\n\n\tconst handleSaveAllThumbnails = async () => {\n\t\tsetIsSaving(true); // Show spinner for the whole operation\n\t\tconst firstThumbType = thumbChoices[0]?.type; // Assuming all generated thumbs are of the same type\n\n\t\tif (firstThumbType === 'canvas') {\n\t\t\tconst postName = getFilename(src);\n\t\t\tconst uploadPromises = thumbChoices.map((thumb) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tthumb.canvasObject.toBlob(async (blob) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst formData = new FormData();\n\t\t\t\t\t\t\tformData.append('file', blob, 'thumbnail.jpg');\n\t\t\t\t\t\t\tformData.append('attachment_id', id);\n\t\t\t\t\t\t\tformData.append('post_name', postName);\n\n\t\t\t\t\t\t\t// Don't need the response for \"save all\"\n\t\t\t\t\t\t\tawait uploadThumbnail(formData);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 'image/jpeg');\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tawait Promise.all(uploadPromises);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error saving all canvas thumbnails:', error);\n\t\t\t}\n\t\t\tsetThumbChoices([]);\n\t\t} else if (firstThumbType === 'ffmpeg') {\n\t\t\t// For FFmpeg thumbnails, send their temporary URLs to the server to be saved\n\t\t\tconst thumbUrls = thumbChoices.map((thumb) => thumb.src);\n\t\t\ttry {\n\t\t\t\tawait saveAllThumbnails(id, thumbUrls);\n\t\t\t\tsetThumbChoices([]); // Clear choices after saving\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error saving all FFmpeg thumbnails:', error);\n\t\t\t}\n\t\t}\n\t\tsetIsSaving(false); // Hide spinner after all operations complete\n\t};\n\n\tfunction drawWatermarkOnCanvas(canvas) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tif (!options?.ffmpeg_thumb_watermark?.url) {\n\t\t\t\t\treject(new Error('No thumbnail watermark set'));\n\t\t\t\t}\n\t\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\t\tconst watermarkImage = new Image();\n\t\t\t\tconst { url, scale, align, x, valign, y } =\n\t\t\t\t\toptions.ffmpeg_thumb_watermark;\n\n\t\t\t\twatermarkImage.crossOrigin = 'Anonymous';\n\t\t\t\twatermarkImage.src = url;\n\n\t\t\t\twatermarkImage.onload = () => {\n\t\t\t\t\tconst canvasWidth = canvas.width;\n\t\t\t\t\tconst canvasHeight = canvas.height;\n\t\t\t\t\tconst watermarkWidth = (canvasWidth * scale) / 100;\n\t\t\t\t\tconst watermarkHeight = (canvasHeight * scale) / 100;\n\n\t\t\t\t\tconst horizontalOffset = (canvasWidth * x) / 100;\n\t\t\t\t\tconst verticalOffset = (canvasHeight * y) / 100;\n\n\t\t\t\t\tlet xPos, yPos;\n\n\t\t\t\t\tswitch (align) {\n\t\t\t\t\t\tcase 'left':\n\t\t\t\t\t\t\txPos = horizontalOffset;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'center':\n\t\t\t\t\t\t\txPos =\n\t\t\t\t\t\t\t\t(canvasWidth - watermarkWidth) / 2 +\n\t\t\t\t\t\t\t\thorizontalOffset;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'right':\n\t\t\t\t\t\t\txPos =\n\t\t\t\t\t\t\t\tcanvasWidth - watermarkWidth - horizontalOffset;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treject(\n\t\t\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\t\t__('Invalid horizontal alignment provided')\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (valign) {\n\t\t\t\t\t\tcase 'top':\n\t\t\t\t\t\t\tyPos = verticalOffset;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'center':\n\t\t\t\t\t\t\tyPos =\n\t\t\t\t\t\t\t\t(canvasHeight - watermarkHeight) / 2 +\n\t\t\t\t\t\t\t\tverticalOffset;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'bottom':\n\t\t\t\t\t\t\tyPos =\n\t\t\t\t\t\t\t\tcanvasHeight - watermarkHeight - verticalOffset;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treject(\n\t\t\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\t\t__('Invalid vertical alignment provided')\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\twatermarkImage,\n\t\t\t\t\t\txPos,\n\t\t\t\t\t\tyPos,\n\t\t\t\t\t\twatermarkWidth,\n\t\t\t\t\t\twatermarkHeight\n\t\t\t\t\t);\n\t\t\t\t\tresolve(canvas);\n\t\t\t\t};\n\n\t\t\t\twatermarkImage.onerror = () => {\n\t\t\t\t\treject(new Error(__('Failed to load watermark image')));\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst setCanvasAsPoster = async (canvasObject) => {\n\t\tsetIsSaving(true);\n\t\ttry {\n\t\t\tconst blob = await new Promise((resolve) =>\n\t\t\t\tcanvasObject.toBlob(resolve, 'image/jpeg')\n\t\t\t);\n\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('file', blob, 'thumbnail.jpg');\n\t\t\tformData.append('attachment_id', id);\n\t\t\tconst postName = getFilename(src);\n\t\t\tformData.append('post_name', postName);\n\n\t\t\tconst response = await uploadThumbnail(formData);\n\n\t\t\tsetPosterData(response.thumb_url, response.thumb_id);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error uploading thumbnail:', error);\n\t\t} finally {\n\t\t\tsetIsSaving(false);\n\t\t}\n\t};\n\n\tconst setPosterData = async (new_poster, new_poster_id) => {\n\t\ttry {\n\t\t\tconst metaData = {};\n\t\t\tif (new_poster) {\n\t\t\t\t// Only include if new_poster has a value\n\t\t\t\tmetaData['_kgflashmediaplayer-poster'] = new_poster;\n\t\t\t\tmetaData['_kgflashmediaplayer-poster-id'] =\n\t\t\t\t\tNumber(new_poster_id);\n\t\t\t\tmetaData['_videopack-meta'] = {\n\t\t\t\t\t...videoData?.meta?.['_videopack-meta'],\n\t\t\t\t\tposter: new_poster,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tawait videoData?.edit({\n\t\t\t\tfeatured_media: new_poster_id ? Number(new_poster_id) : null,\n\t\t\t\tmeta: metaData,\n\t\t\t});\n\t\t\tawait videoData?.save();\n\n\t\t\t// Refresh the media library grid to show the updated thumbnail.\n\t\t\tif (wp.media && wp.media.frame) {\n\t\t\t\tif (\n\t\t\t\t\twp.media.frame.content.get() &&\n\t\t\t\t\twp.media.frame.content.get().collection\n\t\t\t\t) {\n\t\t\t\t\tconst collection = wp.media.frame.content.get().collection;\n\t\t\t\t\tcollection.props.set({ ignore: new Date().getTime() });\n\t\t\t\t} else if (wp.media.frame.library) {\n\t\t\t\t\t// Fallback for different states of the media modal.\n\t\t\t\t\twp.media.frame.library.props.set({\n\t\t\t\t\t\tignore: new Date().getTime(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetAttributes({\n\t\t\t\t...attributes,\n\t\t\t\tposter: new_poster,\n\t\t\t\tposter_id: new_poster_id,\n\t\t\t});\n\t\t\tsetThumbChoices([]);\n\t\t\tsetIsSaving(false);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error updating attachment:', error);\n\t\t\tsetIsSaving(false);\n\t\t}\n\t};\n\n\tconst setImgAsPoster = async (thumb_url) => {\n\t\ttry {\n\t\t\tconst response = await setPosterImage(id, thumb_url);\n\t\t\tsetPosterData(response.thumb_url, response.thumb_id);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t};\n\n\tconst generateThumb = async (i, type) => {\n\t\ttry {\n\t\t\tconst response = await generateThumbnail(\n\t\t\t\tsrc,\n\t\t\t\ttotal_thumbnails,\n\t\t\t\ti,\n\t\t\t\tid,\n\t\t\t\ttype\n\t\t\t);\n\n\t\t\treturn response;\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t};\n\n\tconst handleVideoKeyboardControl = (event) => {\n\t\tevent.stopImmediatePropagation();\n\n\t\tswitch (event.code) {\n\t\t\tcase 'Space': // spacebar\n\t\t\t\ttogglePlayback();\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowLeft': // left\n\t\t\t\tpauseVideo();\n\t\t\t\tvideoRef.current.currentTime =\n\t\t\t\t\tvideoRef.current.currentTime - 0.042;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowRight': // right\n\t\t\t\tpauseVideo();\n\t\t\t\tvideoRef.current.currentTime =\n\t\t\t\t\tvideoRef.current.currentTime + 0.042;\n\t\t\t\tbreak;\n\n\t\t\tcase 'KeyJ': //j\n\t\t\t\tif (isPlaying) {\n\t\t\t\t\tvideoRef.current.playbackRate = Math.max(\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tvideoRef.current.playbackRate - 1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'KeyK': // k\n\t\t\t\tpauseVideo();\n\t\t\t\tbreak;\n\n\t\t\tcase 'KeyL': //l\n\t\t\t\tif (isPlaying) {\n\t\t\t\t\tvideoRef.current.playbackRate =\n\t\t\t\t\t\tvideoRef.current.playbackRate + 1;\n\t\t\t\t}\n\t\t\t\tplayVideo();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn; // exit this handler for other keys\n\t\t}\n\t\tevent.preventDefault(); // prevent the default action (scroll / move caret)\n\t};\n\n\tconst handleUseThisFrame = async () => {\n\t\tsetIsSaving(true);\n\t\tconst canvas = await drawCanvasThumb(); // Await the canvas object (no index for single frame)\n\t\tsetCanvasAsPoster(canvas); // Pass the canvas object directly, index will be null\n\t};\n\n\tconst handleToggleVideoPlayer = (event) => {\n\t\tevent.preventDefault();\n\t\tconst next = !isOpened;\n\t\tsetIsOpened(next);\n\t\tif (next && thumbVideoPanel.current) {\n\t\t\tthumbVideoPanel.current.focus();\n\t\t\tthumbVideoPanel.current.addEventListener(\n\t\t\t\t'keydown',\n\t\t\t\thandleVideoKeyboardControl\n\t\t\t);\n\t\t} else {\n\t\t\tthumbVideoPanel.current.addEventListener(\n\t\t\t\t'keydown',\n\t\t\t\thandleVideoKeyboardControl\n\t\t\t);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"videopack-thumbnail-generator\">\n\t\t\t<PanelBody title={__('Thumbnails')}>\n\t\t\t\t{poster && (\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"videopack-current-thumbnail\"\n\t\t\t\t\t\tsrc={poster}\n\t\t\t\t\t\talt={__('Current Thumbnail')}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<BaseControl className=\"editor-video-poster-control\">\n\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t{__('Video Thumbnail')}\n\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\ttitle={__('Select video thumbnail')}\n\t\t\t\t\t\tonSelect={onSelectPoster}\n\t\t\t\t\t\tallowedTypes={VIDEO_POSTER_ALLOWED_MEDIA_TYPES}\n\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t\tref={posterImageButton}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!poster ? __('Select') : __('Replace')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t{!!poster && (\n\t\t\t\t\t\t<Button onClick={onRemovePoster} variant=\"tertiary\">\n\t\t\t\t\t\t\t{__('Remove')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</BaseControl>\n\t\t\t\t<TextControl // This is the UI control for total_thumbnails.\n\t\t\t\t\tvalue={total_thumbnails}\n\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t...attributes,\n\t\t\t\t\t\t\t\ttotal_thumbnails: '',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t...attributes,\n\t\t\t\t\t\t\t\ttotal_thumbnails: Number(value),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tclassName=\"videopack-total-thumbnails\"\n\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={() => handleGenerate('generate')}\n\t\t\t\t\tclassName=\"videopack-generate\"\n\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t>\n\t\t\t\t\t{__('Generate')}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={() => handleGenerate('random')}\n\t\t\t\t\tclassName=\"videopack-generate\"\n\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t>\n\t\t\t\t\t{__('Random')}\n\t\t\t\t</Button>\n\t\t\t\t{thumbChoices.length > 0 && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={handleSaveAllThumbnails}\n\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t>\n\t\t\t\t\t\t{__('Save All')}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t\t{thumbChoices.length > 0 && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`videopack-thumbnail-holder${isSaving ? ' disabled' : ''}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{thumbChoices.map((thumb, index) => (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t'videopack-thumbnail spinner-container'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\t\t\thandleSaveThumbnail(event, thumb, index);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={thumb.src}\n\t\t\t\t\t\t\t\t\talt={`Thumbnail ${index + 1}`}\n\t\t\t\t\t\t\t\t\ttitle={__('Save and set thumbnail')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{isSaving && <Spinner />}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div\n\t\t\t\t\tclassName={`components-panel__body videopack-thumb-video ${isOpened ? 'is-opened' : ''}`}\n\t\t\t\t>\n\t\t\t\t\t<h2 className=\"components-panel__body-title\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"components-button components-panel__body-toggle\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonClick={handleToggleVideoPlayer}\n\t\t\t\t\t\t\taria-expanded={isOpened}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span aria-hidden=\"true\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\tclassName=\"components-panel__arrow\"\n\t\t\t\t\t\t\t\t\ticon={isOpened ? chevronUp : chevronDown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{__('Choose From Video')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`videopack-thumb-video-panel spinner-container${\n\t\t\t\t\t\t\tisSaving ? ' saving' : ''\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\tref={thumbVideoPanel}\n\t\t\t\t\t>\n\t\t\t\t\t\t<video\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\tref={videoRef}\n\t\t\t\t\t\t\tmuted={true}\n\t\t\t\t\t\t\tpreload=\"metadata\"\n\t\t\t\t\t\t\tonClick={togglePlayback}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"videopack-thumb-video-controls\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"videopack-play-pause\"\n\t\t\t\t\t\t\t\tonClick={togglePlayback}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\tisPlaying\n\t\t\t\t\t\t\t\t\t\t\t? 'controls-pause'\n\t\t\t\t\t\t\t\t\t\t\t: 'controls-play'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{!isNaN(videoRef.current?.duration) && (\n\t\t\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\tmax={videoRef.current.duration}\n\t\t\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t\t\t\tinitialPosition={0}\n\t\t\t\t\t\t\t\t\tvalue={videoRef.current.currentTime}\n\t\t\t\t\t\t\t\t\tonChange={handleSliderChange}\n\t\t\t\t\t\t\t\t\tclassName=\"videopack-thumbvideo-slider\"\n\t\t\t\t\t\t\t\t\ttype=\"slider\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={handleUseThisFrame}\n\t\t\t\t\t\t\tclassName=\"videopack-use-this-frame\"\n\t\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__('Use this frame')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{isSaving && <Spinner />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</PanelBody>\n\t\t</div>\n\t);\n};\n\nexport default Thumbnails;\n","// extracted by mini-css-extract-plugin\nexport {};","import { _n, sprintf } from '@wordpress/i18n';\n\nconst BelowVideo = ({ attributes }) => {\n\tconst { view_count, caption } = attributes;\n\n\tlet viewStarts = 0;\n\tif ((attributes?.starts && view_count) || caption) {\n\t\tif (attributes?.starts) {\n\t\t\tviewStarts = Number(attributes?.starts);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"videopack-below-video\">\n\t\t\t\t\t{view_count && viewStarts > 0 && (\n\t\t\t\t\t\t<div className=\"viewcount\">\n\t\t\t\t\t\t\t{sprintf(\n\t\t\t\t\t\t\t\t_n('%d view', '%d views', viewStarts),\n\t\t\t\t\t\t\t\tviewStarts\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{caption && <div className=\"caption\">{caption}</div>}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n\treturn null;\n};\n\nexport default BelowVideo;\n","import { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\n\nconst MetaBar = ({ attributes, metaBarVisible }) => {\n\tconst {\n\t\tsrc,\n\t\ttitle,\n\t\tembedcode,\n\t\tembeddable,\n\t\tdownloadlink,\n\t\ttwitter_button,\n\t\tfacebook_button,\n\t\tvideoTitle,\n\t} = attributes;\n\tconst metaBarItems = [\n\t\ttitle,\n\t\tembedcode,\n\t\tdownloadlink,\n\t\ttwitter_button,\n\t\tfacebook_button,\n\t];\n\tconst noTitleMeta = title ? '' : ' no-title';\n\tconst [shareIsOpen, setShareIsOpen] = useState(false);\n\n\tconst embedItems = () => {\n\t\tif (embeddable && embedcode) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst embedLink = () => {\n\t\tif (attributes?.embedlink) {\n\t\t\treturn String(attributes?.embedlink);\n\t\t}\n\t\treturn '';\n\t};\n\n\tconst EmbedElements = () => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<button\n\t\t\t\t\tclassName={`click-trap${shareIsOpen ? ' is-visible' : ''}`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetShareIsOpen(!shareIsOpen);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclassName={`share-container${\n\t\t\t\t\t\tshareIsOpen ? ' is-visible' : ''\n\t\t\t\t\t}${noTitleMeta}`}\n\t\t\t\t>\n\t\t\t\t\t{embedItems() && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className=\"embedcode-container\">\n\t\t\t\t\t\t\t\t<span className=\"videopack-icons embed\"></span>\n\t\t\t\t\t\t\t\t<span>{__('Embed:')}</span>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"embedcode\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={embedLink()}\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\t\t\t\t\tevent.target.select();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t};\n\n\tif (metaBarItems.includes(true)) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tclassName={`videopack-meta-bar${noTitleMeta}`}\n\t\t\t\t>\n\t\t\t\t\t<span className={'meta-icons'}>\n\t\t\t\t\t\t{embedItems() && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tshareIsOpen\n\t\t\t\t\t\t\t\t\t\t? 'vjs-icon-cancel'\n\t\t\t\t\t\t\t\t\t\t: 'vjs-icon-share'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetShareIsOpen(!shareIsOpen);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{downloadlink && (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"download-link\"\n\t\t\t\t\t\t\t\thref={src}\n\t\t\t\t\t\t\t\tdownload={true}\n\t\t\t\t\t\t\t\ttitle={__('Click to download')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span className=\"videopack-icons download\"></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</span>\n\t\t\t\t\t{title && <span className=\"title\">{videoTitle}</span>}\n\t\t\t\t</div>\n\t\t\t\t{embedItems() && <EmbedElements />}\n\t\t\t</>\n\t\t);\n\t}\n\treturn null;\n};\n\nexport default MetaBar;\n","/* global videojs */\n\nimport { useRef, useEffect } from '@wordpress/element';\n\nexport const VideoJS = (props) => {\n\tconst videoRef = useRef(null);\n\tconst playerRef = useRef(null);\n\tconst { options, skin, onPlay, onPause } = props;\n\n\tuseEffect(() => {\n\t\t// On initial render, wait for sources to be available before initializing.\n\t\tif (!playerRef.current) {\n\t\t\tif (!options || !options.sources || options.sources.length === 0) {\n\t\t\t\treturn; // Don't initialize until sources are ready.\n\t\t\t}\n\n\t\t\tconst videoElement = videoRef.current;\n\t\t\tif (!videoElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tplayerRef.current = videojs(videoElement, options, () => {\n\t\t\t\tplayerRef.current.on('play', onPlay);\n\t\t\t\tplayerRef.current.on('pause', onPause);\n\t\t\t});\n\n\t\t\t// On subsequent renders, update the existing player.\n\t\t} else {\n\t\t\tconst player = playerRef.current;\n\t\t\tif (player && !player.isDisposed()) {\n\t\t\t\tplayer.autoplay(options.autoplay);\n\t\t\t\tplayer.muted(options.muted);\n\t\t\t\tplayer.poster(options.poster);\n\t\t\t\t// Only update src if sources are valid to prevent the error.\n\t\t\t\tif (options.sources && options.sources.length > 0) {\n\t\t\t\t\tplayer.src(options.sources);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [options]);\n\n\t// Dispose the player when the component unmounts\n\tuseEffect(() => {\n\t\tconst player = playerRef.current;\n\t\treturn () => {\n\t\t\tif (player && !player.isDisposed()) {\n\t\t\t\tplayer.off('play', onPlay);\n\t\t\t\tplayer.off('pause', onPause);\n\t\t\t\tplayer.dispose();\n\t\t\t\tplayerRef.current = null;\n\t\t\t}\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div data-vjs-player>\n\t\t\t<video ref={videoRef} className={`video-js ${skin}`} />\n\t\t</div>\n\t);\n};\n\nexport default VideoJS;\n","/* global MediaElementPlayer */\n\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport MetaBar from './MetaBar';\nimport VideoJS from './VideoJs';\nimport BelowVideo from './BelowVideo';\n\nconst VideoPlayer = ({ attributes, onReady }) => {\n\tconst {\n\t\tembed_method,\n\t\tautoplay,\n\t\tcontrols,\n\t\tid,\n\t\tskin,\n\t\tloop,\n\t\tmuted,\n\t\tplaysinline,\n\t\tposter,\n\t\tpreload,\n\t\tsrc,\n\t\twidth,\n\t\theight,\n\t\tcount_views,\n\t\tstart,\n\t\tpauseothervideos,\n\t\tvolume,\n\t\tendofvideooverlay,\n\t\tauto_res,\n\t\tpixel_ratio,\n\t\tright_click,\n\t\tplayback_rate,\n\t\tfullwidth,\n\t\tview_count,\n\t\tcaption,\n\t\tsources = [],\n\t} = attributes;\n\n\tconst playerRef = useRef(null);\n\tconst wrapperRef = useRef(null);\n\tconst [videoJsOptions, setVideoJsOptions] = useState(null);\n\n\tconst renderReady = sources && sources.length > 0 && sources[0].src;\n\n\tuseEffect(() => {\n\t\tif (wrapperRef.current) {\n\t\t\twrapperRef.current.classList.add('meta-bar-visible');\n\t\t}\n\t}, []);\n\n\tconst handlePlay = () => {\n\t\tif (wrapperRef.current) {\n\t\t\twrapperRef.current.classList.remove('meta-bar-visible');\n\t\t}\n\t};\n\n\tconst handlePause = () => {\n\t\tif (wrapperRef.current) {\n\t\t\twrapperRef.current.classList.add('meta-bar-visible');\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (embed_method === 'WordPress Default' && playerRef.current) {\n\t\t\tconst player = new MediaElementPlayer(playerRef.current);\n\t\t\treturn () => {\n\t\t\t\tif (player) {\n\t\t\t\t\tplayer.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}, [embed_method, playerRef.current]);\n\n\tuseEffect(() => {\n\t\tif (embed_method === 'Video.js') {\n\t\t\tsetVideoJsOptions({\n\t\t\t\tautoplay,\n\t\t\t\tcontrols,\n\t\t\t\tfluid: true,\n\t\t\t\tresponsive: true,\n\t\t\t\tmuted,\n\t\t\t\tpreload,\n\t\t\t\tposter,\n\t\t\t\tloop,\n\t\t\t\tplaysinline,\n\t\t\t\tvolume,\n\t\t\t\tplaybackRates: playback_rate ? [0.5, 1, 1.25, 1.5, 2] : [],\n\t\t\t\tsources: sources.map((s) => ({ src: s.src, type: s.type })),\n\t\t\t\tuserActions: { click: false },\n\t\t\t});\n\t\t}\n\t}, [\n\t\tautoplay,\n\t\tcontrols,\n\t\tmuted,\n\t\tpreload,\n\t\tposter,\n\t\tloop,\n\t\tplaysinline,\n\t\tvolume,\n\t\tplayback_rate,\n\t\tJSON.stringify(sources),\n\t\tembed_method,\n\t]);\n\n\tconst videoSourceElements = () => {\n\t\treturn sources.map((source, index) => (\n\t\t\t<source key={index} src={source.src} type={source.type} />\n\t\t));\n\t};\n\n\tconst GenericPlayer = () => (\n\t\t<video\n\t\t\tposter={poster}\n\t\t\tloop={loop}\n\t\t\tautoPlay={autoplay}\n\t\t\tpreload={preload}\n\t\t\tcontrols={controls}\n\t\t\tmuted={muted}\n\t\t\tplaysInline={playsinline}\n\t\t\twidth=\"100%\"\n\t\t\theight=\"100%\"\n\t\t\tclassName={\n\t\t\t\tembed_method === 'WordPress Default'\n\t\t\t\t\t? 'wp-video-shortcode'\n\t\t\t\t\t: null\n\t\t\t}\n\t\t\tref={playerRef}\n\t\t>\n\t\t\t{videoSourceElements()}\n\t\t\t<a href={src}>{src}</a>\n\t\t</video>\n\t);\n\n\tconst WordPressDefaultPlayer = () => (\n\t\t<div className=\"wp-video\">\n\t\t\t<GenericPlayer />\n\t\t</div>\n\t);\n\n\tconst handleVideoPlayerReady = (player) => {\n\t\tplayerRef.current = player;\n\t\tplayer.on('loadedmetadata', () => {\n\t\t\tif (embed_method === 'Video.js') {\n\t\t\t\tonReady(player.el().firstChild);\n\t\t\t} else {\n\t\t\t\tonReady(player);\n\t\t\t}\n\t\t\tif (autoplay) {\n\t\t\t\thandlePlay();\n\t\t\t}\n\t\t});\n\t\tplayer.on('waiting', () => console.log('player is waiting'));\n\t\tplayer.on('dispose', () => console.log('player will dispose'));\n\t};\n\n\tif (!renderReady) {\n\t\treturn null; // Or a loading spinner\n\t}\n\n\treturn (\n\t\t<div className=\"videopack-wrapper\" ref={wrapperRef}>\n\t\t\t<div className=\"videopack-player\">\n\t\t\t\t<MetaBar attributes={attributes} />\n\t\t\t\t{embed_method === 'Video.js' && videoJsOptions && (\n\t\t\t\t\t<VideoJS\n\t\t\t\t\t\toptions={videoJsOptions}\n\t\t\t\t\t\tskin={skin}\n\t\t\t\t\t\tonPlay={handlePlay}\n\t\t\t\t\t\tonPause={handlePause}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{embed_method === 'WordPress Default' && (\n\t\t\t\t\t<WordPressDefaultPlayer />\n\t\t\t\t)}\n\t\t\t\t{embed_method === 'None' && <GenericPlayer />}\n\t\t\t</div>\n\t\t\t<BelowVideo attributes={attributes} />\n\t\t</div>\n\t);\n};\n\nexport default VideoPlayer;\n","import { __, _x } from '@wordpress/i18n';\n\nconst useVideoSettings = (attributes, setAttributes) => {\n\tconst handleSettingChange = (key, value) => {\n\t\tsetAttributes({ [key]: value });\n\t};\n\n\tconst preloadOptions = [\n\t\t{ value: 'auto', label: __('Auto') },\n\t\t{ value: 'metadata', label: __('Metadata') },\n\t\t{ value: 'none', label: _x('None', 'Preload value') },\n\t];\n\n\treturn {\n\t\thandleSettingChange,\n\t\tpreloadOptions,\n\t};\n};\n\nexport default useVideoSettings;\n","import apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\nexport const getSettings = async () => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/settings',\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching settings:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getQueue = async () => {\n\ttry {\n\t\tconst response = await apiFetch({\n\t\t\tpath: '/videopack/v1/queue',\n\t\t});\n\t\treturn response || [];\n\t} catch (error) {\n\t\tconsole.error('Error fetching queue:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const toggleQueue = async (action) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/queue/control',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { action },\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error toggling queue:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const clearQueue = async (type) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/queue/clear',\n\t\t\tmethod: 'DELETE',\n\t\t\tdata: { type },\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error clearing queue:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const deleteJob = async (jobId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/queue/${jobId}`,\n\t\t\tmethod: 'DELETE',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error deleting job:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const removeJob = async (jobId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/queue/remove/${jobId}`,\n\t\t\tmethod: 'DELETE',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error removing job:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getVideoFormats = async (attachmentId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/formats/${attachmentId}`,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching video formats:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const enqueueJob = async (attachmentId, src, formats) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/queue/${attachmentId}`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\turl: src,\n\t\t\t\tformats,\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error enqueuing job:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const assignFormat = async (mediaId, formatId, parentId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/wp/v2/media/${mediaId}`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tmeta: {\n\t\t\t\t\t'_kgflashmediaplayer-format': formatId,\n\t\t\t\t\t'_kgflashmediaplayer-parent': parentId,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error assigning format:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const deleteFile = async (attachmentId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/wp/v2/media/${attachmentId}?force=true`,\n\t\t\tmethod: 'DELETE',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error deleting file:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const uploadThumbnail = async (formData) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/thumbs/upload',\n\t\t\tmethod: 'POST',\n\t\t\tbody: formData,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error uploading thumbnail:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const saveAllThumbnails = async (attachment_id, thumb_urls) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/thumbs/save_all',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tattachment_id,\n\t\t\t\tthumb_urls,\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error saving all thumbnails:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getVideoGallery = async (args) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: addQueryArgs('/videopack/v1/video_gallery', args),\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching video gallery:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getUsersWithCapability = async (capability) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/wp/v2/users?capability=${capability}`,\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching users:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getFreemiusPage = async (page) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/freemius/${page}`,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(`Error fetching Freemius page '${page}':`, error);\n\t\tthrow error;\n\t}\n};\n\nexport const getRecentVideos = async (posts) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/recent_videos?posts=${posts}`,\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching recent videos:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const testFFmpegCommand = async (codec, resolution, rotate) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/ffmpeg-test/?codec=${codec}&resolution=${resolution}&rotate=${rotate}`,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error testing FFmpeg command:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getWPSettings = async () => {\n\ttry {\n\t\treturn await apiFetch({ path: '/wp/v2/settings' });\n\t} catch (error) {\n\t\tconsole.error('Error fetching WP settings:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const saveWPSettings = async (newSettings) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/wp/v2/settings',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tvideopack_options: newSettings,\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error saving WP settings:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const resetVideopackSettings = async () => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/defaults',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error resetting Videopack settings:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const setPosterImage = async (attachment_id, thumb_url) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/thumbs',\n\t\t\tmethod: 'PUT',\n\t\t\tdata: {\n\t\t\t\tattachment_id,\n\t\t\t\tthumburl: thumb_url,\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error setting poster image:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const generateThumbnail = async (\n\turl,\n\ttotal_thumbnails,\n\tthumbnail_index,\n\tattachment_id,\n\tgenerate_button\n) => {\n\ttry {\n\t\tconst path = addQueryArgs('/videopack/v1/thumbs', {\n\t\t\turl,\n\t\t\ttotal_thumbnails,\n\t\t\tthumbnail_index,\n\t\t\tattachment_id,\n\t\t\tgenerate_button,\n\t\t});\n\n\t\treturn await apiFetch({ path });\n\t} catch (error) {\n\t\tconsole.error('Error generating thumbnail:', error);\n\t\tthrow error;\n\t}\n};\n","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blob\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"mediaUtils\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerBlockType } from '@wordpress/blocks';\nimport edit from './edit';\nimport save from './save';\nimport metadata from './block.json';\nimport { videopack as videopackIcon } from '../../assets/icon';\n\nregisterBlockType(metadata.name, {\n\ticon: videopackIcon,\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit,\n\n\t/**\n\t * @see ./save.js\n\t */\n\tsave,\n});\n"],"names":["videopack","_jsxs","width","height","xmlns","viewBox","children","_jsx","transform","cx","cy","r","fill","stroke","strokeWidth","d","volumeDown","volumeUp","save","insertImage","useEntityRecord","useEffect","useMemo","InspectorControls","useBlockProps","VideoSettings","Thumbnails","AdditionalFormats","VideoPlayer","jsx","jsxs","Fragment","_Fragment","SingleVideoBlock","setAttributes","attributes","options","id","record","attachment","hasResolved","newAttributes","src","source_url","videoTitle","title","raw","caption","embedlink","link","poster","meta","updatedAttributes","Object","keys","reduce","acc","key","length","playerAttributes","newPlayerAttributes","sources","videoData","PanelBody","PanelRow","RangeControl","SelectControl","TextControl","ToggleControl","__","useVideoSettings","handleSettingChange","preloadOptions","initialOpen","gifmode","__nextHasNoMarginBottom","label","onChange","value","checked","autoplay","loop","muted","__next40pxDefaultSize","volume","beforeIcon","afterIcon","initialPosition","withInputField","min","max","step","controls","playsinline","help","playback_rate","preload","hideCancelButton","embeddable","downloadlink","embedcode","twitter_button","facebook_button","view_count","getBlobByURL","isBlobURL","Button","Placeholder","BlockControls","BlockIcon","MediaPlaceholder","MediaReplaceFlow","store","blockEditorStore","useState","useDispatch","useSelect","noticesStore","getSettings","icon","ALLOWED_MEDIA_TYPES","edit","setOptions","blockProps","createErrorNotice","mediaUpload","select","postId","getCurrentPostId","then","response","file","filesList","onFileChange","media","onSelectVideo","onError","onUploadError","allowedTypes","setAttributesFromMedia","media_attributes","url","total_thumbnails","mediaArray","Array","isArray","some","item","hasOwnProperty","undefined","onSelectURL","newSrc","message","type","placeholder","content","className","withIllustration","instructions","onSelect","accept","group","mediaId","mediaURL","sprintf","Spinner","__experimentalConfirmDialog","ConfirmDialog","useRef","coreStore","EncodeFormatStatus","getVideoFormats","enqueueJob","assignFormat","deleteFile","deleteJob","ffmpeg_exists","videoFormats","setVideoFormats","encodeMessage","setEncodeMessage","itemToDelete","setItemToDelete","deleteInProgress","setDeleteInProgress","isConfirmOpen","setIsConfirmOpen","isLoading","setIsLoading","isEncoding","setIsEncoding","progressTimerRef","updateVideoFormats","currentVideoFormats","newFormats","forEach","newFormat","oldFormat","encoding_now","progress","percent","JSON","stringify","fetchVideoFormats","formats","error","console","pollVideoFormats","siteSettings","getSite","shouldPoll","values","format","status","incrementEncodeProgress","updatedVideoFormats","elapsed","Date","getTime","started","remaining","video_duration","totalDurationInSeconds","speedMatch","speed","String","match","parseFloat","increment","remainingPercent","Math","pollTimer","setInterval","current","clearInterval","handleFormatCheckbox","event","formatId","prevVideoFormats","updatedFormats","handleEnqueue","videopack_config","formatsToEncode","entries","filter","queueMessage","queueList","encode_list","Intl","ListFormat","language","replace","style","log","join","queuePosition","new_queue_position","errorMessage","data","details","onSelectFormat","handleFileDelete","formatData","handleJobDelete","jobId","openConfirmDialog","job_id","name","handleConfirm","handleCancel","somethingToEncode","obj","encodeButtonTitle","isEncodeButtonDisabled","confirmDialogMessage","canUploadFiles","canUser","groupedFormats","codec","codecId","push","sort","a","b","resolution","map","codecGroup","encode","enabled","ffmpegExists","onCheckboxChange","onDeleteFile","onCancelJob","isOpen","onConfirm","onCancel","variant","onClick","text","disabled","CheckboxControl","__experimentalDivider","Divider","MediaUpload","EncodeProgress","getCheckboxCheckedState","getCheckboxDisabledState","exists","status_l10n","was_picked","render","open","size","deletable","isBusy","isDestructive","convertToTimecode","time","isNaN","padZero","num","floor","toString","padStart","h","m","s","hh","mm","ss","round","percentText","fps","error_message","BaseControl","Dashicon","Icon","useCallback","getFilename","uploadThumbnail","saveAllThumbnails","setPosterImage","generateThumbnail","chevronUp","chevronDown","poster_id","isExternal","thumbVideoPanel","videoRef","currentThumb","posterImageButton","isPlaying","setIsPlaying","isOpened","setIsOpened","currentTime","setCurrentTime","thumbChoices","setThumbChoices","isSaving","setIsSaving","VIDEO_POSTER_ALLOWED_MEDIA_TYPES","window","mejs","players","mejsContainer","document","querySelector","mejsId","player","setPoster","onSelectPoster","image","Number","onRemovePoster","focus","handleGenerate","browserThumbnailsEnabled","browser_thumbnails","newThumbImages","i","generateThumb","thumb","real_thumb_url","generateThumbCanvases","thumbsInt","newThumbCanvases","timePoints","_","movieoffset","duration","randomOffset","random","processNextThumbnail","index","removeEventListener","timeupdateListener","canvas","drawCanvasThumb","toDataURL","canvasObject","warn","ffmpegError","addEventListener","togglePlayback","paused","play","pause","pauseVideo","playVideo","handleSliderChange","handleTimeUpdate","createElement","videoWidth","videoHeight","ctx","getContext","drawImage","ffmpeg_thumb_watermark","watermarkCanvas","drawWatermarkOnCanvas","handleSaveThumbnail","currentTarget","classList","add","setImgAsPoster","setCanvasAsPoster","handleSaveAllThumbnails","firstThumbType","postName","uploadPromises","Promise","resolve","reject","toBlob","blob","formData","FormData","append","all","thumbUrls","Error","watermarkImage","Image","scale","align","x","valign","y","crossOrigin","onload","canvasWidth","canvasHeight","watermarkWidth","watermarkHeight","horizontalOffset","verticalOffset","xPos","yPos","onerror","setPosterData","thumb_url","thumb_id","new_poster","new_poster_id","metaData","featured_media","wp","frame","get","collection","props","set","ignore","library","handleVideoKeyboardControl","stopImmediatePropagation","code","playbackRate","preventDefault","handleUseThisFrame","handleToggleVideoPlayer","next","alt","VisualLabel","ref","tabIndex","_n","BelowVideo","viewStarts","starts","MetaBar","metaBarVisible","metaBarItems","noTitleMeta","shareIsOpen","setShareIsOpen","embedItems","embedLink","EmbedElements","target","readOnly","includes","href","download","VideoJS","playerRef","skin","onPlay","onPause","videoElement","videojs","on","isDisposed","off","dispose","onReady","embed_method","count_views","start","pauseothervideos","endofvideooverlay","auto_res","pixel_ratio","right_click","fullwidth","wrapperRef","videoJsOptions","setVideoJsOptions","renderReady","handlePlay","remove","handlePause","MediaElementPlayer","fluid","responsive","playbackRates","userActions","click","videoSourceElements","source","GenericPlayer","autoPlay","playsInline","WordPressDefaultPlayer","handleVideoPlayerReady","el","firstChild","_x","apiFetch","addQueryArgs","path","method","getQueue","toggleQueue","action","clearQueue","removeJob","attachmentId","parentId","body","attachment_id","thumb_urls","getVideoGallery","args","getUsersWithCapability","capability","getFreemiusPage","page","getRecentVideos","posts","testFFmpegCommand","rotate","getWPSettings","saveWPSettings","newSettings","videopack_options","resetVideopackSettings","thumburl","thumbnail_index","generate_button","registerBlockType","metadata","videopackIcon"],"sourceRoot":""}