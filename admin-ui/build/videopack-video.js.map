{"version":3,"file":"videopack-video.js","mappings":"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","sources":["webpack://videopack-admin/./src/assets/icon.js","webpack://videopack-admin/./src/blocks/videopack-video/SingleVideoBlock.js","webpack://videopack-admin/./src/blocks/videopack-video/VideoSettings.js","webpack://videopack-admin/./src/blocks/videopack-video/edit.js","webpack://videopack-admin/./src/blocks/videopack-video/save.js","webpack://videopack-admin/./src/components/AdditionalFormats/AdditionalFormats.js","webpack://videopack-admin/./src/components/AdditionalFormats/EncodeFormatStatus.js","webpack://videopack-admin/./src/components/AdditionalFormats/EncodeProgress.js","webpack://videopack-admin/./src/components/Thumbnails/Thumbnails.js","webpack://videopack-admin/./src/components/VideoPlayer/BelowVideo.js","webpack://videopack-admin/./src/components/VideoPlayer/MetaBar.js","webpack://videopack-admin/./src/components/VideoPlayer/VideoJs.js","webpack://videopack-admin/./src/components/VideoPlayer/VideoPlayer.js","webpack://videopack-admin/./src/hooks/useVideoSettings.js","webpack://videopack-admin/./src/utils/utils.js","webpack://videopack-admin/./src/utils/video-capture.js","webpack://videopack-admin/./src/blocks/videopack-video/editor.scss","webpack://videopack-admin/./src/components/AdditionalFormats/additional-formats.scss","webpack://videopack-admin/./src/components/Thumbnails/Thumbnails.scss","webpack://videopack-admin/./src/components/VideoPlayer/VideoPlayer.scss","webpack://videopack-admin/external window \"ReactJSXRuntime\"","webpack://videopack-admin/external window [\"wp\",\"apiFetch\"]","webpack://videopack-admin/external window [\"wp\",\"blob\"]","webpack://videopack-admin/external window [\"wp\",\"blockEditor\"]","webpack://videopack-admin/external window [\"wp\",\"blocks\"]","webpack://videopack-admin/external window [\"wp\",\"components\"]","webpack://videopack-admin/external window [\"wp\",\"compose\"]","webpack://videopack-admin/external window [\"wp\",\"coreData\"]","webpack://videopack-admin/external window [\"wp\",\"data\"]","webpack://videopack-admin/external window [\"wp\",\"element\"]","webpack://videopack-admin/external window [\"wp\",\"htmlEntities\"]","webpack://videopack-admin/external window [\"wp\",\"i18n\"]","webpack://videopack-admin/external window [\"wp\",\"mediaUtils\"]","webpack://videopack-admin/external window [\"wp\",\"notices\"]","webpack://videopack-admin/external window [\"wp\",\"primitives\"]","webpack://videopack-admin/external window [\"wp\",\"url\"]","webpack://videopack-admin/./node_modules/@wordpress/icons/build-module/library/chevron-down.mjs","webpack://videopack-admin/./node_modules/@wordpress/icons/build-module/library/chevron-up.mjs","webpack://videopack-admin/webpack/bootstrap","webpack://videopack-admin/webpack/runtime/compat get default export","webpack://videopack-admin/webpack/runtime/define property getters","webpack://videopack-admin/webpack/runtime/hasOwnProperty shorthand","webpack://videopack-admin/webpack/runtime/make namespace object","webpack://videopack-admin/./src/blocks/videopack-video/index.js"],"sourcesContent":["const videopack = (\n\t<svg\n\t\twidth=\"20px\"\n\t\theight=\"20px\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 395.11 395.11\"\n\t>\n\t\t<g data-name=\"Ellipse 1\" transform=\"rotate(-45 -201.149 592.789)\">\n\t\t\t<circle\n\t\t\t\tcx=\"360.24\"\n\t\t\t\tcy=\"595.24\"\n\t\t\t\tr=\"182.56\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tstroke=\"#cd0000\"\n\t\t\t\tstrokeWidth=\"30\"\n\t\t\t></circle>\n\t\t</g>\n\t\t<path\n\t\t\tfill=\"#cd0000\"\n\t\t\td=\"M95.4 108.3h45.81l57.42 98.69 55.57-98.69h47.49L198.54 286.81 95.4 109.68\"\n\t\t></path>\n\t\t<path fill=\"#f26a6b\" d=\"M254.2 108.3l-55.57 98.69-57.42-98.69\"></path>\n\t</svg>\n);\n\nconst volumeDown = (\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\theight=\"24px\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24px\"\n\t\tfill=\"currentColor\"\n\t>\n\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t<path d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\" />\n\t</svg>\n);\n\nconst volumeUp = (\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\theight=\"24px\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24px\"\n\t\tfill=\"currentColor\"\n\t>\n\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t<path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\" />\n\t</svg>\n);\n\nconst save = (\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\theight=\"24px\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24px\"\n\t\tfill=\"currentColor\"\n\t>\n\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t<path d=\"M17 3H3v18h18V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\" />\n\t</svg>\n);\n\nconst insertImage = (\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\theight=\"24px\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24px\"\n\t\tfill=\"currentColor\"\n\t>\n\t\t<path d=\"M21 21V3H3v18h18zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\" />\n\t</svg>\n);\n\nconst sortAscending = (\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\theight=\"24px\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24px\"\n\t\tfill=\"currentColor\"\n\t>\n\t\t<path d=\"M19 17H22L18 21L14 17H17V3H19M2 17H12V19H2M6 5V7H2V5M2 11H9V13H2V11Z\" />\n\t</svg>\n);\n\nconst sortDescending = (\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\theight=\"24px\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24px\"\n\t\tfill=\"currentColor\"\n\t>\n\t\t<path d=\"M19 7H22L18 3L14 7H17V21H19M2 17H12V19H2M6 5V7H2V5M2 11H9V13H2V11Z\" />\n\t</svg>\n);\n\nexport {\n\tinsertImage,\n\tsave,\n\tvideopack,\n\tvolumeDown,\n\tvolumeUp,\n\tsortAscending,\n\tsortDescending,\n};\n","import { useEntityRecord } from '@wordpress/core-data';\nimport { useEffect, useMemo, useState } from '@wordpress/element';\nimport { InspectorControls, useBlockProps } from '@wordpress/block-editor';\nimport VideoSettings from './VideoSettings.js';\nimport Thumbnails from '../../components/Thumbnails/Thumbnails.js';\nimport AdditionalFormats from '../../components/AdditionalFormats/AdditionalFormats.js';\nimport VideoPlayer from '../../components/VideoPlayer/VideoPlayer.js';\n\nconst SingleVideoBlock = ({\n\tsetAttributes,\n\tattributes,\n\toptions,\n\tisSelected,\n\texternalSourceGroups,\n}) => {\n\tconst { id, src } = attributes;\n\tconst [showOverlay, setShowOverlay] = useState(!isSelected);\n\n\tuseEffect(() => {\n\t\tsetShowOverlay(!isSelected);\n\t}, [isSelected]);\n\n\tconst videoData = useEntityRecord('postType', 'attachment', id);\n\tconst { record: attachment, hasResolved } = videoData;\n\n\tuseEffect(() => {\n\t\tif (id && hasResolved && attachment) {\n\t\t\tconst newAttributes = {\n\t\t\t\tsrc: attachment.source_url,\n\t\t\t\ttitle: attachment.title?.raw,\n\t\t\t\tcaption: attachment.caption?.raw,\n\t\t\t\tembedlink: attachment.link + '/embed',\n\t\t\t\tposter: attachment.meta?.['_videopack-meta']?.poster,\n\t\t\t};\n\n\t\t\tconst updatedAttributes = Object.keys(newAttributes).reduce(\n\t\t\t\t(acc, key) => {\n\t\t\t\t\t// Only update if the new value is defined and different from the current attribute.\n\t\t\t\t\tif (\n\t\t\t\t\t\tnewAttributes[key] !== undefined &&\n\t\t\t\t\t\tnewAttributes[key] !== attributes[key]\n\t\t\t\t\t) {\n\t\t\t\t\t\tacc[key] = newAttributes[key];\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t);\n\n\t\t\tif (Object.keys(updatedAttributes).length > 0) {\n\t\t\t\tsetAttributes(updatedAttributes);\n\t\t\t}\n\t\t}\n\t}, [id, attachment, hasResolved, setAttributes, attributes]);\n\n\tconst playerAttributes = useMemo(() => {\n\t\tconst newPlayerAttributes = { ...options, ...attributes };\n\n\t\tif (attachment) {\n\t\t\tnewPlayerAttributes.sources = attachment.videopack?.sources;\n\t\t\tnewPlayerAttributes.source_groups =\n\t\t\t\tattachment.videopack?.source_groups;\n\t\t} else if (!id && src) {\n\t\t\tnewPlayerAttributes.source_groups = externalSourceGroups || {};\n\t\t\tif (!externalSourceGroups || Object.keys(externalSourceGroups).length === 0)\n\t\t\t\tnewPlayerAttributes.sources = [{ src }];\n\t\t}\n\t\treturn newPlayerAttributes;\n\t}, [options, attributes, attachment, externalSourceGroups, id, src]);\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<Thumbnails\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t\tattributes={attributes}\n\t\t\t\t\tvideoData={videoData}\n\t\t\t\t\toptions={options}\n\t\t\t\t/>\n\t\t\t\t<VideoSettings\n\t\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\t\tattributes={attributes}\n\t\t\t\t\toptions={options}\n\t\t\t\t/>\n\t\t\t\t<AdditionalFormats attributes={attributes} options={options} />\n\t\t\t</InspectorControls>\n\t\t\t<div {...useBlockProps()}>\n\t\t\t\t{showOverlay && <div className=\"videopack-block-overlay\" />}\n\t\t\t\t<VideoPlayer attributes={playerAttributes} />\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default SingleVideoBlock;\n","import {\n\tPanelBody,\n\tPanelRow,\n\tRangeControl,\n\tSelectControl,\n\tTextControl,\n\tToggleControl,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\n\nimport { volumeUp, volumeDown } from '../../assets/icon';\nimport useVideoSettings from '../../hooks/useVideoSettings';\n\nconst VideoSettings = ({ attributes, setAttributes, options }) => {\n\tconst { handleSettingChange, preloadOptions } = useVideoSettings(\n\t\tattributes,\n\t\tsetAttributes\n\t);\n\n\tconst [displayAttributes, setDisplayAttributes] = useState({});\n\n\tuseEffect(() => {\n\t\tif (options) {\n\t\t\tsetDisplayAttributes({ ...options, ...attributes });\n\t\t}\n\t}, [options, attributes]);\n\n\treturn (\n\t\t<>\n\t\t\t<PanelBody title={__( 'Player Settings', 'video-embed-thumbnail-generator' )} initialOpen={false}>\n\t\t\t\t{!displayAttributes.gifmode && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__( 'Autoplay', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('autoplay', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!displayAttributes.autoplay}\n\t\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t\tdisplayAttributes.autoplay &&\n\t\t\t\t\t\t\t\t\t!displayAttributes.muted\n\t\t\t\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Autoplay is disabled while editing unless muted.'\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__( 'Loop', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('loop', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!displayAttributes.loop}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__( 'Muted', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('muted', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!displayAttributes.muted}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t{!displayAttributes.muted && (\n\t\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\tlabel={__( 'Volume', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tvalue={displayAttributes.volume}\n\t\t\t\t\t\t\t\tbeforeIcon={volumeDown}\n\t\t\t\t\t\t\t\tafterIcon={volumeUp}\n\t\t\t\t\t\t\t\tinitialPosition={1}\n\t\t\t\t\t\t\t\twithInputField={false}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('volume', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\t\t\tstep={0.05}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__( 'Controls', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('controls', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!displayAttributes.controls}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__( 'Variable playback speeds', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('playback_rate', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!displayAttributes.playback_rate}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\tlabel={__( 'Preload', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tvalue={displayAttributes.preload}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('preload', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\toptions={preloadOptions}\n\t\t\t\t\t\t\t\thideCancelButton={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={__( 'GIF mode', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('gifmode', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={!!displayAttributes.gifmode}\n\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t'Video acts like an animated GIF. Enables autoplay, loop, mute, and disables controls.'\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t</PanelBody>\n\t\t\t<PanelBody title={__( 'Sharing', 'video-embed-thumbnail-generator' )} initialOpen={false}>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={__( 'Allow embedding on other sites', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('embeddable', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={!!displayAttributes.embeddable}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t\t{displayAttributes.embeddable && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__( 'Download link', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('downloadlink', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!displayAttributes.downloadlink}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={__( 'Embed code', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\t\thandleSettingChange('embedcode', value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tchecked={!!displayAttributes.embedcode}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</PanelBody>\n\t\t\t<PanelBody title={__( 'Metadata', 'video-embed-thumbnail-generator' )} initialOpen={false}>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={__( 'Overlay title', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('overlay_title', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={!!displayAttributes.overlay_title}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t\t{displayAttributes.overlay_title && (\n\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tlabel={__( 'Title', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\tvalue={displayAttributes.title || ''}\n\t\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\t\thandleSettingChange('title', value)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelRow>\n\t\t\t\t)}\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tlabel={__( 'Caption', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\tvalue={displayAttributes.caption || ''}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('caption', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={__( 'View count', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\tonChange={(value) =>\n\t\t\t\t\t\t\thandleSettingChange('view_count', value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={!!displayAttributes.view_count}\n\t\t\t\t\t/>\n\t\t\t\t</PanelRow>\n\t\t\t</PanelBody>\n\t\t</>\n\t);\n};\n\nexport default VideoSettings;\n","import { getBlobByURL, isBlobURL } from '@wordpress/blob';\nimport { Button, Placeholder } from '@wordpress/components';\nimport {\n\tBlockControls,\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaReplaceFlow,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\n\nimport { useEffect, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport apiFetch from '@wordpress/api-fetch';\n\nimport { getSettings } from '../../utils/utils';\nimport { videopack as icon } from '../../assets/icon';\nimport SingleVideoBlock from './SingleVideoBlock';\nimport './editor.scss';\n\nconst ALLOWED_MEDIA_TYPES = ['video'];\n\nconst Edit = ({ attributes, setAttributes, isSelected }) => {\n\tconst { id, src } = attributes;\n\tconst [options, setOptions] = useState();\n\tconst [externalSourceGroups, setExternalSourceGroups] = useState(null);\n\tconst blockProps = useBlockProps();\n\tconst { createErrorNotice } = useDispatch(noticesStore);\n\tconst mediaUpload = useSelect(\n\t\t(select) => select(blockEditorStore).getSettings().mediaUpload,\n\t\t[]\n\t);\n\n\tconst { postId } = useSelect(\n\t\t(select) => ({\n\t\t\tpostId: select('core/editor').getCurrentPostId(),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst { attachment } = useSelect(\n\t\t(select) => ({\n\t\t\tattachment:\n\t\t\t\tid && typeof id === 'number'\n\t\t\t\t\t? select('core').getMedia(id)\n\t\t\t\t\t: undefined,\n\t\t}),\n\t\t[id]\n\t);\n\n\tuseEffect(() => {\n\t\tif (attachment) {\n\t\t\tsetAttributesFromMedia(attachment);\n\t\t}\n\t}, [attachment]);\n\n\tuseEffect(() => {\n\t\tgetSettings().then((response) => {\n\t\t\tsetOptions(response);\n\t\t});\n\n\t\tif (!id && isBlobURL(src)) {\n\t\t\tconst file = getBlobByURL(src);\n\t\t\tif (file) {\n\t\t\t\tmediaUpload({\n\t\t\t\t\tfilesList: [file],\n\t\t\t\t\tonFileChange: ([videoFile]) => onSelectVideo(videoFile),\n\t\t\t\t\tonError: onUploadError,\n\t\t\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!id && src) {\n\t\t\tsetExternalSourceGroups(null);\n\t\t\tapiFetch({\n\t\t\t\tpath: `/videopack/v1/sources?url=${encodeURIComponent(src)}`,\n\t\t\t})\n\t\t\t\t.then((data) => {\n\t\t\t\t\tsetExternalSourceGroups(data);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error('Error fetching video sources:', error);\n\t\t\t\t\tsetExternalSourceGroups({});\n\t\t\t\t});\n\t\t} else {\n\t\t\tsetExternalSourceGroups(null);\n\t\t}\n\t}, [id, src]);\n\n\tfunction setAttributesFromMedia(attachmentObject) {\n\t\tconst media_attributes = {\n\t\t\tsrc: attachmentObject.url,\n\t\t\tid: attachmentObject.id,\n\t\t\tposter: attachmentObject.meta?.['_videopack-meta']?.poster,\n\t\t\ttotal_thumbnails:\n\t\t\t\tattachmentObject.meta?.['_videopack-meta']?.total_thumbnails,\n\t\t\ttitle: attachmentObject.title?.rendered,\n\t\t\tcaption: attachmentObject.caption?.raw,\n\t\t\tstarts: attachmentObject.meta?.['_videopack-meta']?.starts,\n\t\t};\n\n\t\tconst updatedAttributes = Object.keys(media_attributes).reduce(\n\t\t\t(acc, key) => {\n\t\t\t\tif (media_attributes[key]) {\n\t\t\t\t\tacc[key] = media_attributes[key];\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{}\n\t\t);\n\n\t\tsetAttributes(updatedAttributes);\n\t}\n\n\tfunction onSelectVideo(video) {\n\t\tconst videoArray = Array.isArray(video) ? video : [video];\n\n\t\tif (\n\t\t\t!videoArray ||\n\t\t\t!videoArray.some((item) => item.hasOwnProperty('url'))\n\t\t) {\n\t\t\tsetAttributes({\n\t\t\t\tsrc: undefined,\n\t\t\t\tid: undefined,\n\t\t\t\tposter: undefined,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (videoArray.length === 1) {\n\t\t\tsetAttributesFromMedia(videoArray[0]);\n\t\t}\n\t}\n\n\tfunction onSelectURL(newSrc) {\n\t\tif (newSrc !== src) {\n\t\t\tlet filename = newSrc.split('?')[0].split('#')[0];\n\t\t\tfilename = filename.split('/').pop();\n\t\t\tif (filename.includes('.')) {\n\t\t\t\tfilename = filename.substring(0, filename.lastIndexOf('.'));\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tfilename = decodeURIComponent(filename);\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore decoding errors\n\t\t\t}\n\n\t\t\tsetAttributes({\n\t\t\t\tsrc: newSrc,\n\t\t\t\tid: undefined,\n\t\t\t\ttitle: filename,\n\t\t\t\tcaption: '',\n\t\t\t\tposter: '',\n\t\t\t\tstarts: undefined,\n\t\t\t\tembedlink: '',\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction onUploadError(message) {\n\t\tcreateErrorNotice(message, { type: 'snackbar' });\n\t}\n\n\tconst placeholder = (content) => {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\tclassName=\"block-editor-media-placeholder\"\n\t\t\t\twithIllustration={true}\n\t\t\t\ticon={icon}\n\t\t\t\tlabel={__( 'Videopack Video', 'video-embed-thumbnail-generator' )}\n\t\t\t\tinstructions={__(\n\t\t\t\t\t'Upload a video file, pick one from your media library, or add one with a URL.'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{content}\n\t\t\t</Placeholder>\n\t\t);\n\t};\n\n\tif (!src && !id) {\n\t\treturn (\n\t\t\t<div {...blockProps}>\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\ticon={<BlockIcon icon={icon} />}\n\t\t\t\t\tonSelect={onSelectVideo}\n\t\t\t\t\tonSelectURL={onSelectURL}\n\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\t\tvalue={attributes}\n\t\t\t\t\tonError={onUploadError}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls group=\"other\">\n\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\tmediaId={id}\n\t\t\t\t\tmediaURL={src}\n\t\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\t\taccept=\"video/*\"\n\t\t\t\t\tonSelect={onSelectVideo}\n\t\t\t\t\tonSelectURL={onSelectURL}\n\t\t\t\t\tonError={onUploadError}\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t\t<SingleVideoBlock\n\t\t\t\tsetAttributes={setAttributes}\n\t\t\t\tattributes={attributes}\n\t\t\t\toptions={options}\n\t\t\t\tisSelected={isSelected}\n\t\t\t\texternalSourceGroups={externalSourceGroups}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default Edit;\n","/**\n * The save function defines the way in which the different attributes should\n * be combined into the final markup, which is then serialized by the block\n * editor into `post_content`.\n *\n * @see https://developer.wordpress.org/block-editor/developers/block-api/block-edit-save/#save\n *\n * @param {Object} props            The properties passed to the component.\n * @param {Object} props.attributes The block attributes.\n * @return {WPElement} Element to render.\n */\nexport default function save({ attributes }) {\n\t// Returning null because this is a dynamic block.\n\t// The view is rendered on the server via a render_callback in PHP.\n\treturn null;\n}\n","/* global videopack_config */\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tPanelBody,\n\tPanelRow,\n\tSpinner,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport './additional-formats.scss';\nimport EncodeFormatStatus from './EncodeFormatStatus';\nimport {\n\tgetVideoFormats,\n\tenqueueJob,\n\tassignFormat,\n\tdeleteFile,\n\tdeleteJob,\n} from '../../utils/utils';\n\nconst AdditionalFormats = ({ attributes, options = {} }) => {\n\tconst { id, src } = attributes;\n\tconst { ffmpeg_exists } = options;\n\tconst [videoFormats, setVideoFormats] = useState({});\n\tconst [encodeMessage, setEncodeMessage] = useState();\n\tconst [itemToDelete, setItemToDelete] = useState(null); // { type: 'file'/'job', formatId: string, jobId?: int, id?: int, name?: string }\n\tconst [deleteInProgress, setDeleteInProgress] = useState(null); // Stores formatId or jobId being deleted\n\tconst [isConfirmOpen, setIsConfirmOpen] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [isEncoding, setIsEncoding] = useState(false);\n\tconst progressTimerRef = useRef(null);\n\n\tconst updateVideoFormats = (response) => {\n\t\tsetVideoFormats((currentVideoFormats) => {\n\t\t\tif (response && typeof response === 'object') {\n\t\t\t\tconst newFormats = { ...response };\n\t\t\t\tObject.keys(newFormats).forEach((key) => {\n\t\t\t\t\tconst newFormat = newFormats[key];\n\t\t\t\t\tconst oldFormat = currentVideoFormats?.[key];\n\n\t\t\t\t\t// Preserve the existing 'checked' state to prevent UI flicker on poll refresh.\n\t\t\t\t\tnewFormat.checked = oldFormat?.checked || false;\n\n\t\t\t\t\t// If the format is encoding, merge progress data carefully.\n\t\t\t\t\tif (newFormat.encoding_now && newFormat.progress) {\n\t\t\t\t\t\t// If there's old progress data, merge it to prevent flashes of 0%.\n\t\t\t\t\t\tif (oldFormat?.progress) {\n\t\t\t\t\t\t\tnewFormat.progress = {\n\t\t\t\t\t\t\t\t...oldFormat.progress,\n\t\t\t\t\t\t\t\t...newFormat.progress,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If no old progress, ensure we don't start with a negative percent.\n\t\t\t\t\t\t\tnewFormat.progress.percent =\n\t\t\t\t\t\t\t\tnewFormat.progress.percent > 0\n\t\t\t\t\t\t\t\t\t? newFormat.progress.percent\n\t\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Only update state if the formats have actually changed.\n\t\t\t\tif (\n\t\t\t\t\tJSON.stringify(currentVideoFormats) !==\n\t\t\t\t\tJSON.stringify(newFormats)\n\t\t\t\t) {\n\t\t\t\t\treturn newFormats;\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tJSON.stringify(currentVideoFormats) !== JSON.stringify(response)\n\t\t\t) {\n\t\t\t\t// Fallback for non-object responses\n\t\t\t\treturn response;\n\t\t\t}\n\t\t\treturn currentVideoFormats;\n\t\t});\n\t};\n\n\tconst fetchVideoFormats = async () => {\n\t\tif (!id) {\n\t\t\treturn;\n\t\t} // Don't fetch if there's no ID.\n\t\ttry {\n\t\t\tconst formats = await getVideoFormats(id);\n\t\t\tupdateVideoFormats(formats);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error fetching video formats:', error);\n\t\t}\n\t};\n\n\tconst pollVideoFormats = async () => {\n\t\tif (src && id) {\n\t\t\ttry {\n\t\t\t\tconst formats = await getVideoFormats(id);\n\t\t\t\tupdateVideoFormats(formats);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error polling video formats:', error);\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchVideoFormats();\n\t}, [id]); // Fetch formats when the attachment ID changes\n\n\tconst siteSettings = useSelect((select) => {\n\t\treturn select('core').getSite();\n\t}, []);\n\n\tconst shouldPoll = (formats) => {\n\t\tif (!formats) {\n\t\t\treturn false;\n\t\t}\n\t\t// Poll only if at least one format is still in a state that requires updates.\n\t\treturn Object.values(formats).some(\n\t\t\t(format) =>\n\t\t\t\tformat.status === 'queued' ||\n\t\t\t\tformat.status === 'encoding' ||\n\t\t\t\tformat.status === 'processing' ||\n\t\t\t\tformat.status === 'needs_insert'\n\t\t);\n\t};\n\n\tconst incrementEncodeProgress = () => {\n\t\tsetVideoFormats((currentVideoFormats) => {\n\t\t\tif (!currentVideoFormats || !isEncoding) {\n\t\t\t\treturn currentVideoFormats;\n\t\t\t}\n\n\t\t\tconst updatedVideoFormats = { ...currentVideoFormats };\n\t\t\tObject.keys(updatedVideoFormats).forEach((key) => {\n\t\t\t\tconst format = updatedVideoFormats[key];\n\t\t\t\tif (format.encoding_now && format.progress) {\n\t\t\t\t\tconst elapsed =\n\t\t\t\t\t\tnew Date().getTime() / 1000 - format.started;\n\t\t\t\t\tlet percent = format.progress.percent || 0;\n\t\t\t\t\tlet remaining = null;\n\n\t\t\t\t\t// Only calculate remaining time if video_duration is available.\n\t\t\t\t\tif (format.video_duration) {\n\t\t\t\t\t\tconst totalDurationInSeconds =\n\t\t\t\t\t\t\tformat.video_duration / 1000000;\n\t\t\t\t\t\tconst speedMatch = format.progress.speed\n\t\t\t\t\t\t\t? String(format.progress.speed).match(/(\\d*\\.?\\d+)/)\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\tconst speed = speedMatch\n\t\t\t\t\t\t\t? parseFloat(speedMatch[0])\n\t\t\t\t\t\t\t: 0;\n\n\t\t\t\t\t\t// Increment percent based on speed. This function runs every second.\n\t\t\t\t\t\tif (speed > 0) {\n\t\t\t\t\t\t\tconst increment =\n\t\t\t\t\t\t\t\t(1 / totalDurationInSeconds) * 100 * speed;\n\t\t\t\t\t\t\tpercent += increment;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Calculate remaining time based on current percent and speed\n\t\t\t\t\t\tif (percent > 0 && speed > 0) {\n\t\t\t\t\t\t\tconst remainingPercent = 100 - percent;\n\t\t\t\t\t\t\tremaining =\n\t\t\t\t\t\t\t\t(totalDurationInSeconds *\n\t\t\t\t\t\t\t\t\t(remainingPercent / 100)) /\n\t\t\t\t\t\t\t\tspeed;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tremaining = totalDurationInSeconds - elapsed;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clamp values to be within expected ranges.\n\t\t\t\t\tpercent = Math.min(100, Math.max(0, percent));\n\t\t\t\t\tremaining =\n\t\t\t\t\t\tremaining !== null ? Math.max(0, remaining) : null;\n\n\t\t\t\t\tupdatedVideoFormats[key] = {\n\t\t\t\t\t\t...format,\n\t\t\t\t\t\tprogress: {\n\t\t\t\t\t\t\t...format.progress,\n\t\t\t\t\t\t\telapsed,\n\t\t\t\t\t\t\tremaining,\n\t\t\t\t\t\t\tpercent,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn updatedVideoFormats;\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tsetIsEncoding(shouldPoll(videoFormats));\n\t}, [videoFormats]);\n\n\tuseEffect(() => {\n\t\tlet pollTimer = null;\n\t\t// Manage progress timer based on encoding state\n\t\tif (isEncoding) {\n\t\t\t// Start polling immediately and then every 5 seconds\n\t\t\tpollVideoFormats(); // Initial poll\n\t\t\tpollTimer = setInterval(pollVideoFormats, 5000);\n\n\t\t\tif (progressTimerRef.current === null) {\n\t\t\t\tprogressTimerRef.current = setInterval(\n\t\t\t\t\tincrementEncodeProgress,\n\t\t\t\t\t1000\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t// Clear all timers if not encoding\n\t\t\tclearInterval(progressTimerRef.current);\n\t\t\tprogressTimerRef.current = null;\n\t\t\tclearInterval(pollTimer);\n\t\t\tpollTimer = null;\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (progressTimerRef.current !== null) {\n\t\t\t\tclearInterval(progressTimerRef.current);\n\t\t\t\tprogressTimerRef.current = null;\n\t\t\t}\n\t\t\tif (pollTimer !== null) {\n\t\t\t\tclearInterval(pollTimer);\n\t\t\t\tpollTimer = null;\n\t\t\t}\n\t\t};\n\t}, [isEncoding]); // Depend on isEncoding state\n\n\tconst handleFormatCheckbox = (event, formatId) => {\n\t\tsetVideoFormats((prevVideoFormats) => {\n\t\t\tconst updatedFormats = { ...prevVideoFormats };\n\t\t\tif (updatedFormats[formatId]) {\n\t\t\t\tupdatedFormats[formatId].checked = event;\n\t\t\t}\n\t\t\treturn updatedFormats;\n\t\t});\n\t\t// Note: Checkbox state is now purely UI. Saving to DB happens on \"Encode\" button click.\n\t};\n\n\tconst handleEnqueue = async () => {\n\t\tif (!videopack_config) {\n\t\t\treturn <Spinner />;\n\t\t}\n\n\t\tsetIsLoading(true);\n\n\t\t// Get list of format IDs that are checked and available\n\t\tconst formatsToEncode = Object.entries(videoFormats)\n\t\t\t.filter(\n\t\t\t\t([key, value]) =>\n\t\t\t\t\tvalue.checked &&\n\t\t\t\t\tvalue.status !== 'queued' &&\n\t\t\t\t\tvalue.status !== 'processing' &&\n\t\t\t\t\tvalue.status !== 'completed'\n\t\t\t)\n\t\t\t.reduce((acc, [key, value]) => {\n\t\t\t\tacc[key] = true; // Backend expects an object { format_id: true, ... }\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\n\t\ttry {\n\t\t\tconst response = await enqueueJob(id, src, formatsToEncode);\n\t\t\tconst queueMessage = () => {\n\t\t\t\tconst queueList = (() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tresponse?.encode_list &&\n\t\t\t\t\t\tArray.isArray(response.encode_list) &&\n\t\t\t\t\t\tresponse.encode_list.length > 0\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn new Intl.ListFormat(\n\t\t\t\t\t\t\tsiteSettings?.language\n\t\t\t\t\t\t\t\t? siteSettings.language.replace('_', '-')\n\t\t\t\t\t\t\t\t: 'en-US',\n\t\t\t\t\t\t\t{ style: 'long', type: 'conjunction' }\n\t\t\t\t\t\t).format(response.encode_list);\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t})();\n\n\t\t\t\tif (!queueList) {\n\t\t\t\t\tif (response?.log?.length > 0) {\n\t\t\t\t\t\treturn response.log.join(' ');\n\t\t\t\t\t}\n\t\t\t\t\treturn __( 'No formats were added to the queue.', 'video-embed-thumbnail-generator' );\n\t\t\t\t}\n\n\t\t\t\tconst queuePosition = response?.new_queue_position;\n\n\t\t\t\treturn sprintf(\n\t\t\t\t\t/* translators: %1$s is a list of video formats. %2$s is a number */\n\t\t\t\t\t__( '%1$s added to queue in position %2$s.', 'video-embed-thumbnail-generator' ),\n\t\t\t\t\tqueueList,\n\t\t\t\t\tqueuePosition\n\t\t\t\t);\n\t\t\t};\n\t\t\tsetEncodeMessage(queueMessage());\n\t\t\tfetchVideoFormats(); // Re-fetch to update statuses\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\t// Use the detailed error messages from the server if available\n\t\t\tconst errorMessage = error?.data?.details\n\t\t\t\t? error.data.details.join(', ')\n\t\t\t\t: error.message;\n\t\t\t/* translators: %s is an error message */\n\t\t\tsetEncodeMessage(sprintf(__( 'Error: %s', 'video-embed-thumbnail-generator' ), errorMessage));\n\t\t\tfetchVideoFormats(); // Re-fetch to ensure UI is consistent\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\tconst onSelectFormat = (formatId) => async (media) => {\n\t\tif (!media || !media.id || !formatId) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsLoading(true);\n\n\t\ttry {\n\t\t\tawait assignFormat(media.id, formatId, id);\n\t\t\tsetEncodeMessage(__( 'Video format assigned successfully.', 'video-embed-thumbnail-generator' ));\n\t\t\tfetchVideoFormats(); // Refresh the list\n\t\t} catch (error) {\n\t\t\tconsole.error('Error assigning video format:', error);\n\t\t\tsetEncodeMessage(\n\t\t\t\tsprintf(\n\t\t\t\t\t/* translators: %s is an error message */\n\t\t\t\t\t__( 'Error: %s', 'video-embed-thumbnail-generator' ),\n\t\t\t\t\terror.message\n\t\t\t\t)\n\t\t\t);\n\t\t} finally {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\t// Deletes the actual media file (WP Attachment)\n\tconst handleFileDelete = async (formatId) => {\n\t\tconst formatData = videoFormats?.[formatId];\n\t\tif (!formatData || !formatData.id) {\n\t\t\tsetEncodeMessage(\n\t\t\t\t__( 'Error: Cannot delete file, missing attachment ID.', 'video-embed-thumbnail-generator' )\n\t\t\t);\n\t\t\tconsole.error(\n\t\t\t\t'Cannot delete file: Missing id for format',\n\t\t\t\tformatId\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tsetDeleteInProgress(formatId); // Mark this formatId as being deleted\n\t\ttry {\n\t\t\tawait deleteFile(formatData.id);\n\t\t\tsetEncodeMessage(__( 'File deleted successfully.', 'video-embed-thumbnail-generator' ));\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status from backend\n\t\t} catch (error) {\n\t\t\tconsole.error('File delete failed:', error);\n\t\t\tsetEncodeMessage(\n\t\t\t\t/* translators: %s is an error message */\n\t\t\t\tsprintf(__( 'Error deleting file: %s', 'video-embed-thumbnail-generator' ), error.message)\n\t\t\t);\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t} finally {\n\t\t\tsetDeleteInProgress(null);\n\t\t}\n\t};\n\n\t// Deletes/Cancels a queue job\n\tconst handleJobDelete = async (jobId) => {\n\t\tif (!jobId) {\n\t\t\tsetEncodeMessage(__( 'Error: Cannot delete job, missing job ID.', 'video-embed-thumbnail-generator' ));\n\t\t\tconsole.error('Cannot delete job: Missing job ID');\n\t\t\treturn;\n\t\t}\n\t\tsetDeleteInProgress(jobId); // Mark this jobId as being deleted\n\t\ttry {\n\t\t\tawait deleteJob(jobId);\n\t\t\tsetEncodeMessage(__( 'Job cancelled/deleted successfully.', 'video-embed-thumbnail-generator' ));\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t} catch (error) {\n\t\t\tconsole.error('Job delete failed:', error);\n\t\t\tsetEncodeMessage(\n\t\t\t\t/* translators: %s is an error message */\n\t\t\t\tsprintf(__( 'Error deleting job: %s', 'video-embed-thumbnail-generator' ), error.message)\n\t\t\t);\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t} finally {\n\t\t\tsetDeleteInProgress(null);\n\t\t}\n\t};\n\n\tconst openConfirmDialog = (type, formatId) => {\n\t\tconst formatData = videoFormats?.[formatId];\n\t\tif (!formatData) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetItemToDelete({\n\t\t\ttype, // 'file' or 'job'\n\t\t\tformatId,\n\t\t\tjobId: formatData.job_id,\n\t\t\tid: formatData.id,\n\t\t\tname: formatData.name,\n\t\t});\n\t\tsetIsConfirmOpen(true);\n\t};\n\n\tconst handleConfirm = () => {\n\t\tsetIsConfirmOpen(false);\n\t\tif (itemToDelete) {\n\t\t\tif (itemToDelete.type === 'file' && itemToDelete.id) {\n\t\t\t\thandleFileDelete(itemToDelete.formatId);\n\t\t\t} else if (itemToDelete.type === 'job' && itemToDelete.jobId) {\n\t\t\t\thandleJobDelete(itemToDelete.jobId);\n\t\t\t}\n\t\t}\n\t\tsetItemToDelete(null);\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetItemToDelete(null);\n\t\tsetIsConfirmOpen(false);\n\t};\n\n\tconst somethingToEncode = () => {\n\t\tif (videoFormats) {\n\t\t\t// Check if any format is checked AND available AND not already in a terminal/pending state\n\t\t\treturn Object.values(videoFormats).some(\n\t\t\t\t(obj) =>\n\t\t\t\t\tobj.checked &&\n\t\t\t\t\tobj.status !== 'queued' &&\n\t\t\t\t\tobj.status !== 'processing' &&\n\t\t\t\t\tobj.status !== 'completed' &&\n\t\t\t\t\tobj.status !== 'pending_replacement'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst encodeButtonTitle = () => {\n\t\tif (somethingToEncode()) {\n\t\t\treturn isLoading ? __( 'Loading', 'video-embed-thumbnail-generator' ) : __( 'Encode selected formats', 'video-embed-thumbnail-generator' );\n\t\t}\n\n\t\treturn __( 'Select formats to encode', 'video-embed-thumbnail-generator' );\n\t};\n\n\tconst isEncodeButtonDisabled =\n\t\tisLoading || ffmpeg_exists !== true || !somethingToEncode();\n\n\tconst confirmDialogMessage = () => {\n\t\tif (!itemToDelete) {\n\t\t\treturn '';\n\t\t}\n\t\tif (itemToDelete.type === 'file') {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s is the name of a video format (eg: H264 MP4 HD (720p) ) */\n\t\t\t\t__(\n\t\t\t\t\t'You are about to permanently delete the encoded %s video file from your site. This action cannot be undone.'\n\t\t\t\t),\n\t\t\t\titemToDelete.name\n\t\t\t);\n\t\t}\n\t\tif (itemToDelete.type === 'job') {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s is the name of a video format (eg: H264 MP4 HD (720p) ) */\n\t\t\t\t__(\n\t\t\t\t\t'You are about to permanently delete the encoding job for the %s video. This will also delete the encoded video file if it exists (if created by this job and not yet a separate attachment). This action cannot be undone.'\n\t\t\t\t),\n\t\t\t\titemToDelete.name\n\t\t\t);\n\t\t}\n\t};\n\n\tconst canUploadFiles = useSelect(\n\t\t(select) => select(coreStore).canUser('create', 'media', id),\n\t\t[id]\n\t);\n\n\tconst groupedFormats = Object.values(videoFormats).reduce((acc, format) => {\n\t\tif (!format.codec || !format.codec.id) {\n\t\t\treturn acc;\n\t\t}\n\t\tconst codecId = format.codec.id;\n\t\tif (!acc[codecId]) {\n\t\t\tacc[codecId] = {\n\t\t\t\tname: format.codec.name,\n\t\t\t\tformats: [],\n\t\t\t};\n\t\t}\n\t\tacc[codecId].formats.push(format);\n\t\t// sort formats by height\n\t\tacc[codecId].formats.sort(\n\t\t\t(a, b) => b.resolution.height - a.resolution.height\n\t\t);\n\t\treturn acc;\n\t}, {});\n\n\treturn (\n\t\t<>\n\t\t\t<PanelBody title={__( 'Additional Formats', 'video-embed-thumbnail-generator' )}>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t{videoFormats ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\t\tclassName={`videopack-formats-list${\n\t\t\t\t\t\t\t\t\tffmpeg_exists === true ? '' : ' no-ffmpeg'\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{Object.keys(groupedFormats).map((codecId) => {\n\t\t\t\t\t\t\t\t\tconst codecGroup = groupedFormats[codecId];\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\toptions.encode[codecId]?.enabled !== true\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li key={codecId}>\n\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"videopack-codec-name\">\n\t\t\t\t\t\t\t\t\t\t\t\t{codecGroup.name}\n\t\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t{codecGroup.formats.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(formatData) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst formatId =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatData.format_id;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EncodeFormatStatus\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={formatId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatId={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatData={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatData\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tffmpegExists={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tffmpeg_exists\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCheckboxChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleFormatCheckbox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelectFormat={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelectFormat\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDeleteFile={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topenConfirmDialog(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'file',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCancelJob={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topenConfirmDialog(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'job',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteInProgress={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<ConfirmDialog\n\t\t\t\t\t\t\t\tisOpen={isConfirmOpen}\n\t\t\t\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t\t\t\t\tonCancel={handleCancel}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{confirmDialogMessage()}\n\t\t\t\t\t\t\t</ConfirmDialog>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</PanelRow>\n\t\t\t\t{ffmpeg_exists === true && videoFormats && canUploadFiles && (\n\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={handleEnqueue}\n\t\t\t\t\t\t\ttitle={encodeButtonTitle()}\n\t\t\t\t\t\t\ttext={__( 'Encode', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\tdisabled={isEncodeButtonDisabled}\n\t\t\t\t\t\t></Button>\n\t\t\t\t\t\t{isLoading && <Spinner />}\n\t\t\t\t\t\t{encodeMessage && (\n\t\t\t\t\t\t\t<span className=\"videopack-encode-message\">\n\t\t\t\t\t\t\t\t{encodeMessage}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</PanelRow>\n\t\t\t\t)}\n\t\t\t</PanelBody>\n\t\t</>\n\t);\n};\n\nexport default AdditionalFormats;\n","import { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tCheckboxControl,\n\tSpinner,\n\t__experimentalDivider as Divider,\n} from '@wordpress/components';\nimport { MediaUpload } from '@wordpress/media-utils';\nimport EncodeProgress from './EncodeProgress';\n\nconst EncodeFormatStatus = ({\n\tformatId,\n\tformatData,\n\tffmpegExists,\n\tonCheckboxChange,\n\tonSelectFormat,\n\tonDeleteFile,\n\tonCancelJob,\n\tdeleteInProgress,\n}) => {\n\tif (!formatData) {\n\t\treturn <Spinner />;\n\t}\n\n\tconst getCheckboxCheckedState = (data) => {\n\t\treturn data.checked || data.status === 'queued';\n\t};\n\n\tconst getCheckboxDisabledState = (data) => {\n\t\treturn (\n\t\t\tdata.exists ||\n\t\t\tdata.status === 'queued' ||\n\t\t\tdata.status === 'encoding' ||\n\t\t\tdata.status === 'processing' ||\n\t\t\tdata.status === 'completed'\n\t\t);\n\t};\n\n\treturn (\n\t\t<li key={formatId}>\n\t\t\t{ffmpegExists === true ? (\n\t\t\t\t<CheckboxControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"videopack-format\"\n\t\t\t\t\tlabel={formatData.label}\n\t\t\t\t\tchecked={getCheckboxCheckedState(formatData)}\n\t\t\t\t\tdisabled={getCheckboxDisabledState(formatData)}\n\t\t\t\t\tonChange={(event) => onCheckboxChange(event, formatId)}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<span className=\"videopack-format\">{formatData.label}</span>\n\t\t\t)}\n\n\t\t\t{formatData.status !== 'not_encoded' && (\n\t\t\t\t<span className=\"videopack-format-status\">\n\t\t\t\t\t{formatData.status_l10n}\n\t\t\t\t</span>\n\t\t\t)}\n\n\t\t\t{formatData.status === 'not_encoded' && !formatData.was_picked && (\n\t\t\t\t<MediaUpload\n\t\t\t\t\ttitle={__( 'Choose existing file', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\tonSelect={onSelectFormat(formatId)}\n\t\t\t\t\tallowedTypes={['video']}\n\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\tclassName=\"videopack-format-button\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__( 'Select', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{formatData.was_picked && (\n\t\t\t\t<MediaUpload\n\t\t\t\t\ttitle={sprintf(\n\t\t\t\t\t\t/* translators: %s is the label of a video resolution (eg: 720p ) */\n\t\t\t\t\t\t__( 'Replace %s', 'video-embed-thumbnail-generator' ),\n\t\t\t\t\t\tformatData.label\n\t\t\t\t\t)}\n\t\t\t\t\tonSelect={onSelectFormat(formatId)}\n\t\t\t\t\tallowedTypes={['video']}\n\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\tclassName=\"videopack-format-button\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttitle={__( 'Replace file', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__( 'Replace', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{formatData.deletable && formatData.id && (\n\t\t\t\t<Button\n\t\t\t\t\tisBusy={deleteInProgress === formatId}\n\t\t\t\t\tonClick={onDeleteFile}\n\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\ttext={__( 'Delete Permanently', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\tisDestructive\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{(formatData.encoding_now || formatData.status === 'failed') && (\n\t\t\t\t<EncodeProgress\n\t\t\t\t\tformatData={formatData}\n\t\t\t\t\tonCancelJob={onCancelJob}\n\t\t\t\t\tdeleteInProgress={deleteInProgress}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Divider />\n\t\t</li>\n\t);\n};\n\nexport default EncodeFormatStatus;\n","import { __, sprintf } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\n\nconst EncodeProgress = ({ formatData, onCancelJob, deleteInProgress }) => {\n\tconst convertToTimecode = (time) => {\n\t\tif (time === null || time === undefined || isNaN(time)) {\n\t\t\treturn '--:--';\n\t\t}\n\t\tconst padZero = (num) => Math.floor(num).toString().padStart(2, '0');\n\n\t\tconst h = Math.floor(time / 3600);\n\t\tconst m = Math.floor((time % 3600) / 60);\n\t\tconst s = Math.floor(time % 60);\n\n\t\tconst hh = h > 0 ? padZero(h) + ':' : '';\n\t\tconst mm = padZero(m);\n\t\tconst ss = padZero(s);\n\n\t\treturn hh + mm + ':' + ss;\n\t};\n\n\tif (formatData?.encoding_now && formatData?.progress) {\n\t\tconst percent = Math.round(formatData.progress.percent);\n\t\tconst percentText = sprintf('%d%%', percent);\n\n\t\treturn (\n\t\t\t<div className=\"videopack-encode-progress\">\n\t\t\t\t<div className=\"videopack-meter\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"videopack-meter-bar\"\n\t\t\t\t\t\tstyle={{ width: percentText }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"videopack-meter-text\">\n\t\t\t\t\t\t\t{percentText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{formatData.job_id && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={onCancelJob}\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tisBusy={deleteInProgress === formatData.job_id}\n\t\t\t\t\t>\n\t\t\t\t\t\t{__( 'Cancel', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t\t<div className=\"videopack-encode-progress-small-text\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{__( 'Elapsed:', 'video-embed-thumbnail-generator' ) +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tconvertToTimecode(formatData.progress.elapsed)}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{__( 'Remaining:', 'video-embed-thumbnail-generator' ) +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tconvertToTimecode(formatData.progress.remaining)}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>{__( 'fps:', 'video-embed-thumbnail-generator' ) + ' ' + formatData.progress.fps}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (formatData?.status === 'failed' && formatData?.error_message) {\n\t\treturn (\n\t\t\t<div className=\"videopack-encode-error\">\n\t\t\t\t{sprintf(__( 'Error: %s', 'video-embed-thumbnail-generator' ), formatData.error_message)}\n\t\t\t\t{formatData.job_id && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() => onCancelJob(formatData.job_id)}\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\ttext={__( 'Delete Job', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tisBusy={deleteInProgress === formatData.job_id}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n\nexport default EncodeProgress;\n","/* global Image, videopack_config */\n\nimport {\n\tBaseControl,\n\tButton,\n\tDashicon,\n\tIcon,\n\tPanelBody,\n\tRangeControl,\n\tSpinner,\n\tTextControl,\n} from '@wordpress/components';\nimport { useCallback, useRef, useEffect, useState } from '@wordpress/element';\nimport { MediaUpload } from '@wordpress/media-utils';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tsaveAllThumbnails,\n\tsetPosterImage,\n\tgenerateThumbnail,\n\tcreateThumbnailFromCanvas,\n} from '../../utils/utils';\nimport {\n\tcaptureVideoFrame,\n\tcalculateTimecodes,\n} from '../../utils/video-capture';\n\nimport { chevronUp, chevronDown } from '@wordpress/icons';\nimport './Thumbnails.scss';\n\nconst Thumbnails = ({\n\tsetAttributes,\n\tattributes,\n\tvideoData, // Changed from attachment\n\toptions = {},\n}) => {\n\tconst { id, src, poster, poster_id, isExternal } = attributes;\n\tconst total_thumbnails =\n\t\tattributes.total_thumbnails ||\n\t\tvideoData?.record?.total_thumbnails ||\n\t\toptions.total_thumbnails;\n\tconst thumbVideoPanel = useRef();\n\tconst videoRef = useRef();\n\tconst posterImageButton = useRef();\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [isOpened, setIsOpened] = useState(false);\n\tconst [currentTime, setCurrentTime] = useState(false);\n\tconst [thumbChoices, setThumbChoices] = useState([]);\n\tconst [isSaving, setIsSaving] = useState(false);\n\n\tconst VIDEO_POSTER_ALLOWED_MEDIA_TYPES = ['image'];\n\n\tuseEffect(() => {\n\t\tif (window.mejs && window.mejs.players && poster) {\n\t\t\t// Find the MediaElement.js player within the media modal\n\t\t\tconst mejsContainer = document.querySelector(\n\t\t\t\t'.media-modal .mejs-container, .wp_attachment_holder .mejs-container'\n\t\t\t);\n\t\t\tif (mejsContainer) {\n\t\t\t\tconst mejsId = mejsContainer.id;\n\t\t\t\tif (mejsId && window.mejs.players[mejsId]) {\n\t\t\t\t\tconst player = window.mejs.players[mejsId];\n\t\t\t\t\tplayer.setPoster(poster);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [poster]);\n\n\tfunction onSelectPoster(image) {\n\t\tsetAttributes({\n\t\t\t...attributes,\n\t\t\tposter: image.url,\n\t\t\tposter_id: Number(image.id),\n\t\t});\n\t}\n\n\tfunction onRemovePoster() {\n\t\tsetAttributes({ ...attributes, poster: undefined });\n\n\t\t// Move focus back to the Media Upload button.\n\t\tposterImageButton.current.focus();\n\t}\n\n\tconst handleGenerate = async (type = 'generate') => {\n\t\tsetIsSaving(true);\n\t\tconst ffmpegExists = videopack_config.ffmpeg_exists;\n\t\tconst browserThumbnailsEnabled = videopack_config.browser_thumbnails;\n\n\t\tif (!browserThumbnailsEnabled && ffmpegExists) {\n\t\t\t// Browser thumbnails explicitly disabled, use FFmpeg directly\n\t\t\tconst newThumbImages = [];\n\t\t\tfor (let i = 1; i <= Number(total_thumbnails); i++) {\n\t\t\t\tconst response = await generateThumb(i, type);\n\t\t\t\tconst thumb = {\n\t\t\t\t\tsrc: response.real_thumb_url,\n\t\t\t\t\ttype: 'ffmpeg',\n\t\t\t\t};\n\t\t\t\tnewThumbImages.push(thumb);\n\t\t\t\tsetThumbChoices([...newThumbImages]); // Update incrementally\n\t\t\t}\n\t\t\tsetIsSaving(false);\n\t\t} else {\n\t\t\t// Attempt browser-based generation\n\t\t\tgenerateThumbCanvases(type);\n\t\t}\n\t};\n\n\tconst generateThumbCanvases = useCallback(async (type) => {\n\t\tconst thumbsInt = Number(total_thumbnails);\n\t\tconst newThumbCanvases = [];\n\t\tconst ffmpegExists = videopack_config.ffmpeg_exists;\n\n\t\tconst timePoints = calculateTimecodes(\n\t\t\tvideoRef.current.duration,\n\t\t\tthumbsInt,\n\t\t\t{ random: type === 'random' }\n\t\t);\n\n\t\tfor (const time of timePoints) {\n\t\t\tlet thumb;\n\t\t\ttry {\n\t\t\t\tconst canvas = await captureVideoFrame(\n\t\t\t\t\tvideoRef.current,\n\t\t\t\t\ttime,\n\t\t\t\t\toptions?.ffmpeg_thumb_watermark\n\t\t\t\t);\n\t\t\t\tthumb = {\n\t\t\t\t\tsrc: canvas.toDataURL(),\n\t\t\t\t\ttype: 'canvas',\n\t\t\t\t\tcanvasObject: canvas,\n\t\t\t\t};\n\t\t\t\tnewThumbCanvases.push(thumb);\n\t\t\t\tsetThumbChoices([...newThumbCanvases]); // Update incrementally\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error generating canvas thumbnail:', error);\n\t\t\t\tif (ffmpegExists) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await generateThumb(\n\t\t\t\t\t\t\tnewThumbCanvases.length + 1,\n\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthumb = {\n\t\t\t\t\t\t\tsrc: response.real_thumb_url,\n\t\t\t\t\t\t\ttype: 'ffmpeg'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewThumbCanvases.push(thumb);\n\t\t\t\t\t\tsetThumbChoices([...newThumbCanvases]);\n\t\t\t\t\t} catch (ffmpegError) {}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetIsSaving(false);\n\t});\n\n\t// function to toggle video playback\n\tconst togglePlayback = () => {\n\t\tif (videoRef.current?.paused) {\n\t\t\tvideoRef.current.play();\n\t\t\tsetIsPlaying(true);\n\t\t} else {\n\t\t\tvideoRef.current?.pause();\n\t\t\tsetIsPlaying(false);\n\t\t}\n\t};\n\n\tconst pauseVideo = () => {\n\t\tvideoRef.current.pause();\n\t\tsetIsPlaying(false);\n\t};\n\n\tconst playVideo = () => {\n\t\tvideoRef.current.play();\n\t\tsetIsPlaying(true);\n\t};\n\n\t// function to handle slider changes\n\tconst handleSliderChange = (value) => {\n\t\tvideoRef.current.currentTime = value;\n\t\tsetCurrentTime(value);\n\t};\n\n\tuseEffect(() => {\n\t\tconst handleTimeUpdate = () => {\n\t\t\tsetCurrentTime(videoRef.current.currentTime); // update currentTime state variable\n\t\t};\n\n\t\tvideoRef.current?.addEventListener('timeupdate', handleTimeUpdate);\n\t\treturn () => {\n\t\t\tvideoRef.current?.removeEventListener(\n\t\t\t\t'timeupdate',\n\t\t\t\thandleTimeUpdate\n\t\t\t);\n\t\t};\n\t}, []);\n\n\tconst handleSaveThumbnail = (event, thumb) => {\n\t\tevent.currentTarget.classList.add('saving');\n\t\tsetIsSaving(true);\n\t\tif (thumb.type === 'ffmpeg') {\n\t\t\tsetImgAsPoster(thumb.src);\n\t\t} else {\n\t\t\tsetCanvasAsPoster(thumb.canvasObject);\n\t\t}\n\t};\n\n\tconst handleSaveAllThumbnails = async () => {\n\t\tsetIsSaving(true); // Show spinner for the whole operation\n\t\tconst firstThumbType = thumbChoices[0]?.type; // Assuming all generated thumbs are of the same type\n\n\t\tif (firstThumbType === 'canvas') {\n\t\t\tconst uploadPromises = thumbChoices.map((thumb) => {\n\t\t\t\treturn createThumbnailFromCanvas(thumb.canvasObject, id, src);\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tawait Promise.all(uploadPromises);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error saving all canvas thumbnails:', error);\n\t\t\t}\n\t\t\tsetThumbChoices([]);\n\t\t} else if (firstThumbType === 'ffmpeg') {\n\t\t\t// For FFmpeg thumbnails, send their temporary URLs to the server to be saved\n\t\t\tconst thumbUrls = thumbChoices.map((thumb) => thumb.src);\n\t\t\ttry {\n\t\t\t\tawait saveAllThumbnails(id, thumbUrls);\n\t\t\t\tsetThumbChoices([]); // Clear choices after saving\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error saving all FFmpeg thumbnails:', error);\n\t\t\t}\n\t\t}\n\t\tsetIsSaving(false); // Hide spinner after all operations complete\n\t};\n\n\tconst setCanvasAsPoster = async (canvasObject) => {\n\t\tsetIsSaving(true);\n\t\ttry {\n\t\t\tconst response = await createThumbnailFromCanvas(\n\t\t\t\tcanvasObject,\n\t\t\t\tid,\n\t\t\t\tsrc\n\t\t\t);\n\n\t\t\tsetPosterData(response.thumb_url, response.thumb_id);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error uploading thumbnail:', error);\n\t\t} finally {\n\t\t\tsetIsSaving(false);\n\t\t}\n\t};\n\n\tconst setPosterData = async (new_poster, new_poster_id) => {\n\t\ttry {\n\t\t\tconst metaData = {};\n\t\t\tif (new_poster) {\n\t\t\t\t// Only include if new_poster has a value\n\t\t\t\tmetaData['_kgflashmediaplayer-poster'] = new_poster;\n\t\t\t\tmetaData['_kgflashmediaplayer-poster-id'] =\n\t\t\t\t\tNumber(new_poster_id);\n\t\t\t\tmetaData['_videopack-meta'] = {\n\t\t\t\t\t...videoData?.record?.meta?.['_videopack-meta'],\n\t\t\t\t\tposter: new_poster,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tawait videoData?.edit({\n\t\t\t\tfeatured_media: new_poster_id ? Number(new_poster_id) : null,\n\t\t\t\tmeta: metaData,\n\t\t\t});\n\t\t\tawait videoData?.save();\n\n\t\t\t// Refresh the media library grid to show the updated thumbnail.\n\t\t\tif (wp.media && wp.media.frame) {\n\t\t\t\tif (\n\t\t\t\t\twp.media.frame.content.get() &&\n\t\t\t\t\twp.media.frame.content.get().collection\n\t\t\t\t) {\n\t\t\t\t\tconst collection = wp.media.frame.content.get().collection;\n\t\t\t\t\tcollection.props.set({ ignore: new Date().getTime() });\n\t\t\t\t} else if (wp.media.frame.library) {\n\t\t\t\t\t// Fallback for different states of the media modal.\n\t\t\t\t\twp.media.frame.library.props.set({\n\t\t\t\t\t\tignore: new Date().getTime(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetAttributes({\n\t\t\t\t...attributes,\n\t\t\t\tposter: new_poster,\n\t\t\t\tposter_id: new_poster_id,\n\t\t\t});\n\t\t\tsetThumbChoices([]);\n\t\t\tsetIsSaving(false);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error updating attachment:', error);\n\t\t\tsetIsSaving(false);\n\t\t}\n\t};\n\n\tconst setImgAsPoster = async (thumb_url) => {\n\t\ttry {\n\t\t\tconst response = await setPosterImage(id, thumb_url);\n\t\t\tsetPosterData(response.thumb_url, response.thumb_id);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t};\n\n\tconst generateThumb = async (i, type) => {\n\t\ttry {\n\t\t\tconst response = await generateThumbnail(\n\t\t\t\tsrc,\n\t\t\t\ttotal_thumbnails,\n\t\t\t\ti,\n\t\t\t\tid,\n\t\t\t\ttype\n\t\t\t);\n\n\t\t\treturn response;\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t};\n\n\tconst handleVideoKeyboardControl = (event) => {\n\t\tevent.stopImmediatePropagation();\n\n\t\tswitch (event.code) {\n\t\t\tcase 'Space': // spacebar\n\t\t\t\ttogglePlayback();\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowLeft': // left\n\t\t\t\tpauseVideo();\n\t\t\t\tvideoRef.current.currentTime =\n\t\t\t\t\tvideoRef.current.currentTime - 0.042;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowRight': // right\n\t\t\t\tpauseVideo();\n\t\t\t\tvideoRef.current.currentTime =\n\t\t\t\t\tvideoRef.current.currentTime + 0.042;\n\t\t\t\tbreak;\n\n\t\t\tcase 'KeyJ': //j\n\t\t\t\tif (isPlaying) {\n\t\t\t\t\tvideoRef.current.playbackRate = Math.max(\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tvideoRef.current.playbackRate - 1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'KeyK': // k\n\t\t\t\tpauseVideo();\n\t\t\t\tbreak;\n\n\t\t\tcase 'KeyL': //l\n\t\t\t\tif (isPlaying) {\n\t\t\t\t\tvideoRef.current.playbackRate =\n\t\t\t\t\t\tvideoRef.current.playbackRate + 1;\n\t\t\t\t}\n\t\t\t\tplayVideo();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn; // exit this handler for other keys\n\t\t}\n\t\tevent.preventDefault(); // prevent the default action (scroll / move caret)\n\t};\n\n\tconst handleUseThisFrame = async () => {\n\t\tsetIsSaving(true);\n\t\tconst canvas = await captureVideoFrame(\n\t\t\tvideoRef.current,\n\t\t\tvideoRef.current.currentTime,\n\t\t\toptions?.ffmpeg_thumb_watermark\n\t\t);\n\t\tsetCanvasAsPoster(canvas); // Pass the canvas object directly, index will be null\n\t};\n\n\tconst handleToggleVideoPlayer = (event) => {\n\t\tevent.preventDefault();\n\t\tconst next = !isOpened;\n\t\tsetIsOpened(next);\n\t\tif (next && thumbVideoPanel.current) {\n\t\t\tthumbVideoPanel.current.focus();\n\t\t\tthumbVideoPanel.current.addEventListener(\n\t\t\t\t'keydown',\n\t\t\t\thandleVideoKeyboardControl\n\t\t\t);\n\t\t} else {\n\t\t\tthumbVideoPanel.current.addEventListener(\n\t\t\t\t'keydown',\n\t\t\t\thandleVideoKeyboardControl\n\t\t\t);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"videopack-thumbnail-generator\">\n\t\t\t<PanelBody title={__( 'Thumbnails', 'video-embed-thumbnail-generator' )}>\n\t\t\t\t{poster && (\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"videopack-current-thumbnail\"\n\t\t\t\t\t\tsrc={poster}\n\t\t\t\t\t\talt={__( 'Current Thumbnail', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<BaseControl className=\"editor-video-poster-control\">\n\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t{__( 'Video Thumbnail', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\ttitle={__( 'Select video thumbnail', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\tonSelect={onSelectPoster}\n\t\t\t\t\t\tallowedTypes={VIDEO_POSTER_ALLOWED_MEDIA_TYPES}\n\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t\tref={posterImageButton}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!poster ? __( 'Select', 'video-embed-thumbnail-generator' ) : __( 'Replace', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t{!!poster && (\n\t\t\t\t\t\t<Button onClick={onRemovePoster} variant=\"tertiary\">\n\t\t\t\t\t\t\t{__( 'Remove', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</BaseControl>\n\t\t\t\t<TextControl // This is the UI control for total_thumbnails.\n\t\t\t\t\tvalue={total_thumbnails}\n\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t...attributes,\n\t\t\t\t\t\t\t\ttotal_thumbnails: '',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t...attributes,\n\t\t\t\t\t\t\t\ttotal_thumbnails: Number(value),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tclassName=\"videopack-total-thumbnails\"\n\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={() => handleGenerate('generate')}\n\t\t\t\t\tclassName=\"videopack-generate\"\n\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t>\n\t\t\t\t\t{__( 'Generate', 'video-embed-thumbnail-generator' )}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={() => handleGenerate('random')}\n\t\t\t\t\tclassName=\"videopack-generate\"\n\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t>\n\t\t\t\t\t{__( 'Random', 'video-embed-thumbnail-generator' )}\n\t\t\t\t</Button>\n\t\t\t\t{thumbChoices.length > 0 && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={handleSaveAllThumbnails}\n\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t>\n\t\t\t\t\t\t{__( 'Save All', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t\t{thumbChoices.length > 0 && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`videopack-thumbnail-holder${isSaving ? ' disabled' : ''}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{thumbChoices.map((thumb, index) => (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t'videopack-thumbnail spinner-container'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\t\t\thandleSaveThumbnail(event, thumb, index);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={thumb.src}\n\t\t\t\t\t\t\t\t\talt={`Thumbnail ${index + 1}`}\n\t\t\t\t\t\t\t\t\ttitle={__( 'Save and set thumbnail', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{isSaving && <Spinner />}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div\n\t\t\t\t\tclassName={`components-panel__body videopack-thumb-video ${isOpened ? 'is-opened' : ''}`}\n\t\t\t\t>\n\t\t\t\t\t<h2 className=\"components-panel__body-title\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"components-button components-panel__body-toggle\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonClick={handleToggleVideoPlayer}\n\t\t\t\t\t\t\taria-expanded={isOpened}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span aria-hidden=\"true\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\tclassName=\"components-panel__arrow\"\n\t\t\t\t\t\t\t\t\ticon={isOpened ? chevronUp : chevronDown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{__( 'Choose From Video', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`videopack-thumb-video-panel spinner-container${\n\t\t\t\t\t\t\tisSaving ? ' saving' : ''\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\tref={thumbVideoPanel}\n\t\t\t\t\t>\n\t\t\t\t\t\t<video\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\tref={videoRef}\n\t\t\t\t\t\t\tmuted={true}\n\t\t\t\t\t\t\tpreload=\"metadata\"\n\t\t\t\t\t\t\tonClick={togglePlayback}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"videopack-thumb-video-controls\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"videopack-play-pause\"\n\t\t\t\t\t\t\t\tonClick={togglePlayback}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\tisPlaying\n\t\t\t\t\t\t\t\t\t\t\t? 'controls-pause'\n\t\t\t\t\t\t\t\t\t\t\t: 'controls-play'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{!isNaN(videoRef.current?.duration) && (\n\t\t\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\tmax={videoRef.current.duration}\n\t\t\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t\t\t\tinitialPosition={0}\n\t\t\t\t\t\t\t\t\tvalue={videoRef.current.currentTime}\n\t\t\t\t\t\t\t\t\tonChange={handleSliderChange}\n\t\t\t\t\t\t\t\t\tclassName=\"videopack-thumbvideo-slider\"\n\t\t\t\t\t\t\t\t\ttype=\"slider\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={handleUseThisFrame}\n\t\t\t\t\t\t\tclassName=\"videopack-use-this-frame\"\n\t\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{__( 'Use this frame', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{isSaving && <Spinner />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</PanelBody>\n\t\t</div>\n\t);\n};\n\nexport default Thumbnails;\n","import { _n, sprintf } from '@wordpress/i18n';\n\nconst BelowVideo = ({ attributes }) => {\n\tconst { view_count, caption } = attributes;\n\n\tlet viewStarts = 0;\n\tif ((attributes?.starts && view_count) || caption) {\n\t\tif (attributes?.starts) {\n\t\t\tviewStarts = Number(attributes?.starts);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"videopack-below-video\">\n\t\t\t\t\t{view_count && viewStarts > 0 && (\n\t\t\t\t\t\t<div className=\"viewcount\">\n\t\t\t\t\t\t\t{sprintf(\n\t\t\t\t\t\t\t\t/* translators: %d is number of views */\n\t\t\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t\t\t'%d view',\n\t\t\t\t\t\t\t\t\t'%d views',\n\t\t\t\t\t\t\t\t\tviewStarts,\n\t\t\t\t\t\t\t\t\t'video-embed-thumbnail-generator'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tviewStarts\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{caption && <div className=\"caption\">{caption}</div>}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n\treturn null;\n};\n\nexport default BelowVideo;\n","import { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\n\nconst MetaBar = ({ attributes }) => {\n\tconst {\n\t\tsrc,\n\t\toverlay_title,\n\t\ttitle,\n\t\tembedcode,\n\t\tembeddable,\n\t\tdownloadlink,\n\t\ttwitter_button,\n\t\tfacebook_button,\n\t} = attributes;\n\tconst metaBarItems = [\n\t\toverlay_title,\n\t\tembedcode,\n\t\tdownloadlink,\n\t\ttwitter_button,\n\t\tfacebook_button,\n\t];\n\tconst noTitleMeta = overlay_title ? '' : ' no-title';\n\tconst [shareIsOpen, setShareIsOpen] = useState(false);\n\n\tconst embedItems = () => {\n\t\tif (embeddable && embedcode) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst embedLink = () => {\n\t\tif (attributes?.embedlink) {\n\t\t\treturn String(attributes?.embedlink);\n\t\t}\n\t\treturn '';\n\t};\n\n\tconst EmbedElements = () => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<button\n\t\t\t\t\tclassName={`click-trap${shareIsOpen ? ' is-visible' : ''}`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetShareIsOpen(!shareIsOpen);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclassName={`share-container${\n\t\t\t\t\t\tshareIsOpen ? ' is-visible' : ''\n\t\t\t\t\t}${noTitleMeta}`}\n\t\t\t\t>\n\t\t\t\t\t{embedItems() && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className=\"embedcode-container\">\n\t\t\t\t\t\t\t\t<span className=\"videopack-icons embed\"></span>\n\t\t\t\t\t\t\t\t<span>{__( 'Embed:', 'video-embed-thumbnail-generator' )}</span>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"embedcode\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={embedLink()}\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\t\t\t\t\tevent.target.select();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t};\n\n\tif (metaBarItems.includes(true)) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className={`videopack-meta-bar${noTitleMeta}`}>\n\t\t\t\t\t<span className={'meta-icons'}>\n\t\t\t\t\t\t{embedItems() && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype={'button'}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tshareIsOpen\n\t\t\t\t\t\t\t\t\t\t? 'vjs-icon-cancel'\n\t\t\t\t\t\t\t\t\t\t: 'vjs-icon-share'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetShareIsOpen(!shareIsOpen);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{downloadlink && (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"download-link\"\n\t\t\t\t\t\t\t\thref={src}\n\t\t\t\t\t\t\t\tdownload={true}\n\t\t\t\t\t\t\t\ttitle={__( 'Click to download', 'video-embed-thumbnail-generator' )}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span className=\"videopack-icons download\"></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</span>\n\t\t\t\t\t{overlay_title && <span className=\"title\">{title}</span>}\n\t\t\t\t</div>\n\t\t\t\t{embedItems() && <EmbedElements />}\n\t\t\t</>\n\t\t);\n\t}\n\treturn null;\n};\n\nexport default MetaBar;\n","/* global videojs */\n\nimport { useRef, useEffect } from '@wordpress/element';\n\nexport const VideoJS = (props) => {\n\tconst videoRef = useRef(null);\n\tconst playerRef = useRef(null);\n\tconst { options, skin, onPlay, onPause } = props;\n\tconst previousSkinRef = useRef(skin);\n\n\tuseEffect(() => {\n\t\tlet initTimer;\n\n\t\t// On initial render, wait for sources to be available before initializing.\n\t\tif (!playerRef.current) {\n\t\t\t// Wrap initialization in a timeout to handle React Strict Mode double-mounts.\n\t\t\t// This ensures we don't init a player if the component is immediately unmounted.\n\t\t\tinitTimer = setTimeout(() => {\n\t\t\t\tif (\n\t\t\t\t\t!options ||\n\t\t\t\t\t!options.sources ||\n\t\t\t\t\toptions.sources.length === 0\n\t\t\t\t) {\n\t\t\t\t\treturn; // Don't initialize until sources are ready.\n\t\t\t\t}\n\n\t\t\t\tif (!videoRef.current) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Ensure the container is empty before creating a new player.\n\t\t\t\twhile (videoRef.current.firstChild) {\n\t\t\t\t\tvideoRef.current.removeChild(videoRef.current.firstChild);\n\t\t\t\t}\n\n\t\t\t\tconst videoElement = document.createElement('video');\n\t\t\t\tvideoElement.className = `video-js ${skin || ''} vjs-big-play-centered`;\n\t\t\t\tvideoElement.setAttribute('playsinline', '');\n\n\t\t\t\tvideoRef.current.appendChild(videoElement);\n\n\t\t\t\tplayerRef.current = videojs(videoElement, options, function () {\n\t\t\t\t\tthis.on('play', onPlay);\n\t\t\t\t\tthis.on('pause', onPause);\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t} else {\n\t\t\tconst player = playerRef.current;\n\n\t\t\tif (player && !player.isDisposed()) {\n\t\t\t\tplayer.autoplay(options.autoplay);\n\t\t\t\tplayer.loop(options.loop);\n\t\t\t\tplayer.muted(options.muted);\n\t\t\t\tplayer.volume(options.volume);\n\t\t\t\tplayer.poster(options.poster);\n\t\t\t\tplayer.controls(options.controls);\n\t\t\t\tplayer.playbackRates(\n\t\t\t\t\toptions.playback_rate ? [0.5, 1, 1.25, 1.5, 2] : []\n\t\t\t\t);\n\t\t\t\tplayer.preload(options.preload);\n\n\t\t\t\tif (previousSkinRef.current !== skin) {\n\t\t\t\t\tif (previousSkinRef.current) {\n\t\t\t\t\t\tplayer.removeClass(previousSkinRef.current);\n\t\t\t\t\t}\n\t\t\t\t\tif (skin) {\n\t\t\t\t\t\tplayer.addClass(skin);\n\t\t\t\t\t}\n\t\t\t\t\tpreviousSkinRef.current = skin;\n\t\t\t\t}\n\n\t\t\t\t// Only update src if it has actually changed to prevent reloading\n\t\t\t\tif (options.sources && options.sources.length > 0) {\n\t\t\t\t\tconst currentSrc = player.currentSrc();\n\t\t\t\t\tconst newSrc = options.sources[0].src;\n\t\t\t\t\tif (currentSrc !== newSrc) {\n\t\t\t\t\t\tplayer.src(options.sources);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\tclearTimeout(initTimer);\n\t\t};\n\t}, [options, skin, onPlay, onPause]);\n\n\t// Dispose the player when the component unmounts\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (playerRef.current && !playerRef.current.isDisposed()) {\n\t\t\t\tplayerRef.current.off('play', onPlay);\n\t\t\t\tplayerRef.current.off('pause', onPause);\n\t\t\t\tplayerRef.current.dispose();\n\t\t\t\tplayerRef.current = null;\n\t\t\t}\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\tdata-vjs-player\n\t\t\tref={videoRef}\n\t\t\tstyle={{ width: '100%', height: '100%' }}\n\t\t/>\n\t);\n};\n\nexport default VideoJS;\n","/* global MediaElementPlayer */\n\nimport { useRef, useEffect, useState, useMemo } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport MetaBar from './MetaBar';\nimport VideoJS from './VideoJs';\nimport BelowVideo from './BelowVideo';\nimport './VideoPlayer.scss';\n\n// Make sure to pass isSelected from the block's edit component.\nconst VideoPlayer = ({ attributes, onReady }) => {\n\tconst decodedAttributes = useMemo(\n\t\t() => ({\n\t\t\t...attributes,\n\t\t\ttitle: attributes.title\n\t\t\t\t? decodeEntities(attributes.title)\n\t\t\t\t: attributes.title,\n\t\t}),\n\t\t[attributes]\n\t);\n\n\tconst {\n\t\tembed_method = 'Video.js',\n\t\tautoplay,\n\t\tcontrols,\n\t\tskin,\n\t\tloop,\n\t\tmuted,\n\t\tplaysinline,\n\t\tposter,\n\t\tpreload,\n\t\tsrc,\n\t\twidth,\n\t\theight,\n\t\tstart,\n\t\tpauseothervideos,\n\t\tvolume,\n\t\tendofvideooverlay,\n\t\tauto_res,\n\t\tpixel_ratio,\n\t\tright_click,\n\t\tplayback_rate,\n\t\tfullwidth,\n\t\tsources = [],\n\t\tsource_groups = {},\n\t} = decodedAttributes;\n\n\tconst actualAutoplay = useMemo(() => {\n\t\treturn autoplay && muted;\n\t}, [autoplay, muted]);\n\n\tconst playerRef = useRef(null);\n\tconst wrapperRef = useRef(null);\n\tconst [videoJsOptions, setVideoJsOptions] = useState(null);\n\n\tconst allSources = useMemo(() => {\n\t\tif (Object.keys(source_groups).length > 0) {\n\t\t\treturn Object.values(source_groups).flatMap(\n\t\t\t\t(group) => group.sources\n\t\t\t);\n\t\t}\n\t\treturn sources;\n\t}, [sources, source_groups]);\n\n\tconst renderReady = allSources && allSources.length > 0 && allSources[0].src;\n\n\tconst handlePlay = () => {\n\t\tif (wrapperRef.current) {\n\t\t\twrapperRef.current.classList.remove('meta-bar-visible');\n\t\t}\n\t};\n\n\tconst handlePause = () => {\n\t\tif (wrapperRef.current) {\n\t\t\twrapperRef.current.classList.add('meta-bar-visible');\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (embed_method === 'WordPress Default' && playerRef.current) {\n\t\t\tconst player = new MediaElementPlayer(playerRef.current);\n\t\t\treturn () => {\n\t\t\t\tif (player) {\n\t\t\t\t\tplayer.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}, [embed_method]);\n\n\tuseEffect(() => {\n\t\tif (embed_method === 'Video.js') {\n\t\t\tconst options = {\n\t\t\t\tautoplay: actualAutoplay,\n\t\t\t\tcontrols,\n\t\t\t\tfluid: true,\n\t\t\t\tresponsive: true,\n\t\t\t\tmuted,\n\t\t\t\tpreload,\n\t\t\t\tposter,\n\t\t\t\tloop,\n\t\t\t\tplaysinline,\n\t\t\t\tvolume,\n\t\t\t\tplaybackRates: playback_rate ? [0.5, 1, 1.25, 1.5, 2] : [],\n\t\t\t\tsources: allSources.map((s) => ({\n\t\t\t\t\tsrc: s.src,\n\t\t\t\t\ttype: s.type,\n\t\t\t\t\tresolution: s.resolution,\n\t\t\t\t})),\n\t\t\t};\n\n\t\t\tconst hasResolutions = allSources.some((s) => s.resolution);\n\n\t\t\tif (hasResolutions) {\n\t\t\t\toptions.plugins = {\n\t\t\t\t\t...options.plugins,\n\t\t\t\t\tresolutionSelector: {\n\t\t\t\t\t\tforce_types: ['video/mp4'],\n\t\t\t\t\t\tsource_groups,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tconst defaultResSource = allSources.find((s) => s.default);\n\t\t\t\tif (defaultResSource) {\n\t\t\t\t\toptions.plugins.resolutionSelector.default_res =\n\t\t\t\t\t\tdefaultResSource.resolution;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetVideoJsOptions(options);\n\t\t}\n\t}, [\n\t\tautoplay,\n\t\tcontrols,\n\t\tmuted,\n\t\tpreload,\n\t\tposter,\n\t\tloop,\n\t\tplaysinline,\n\t\tvolume,\n\t\tplayback_rate,\n\t\tJSON.stringify(allSources),\n\t\tJSON.stringify(source_groups),\n\t\tembed_method,\n\t]);\n\n\tconst videoSourceElements = () => {\n\t\treturn allSources.map((source, index) => (\n\t\t\t<source key={index} src={source.src} type={source.type} />\n\t\t));\n\t};\n\n\tconst GenericPlayer = () => (\n\t\t<video\n\t\t\tposter={poster}\n\t\t\tloop={loop}\n\t\t\tautoPlay={actualAutoplay}\n\t\t\tpreload={preload}\n\t\t\tcontrols={controls}\n\t\t\tmuted={muted}\n\t\t\tplaysInline={playsinline}\n\t\t\twidth=\"100%\"\n\t\t\theight=\"100%\"\n\t\t\tclassName={\n\t\t\t\tembed_method === 'WordPress Default'\n\t\t\t\t\t? 'wp-video-shortcode'\n\t\t\t\t\t: null\n\t\t\t}\n\t\t\tref={playerRef}\n\t\t>\n\t\t\t{videoSourceElements()}\n\t\t\t<a href={src}>{src}</a>\n\t\t</video>\n\t);\n\n\tconst WordPressDefaultPlayer = () => (\n\t\t<div className=\"wp-video\">\n\t\t\t<GenericPlayer />\n\t\t</div>\n\t);\n\n\tconst handleVideoPlayerReady = (player) => {\n\t\tplayerRef.current = player;\n\t\tplayer.on('loadedmetadata', () => {\n\t\t\tif (embed_method === 'Video.js') {\n\t\t\t\tonReady(player.el().firstChild);\n\t\t\t} else {\n\t\t\t\tonReady(player);\n\t\t\t}\n\t\t\tif (actualAutoplay) {\n\t\t\t\thandlePlay();\n\t\t\t}\n\t\t});\n\t\tplayer.on('waiting', () => console.log('player is waiting'));\n\t\tplayer.on('dispose', () => console.log('player will dispose'));\n\t};\n\n\tif (!renderReady) {\n\t\treturn null; // Or a loading spinner\n\t}\n\n\treturn (\n\t\t<div className=\"videopack-wrapper meta-bar-visible\" ref={wrapperRef}>\n\t\t\t<div className=\"videopack-player\">\n\t\t\t\t<MetaBar attributes={decodedAttributes} />\n\t\t\t\t{embed_method === 'Video.js' && videoJsOptions && (\n\t\t\t\t\t<VideoJS\n\t\t\t\t\t\toptions={videoJsOptions}\n\t\t\t\t\t\tskin={skin}\n\t\t\t\t\t\tonPlay={handlePlay}\n\t\t\t\t\t\tonPause={handlePause}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{embed_method === 'WordPress Default' && (\n\t\t\t\t\t<WordPressDefaultPlayer />\n\t\t\t\t)}\n\t\t\t\t{embed_method === 'None' && <GenericPlayer />}\n\t\t\t</div>\n\t\t\t<BelowVideo attributes={decodedAttributes} />\n\t\t</div>\n\t);\n};\n\nexport default VideoPlayer;\n","import { __, _x } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { useDebounce } from '@wordpress/compose';\nimport { useCallback, useEffect } from '@wordpress/element';\n\nconst useVideoSettings = (attributes, setAttributes) => {\n\tconst { id, gifmode } = attributes;\n\n\tuseEffect(() => {\n\t\tif (gifmode) {\n\t\t\tsetAttributes({\n\t\t\t\tautoplay: true,\n\t\t\t\tloop: true,\n\t\t\t\tmuted: true,\n\t\t\t\tcontrols: false,\n\t\t\t});\n\t\t}\n\t}, [gifmode]);\n\n\tconst updateAttachmentCallback = useCallback(\n\t\t(key, value) => {\n\t\t\tif (id) {\n\t\t\t\tapiFetch({\n\t\t\t\t\tpath: `/wp/v2/media/${id}`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { [key]: value },\n\t\t\t\t}).catch(() => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(`Failed to update attachment ${id}`);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[id]\n\t);\n\n\tconst updateAttachment = useDebounce(updateAttachmentCallback, 1000);\n\n\tconst handleSettingChange = (key, value) => {\n\t\tsetAttributes({ [key]: value });\n\n\t\tif (id && ('title' === key || 'caption' === key)) {\n\t\t\tupdateAttachment(key, value);\n\t\t}\n\t};\n\n\tconst preloadOptions = [\n\t\t{ value: 'auto', label: __( 'Auto', 'video-embed-thumbnail-generator' ) },\n\t\t{ value: 'metadata', label: __( 'Metadata', 'video-embed-thumbnail-generator' ) },\n\t\t{ value: 'none', label: _x('None', 'Preload value') },\n\t];\n\n\treturn {\n\t\thandleSettingChange,\n\t\tpreloadOptions,\n\t};\n};\n\nexport default useVideoSettings;\n","import apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs, getFilename } from '@wordpress/url';\n\nexport const getQueue = async () => {\n\ttry {\n\t\tconst response = await apiFetch({\n\t\t\tpath: '/videopack/v1/queue',\n\t\t});\n\t\treturn response || [];\n\t} catch (error) {\n\t\tconsole.error('Error fetching queue:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const toggleQueue = async (action) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/queue/control',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { action },\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error toggling queue:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const clearQueue = async (type) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/queue/clear',\n\t\t\tmethod: 'DELETE',\n\t\t\tdata: { type },\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error clearing queue:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const deleteJob = async (jobId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/queue/${jobId}`,\n\t\t\tmethod: 'DELETE',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error deleting job:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const removeJob = async (jobId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/queue/remove/${jobId}`,\n\t\t\tmethod: 'DELETE',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error removing job:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getVideoFormats = async (attachmentId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/formats/${attachmentId}`,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching video formats:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const enqueueJob = async (attachmentId, src, formats) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/queue/${attachmentId}`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\turl: src,\n\t\t\t\tformats,\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error enqueuing job:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const assignFormat = async (mediaId, formatId, parentId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/wp/v2/media/${mediaId}`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tmeta: {\n\t\t\t\t\t'_kgflashmediaplayer-format': formatId,\n\t\t\t\t\t'_kgflashmediaplayer-parent': parentId,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error assigning format:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const deleteFile = async (attachmentId) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/wp/v2/media/${attachmentId}?force=true`,\n\t\t\tmethod: 'DELETE',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error deleting file:', error);\n\t\tthrow error;\n\t}\n};\n\n/**\n * Converts a canvas to a blob and uploads it as a thumbnail.\n *\n * @param {HTMLCanvasElement} canvas       The canvas element to upload.\n * @param {number}            attachmentId The ID of the video attachment.\n * @param {string}            videoSrc     The URL of the video (used for filename).\n * @return {Promise<Object>} The response from the upload endpoint.\n */\nexport const createThumbnailFromCanvas = ( canvas, attachmentId, videoSrc ) => {\n\treturn new Promise( ( resolve, reject ) => {\n\t\tcanvas.toBlob( async ( blob ) => {\n\t\t\tif ( ! blob ) {\n\t\t\t\treject( new Error( 'Canvas is empty' ) );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst formData = new FormData();\n\t\t\t\tformData.append( 'file', blob, 'thumbnail.jpg' );\n\t\t\t\tformData.append( 'attachment_id', attachmentId );\n\t\t\t\tformData.append( 'post_name', getFilename( videoSrc ) );\n\n\t\t\t\tconst response = await uploadThumbnail( formData );\n\t\t\t\tresolve( response );\n\t\t\t} catch ( error ) {\n\t\t\t\treject( error );\n\t\t\t}\n\t\t}, 'image/jpeg' );\n\t} );\n};\n\nexport const uploadThumbnail = async (formData) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/thumbs/upload',\n\t\t\tmethod: 'POST',\n\t\t\tbody: formData,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error uploading thumbnail:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const saveAllThumbnails = async (attachment_id, thumb_urls) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/thumbs/save_all',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tattachment_id,\n\t\t\t\tthumb_urls,\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error saving all thumbnails:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getVideoGallery = async (args) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: addQueryArgs('/videopack/v1/video_gallery', args),\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching video gallery:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getUsersWithCapability = async (capability) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/wp/v2/users?capability=${capability}`,\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching users:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getFreemiusPage = async (page) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/freemius/${page}`,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(`Error fetching Freemius page '${page}':`, error);\n\t\tthrow error;\n\t}\n};\n\nexport const getRecentVideos = async (posts) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/recent_videos?posts=${posts}`,\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching recent videos:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const testFFmpegCommand = async (codec, resolution, rotate) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/ffmpeg-test/?codec=${codec}&resolution=${resolution}&rotate=${rotate}`,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error testing FFmpeg command:', error);\n\t\tthrow error;\n\t}\n};\n\n\n\nexport const getSettings = async () => {\n\ttry {\n\t\tconst allSettings = await apiFetch({ path: '/wp/v2/settings' });\n\t\treturn allSettings.videopack_options || {};\n\t} catch (error) {\n\t\tconsole.error('Error fetching settings:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const saveWPSettings = async (newSettings) => {\n\ttry {\n\t\tconst response = await apiFetch({\n\t\t\tpath: '/wp/v2/settings',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tvideopack_options: newSettings,\n\t\t\t},\n\t\t});\n\t\treturn response.videopack_options || {};\n\t} catch (error) {\n\t\tconsole.error('Error saving WP settings:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const resetVideopackSettings = async () => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/defaults',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error resetting Videopack settings:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const setPosterImage = async (attachment_id, thumb_url) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/thumbs',\n\t\t\tmethod: 'PUT',\n\t\t\tdata: {\n\t\t\t\tattachment_id,\n\t\t\t\tthumburl: thumb_url,\n\t\t\t},\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error setting poster image:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const generateThumbnail = async (\n\turl,\n\ttotal_thumbnails,\n\tthumbnail_index,\n\tattachment_id,\n\tgenerate_button\n) => {\n\ttry {\n\t\tconst path = addQueryArgs('/videopack/v1/thumbs', {\n\t\t\turl,\n\t\t\ttotal_thumbnails,\n\t\t\tthumbnail_index,\n\t\t\tattachment_id,\n\t\t\tgenerate_button,\n\t\t});\n\n\t\treturn await apiFetch({ path });\n\t} catch (error) {\n\t\tconsole.error('Error generating thumbnail:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const startBatchProcess = async (type, additionalData = {}) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/batch/process',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { type, ...additionalData },\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(`Error starting ${type} batch processing:`, error);\n\t\tthrow error;\n\t}\n};\n\nexport const getBatchProgress = async (type) => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: `/videopack/v1/batch/progress?type=${type}`,\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(`Error fetching ${type} batch progress:`, error);\n\t\tthrow error;\n\t}\n};\n\nexport const getThumbnailCandidates = async () => {\n\ttry {\n\t\treturn await apiFetch({\n\t\t\tpath: '/videopack/v1/thumbs/candidates',\n\t\t\tmethod: 'GET',\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('Error fetching thumbnail candidates:', error);\n\t\tthrow error;\n\t}\n};\n","import { __ } from '@wordpress/i18n';\n\n/**\n * Captures a frame from a video element or URL.\n *\n * @param {HTMLVideoElement|string} source           Video element or URL.\n * @param {number}                  time             Time in seconds to capture.\n * @param {Object}                  watermarkOptions Watermark settings.\n * @return {Promise<HTMLCanvasElement>} The canvas with the captured frame.\n */\nexport const captureVideoFrame = (source, time, watermarkOptions = null) => {\n\treturn new Promise((resolve, reject) => {\n\t\tlet video;\n\t\tlet isTempVideo = false;\n\n\t\tif (typeof source === 'string') {\n\t\t\tvideo = document.createElement('video');\n\t\t\tvideo.crossOrigin = 'anonymous';\n\t\t\tvideo.src = source;\n\t\t\tvideo.muted = true;\n\t\t\tvideo.preload = 'metadata';\n\t\t\tisTempVideo = true;\n\t\t} else {\n\t\t\tvideo = source;\n\t\t}\n\n\t\tconst onSeeked = async () => {\n\t\t\t// Clean up listeners if we added them\n\t\t\tif (isTempVideo) {\n\t\t\t\tvideo.removeEventListener('seeked', onSeeked);\n\t\t\t\tvideo.removeEventListener('error', onError);\n\t\t\t}\n\n\t\t\tconst canvas = document.createElement('canvas');\n\t\t\tcanvas.width = video.videoWidth;\n\t\t\tcanvas.height = video.videoHeight;\n\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\tctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n\t\t\tif (watermarkOptions && watermarkOptions.url) {\n\t\t\t\ttry {\n\t\t\t\t\tawait drawWatermark(canvas, watermarkOptions);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('Watermark failed', e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresolve(canvas);\n\n\t\t\tif (isTempVideo) {\n\t\t\t\tvideo.src = '';\n\t\t\t\tvideo.load();\n\t\t\t}\n\t\t};\n\n\t\tconst onError = (e) => {\n\t\t\tif (isTempVideo) {\n\t\t\t\tvideo.removeEventListener('seeked', onSeeked);\n\t\t\t\tvideo.removeEventListener('error', onError);\n\t\t\t}\n\t\t\treject(e);\n\t\t};\n\n\t\tconst onLoadedMetadata = () => {\n\t\t\tlet seekTime = time;\n\t\t\tif (video.duration < seekTime) {\n\t\t\t\tseekTime = video.duration / 2;\n\t\t\t}\n\t\t\tvideo.currentTime = seekTime;\n\t\t};\n\n\t\tif (isTempVideo) {\n\t\t\tvideo.addEventListener('seeked', onSeeked);\n\t\t\tvideo.addEventListener('error', onError);\n\t\t\tvideo.addEventListener('loadedmetadata', onLoadedMetadata);\n\t\t\t// Trigger load\n\t\t\tvideo.load();\n\t\t} else {\n\t\t\t// For existing video element, just seek\n\t\t\tconst oneShotSeek = async () => {\n\t\t\t\tvideo.removeEventListener('seeked', oneShotSeek);\n\n\t\t\t\tconst canvas = document.createElement('canvas');\n\t\t\t\tcanvas.width = video.videoWidth;\n\t\t\t\tcanvas.height = video.videoHeight;\n\t\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\t\tctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n\t\t\t\tif (watermarkOptions && watermarkOptions.url) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait drawWatermark(canvas, watermarkOptions);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Watermark failed', e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresolve(canvas);\n\t\t\t};\n\t\t\tvideo.addEventListener('seeked', oneShotSeek);\n\t\t\tvideo.currentTime = time;\n\t\t}\n\t});\n};\n\n/**\n * Draws a watermark on the provided canvas.\n *\n * @param {HTMLCanvasElement} canvas  The canvas to draw on.\n * @param {Object}            options Watermark options (url, scale, align, x, valign, y).\n * @return {Promise<HTMLCanvasElement>}\n */\nexport const drawWatermark = (canvas, options) => {\n\treturn new Promise((resolve, reject) => {\n\t\tconst { url, scale, align, x, valign, y } = options;\n\t\tconst ctx = canvas.getContext('2d');\n\t\tconst img = new Image();\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.src = url;\n\n\t\timg.onload = () => {\n\t\t\tconst canvasWidth = canvas.width;\n\t\t\tconst canvasHeight = canvas.height;\n\t\t\tconst watermarkWidth = (canvasWidth * scale) / 100;\n\t\t\tconst watermarkHeight = (canvasHeight * scale) / 100;\n\n\t\t\tconst horizontalOffset = (canvasWidth * x) / 100;\n\t\t\tconst verticalOffset = (canvasHeight * y) / 100;\n\n\t\t\tlet xPos, yPos;\n\n\t\t\tswitch (align) {\n\t\t\t\tcase 'left':\n\t\t\t\t\txPos = horizontalOffset;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'center':\n\t\t\t\t\txPos =\n\t\t\t\t\t\t(canvasWidth - watermarkWidth) / 2 + horizontalOffset;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\txPos = canvasWidth - watermarkWidth - horizontalOffset;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\txPos = horizontalOffset;\n\t\t\t}\n\n\t\t\tswitch (valign) {\n\t\t\t\tcase 'top':\n\t\t\t\t\tyPos = verticalOffset;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'center':\n\t\t\t\t\tyPos =\n\t\t\t\t\t\t(canvasHeight - watermarkHeight) / 2 + verticalOffset;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom':\n\t\t\t\t\tyPos = canvasHeight - watermarkHeight - verticalOffset;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tyPos = verticalOffset;\n\t\t\t}\n\n\t\t\tctx.drawImage(img, xPos, yPos, watermarkWidth, watermarkHeight);\n\t\t\tresolve(canvas);\n\t\t};\n\n\t\timg.onerror = () =>\n\t\t\treject(\n\t\t\t\tnew Error(\n\t\t\t\t\t__(\n\t\t\t\t\t\t'Failed to load watermark image',\n\t\t\t\t\t\t'video-embed-thumbnail-generator'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t});\n};\n\n/**\n * Loads video metadata from a source.\n *\n * @param {string} source Video URL.\n * @return {Promise<HTMLVideoElement>} The video element with loaded metadata.\n */\nexport const getVideoMetadata = (source) => {\n\treturn new Promise((resolve, reject) => {\n\t\tconst video = document.createElement('video');\n\t\tvideo.preload = 'metadata';\n\t\tvideo.crossOrigin = 'anonymous';\n\t\tvideo.src = source;\n\t\tvideo.muted = true;\n\n\t\tconst timeout = setTimeout(() => {\n\t\t\treject(new Error('Video load timeout'));\n\t\t}, 30000);\n\n\t\tvideo.onloadedmetadata = () => {\n\t\t\tclearTimeout(timeout);\n\t\t\tresolve(video);\n\t\t};\n\n\t\tvideo.onerror = (e) => {\n\t\t\tclearTimeout(timeout);\n\t\t\treject(e);\n\t\t};\n\t});\n};\n\n/**\n * Calculates timecodes for thumbnail generation.\n *\n * @param {number} duration Total video duration.\n * @param {number} count    Number of thumbnails.\n * @param {Object} options  Options { position: number (0-100), random: boolean }.\n * @return {number[]} Array of timecodes.\n */\nexport const calculateTimecodes = (duration, count, options = {}) => {\n\tconst timecodes = [];\n\tconst { position = 50, random = false } = options;\n\n\tif (count === 1 && !random) {\n\t\ttimecodes.push(duration * (position / 100));\n\t} else {\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tlet time = ((i + 1) / (count + 1)) * duration;\n\t\t\tif (random) {\n\t\t\t\tconst randomOffset = Math.floor(Math.random() * (duration / count));\n\t\t\t\ttime = Math.max(time - randomOffset, 0);\n\t\t\t}\n\t\t\ttimecodes.push(time);\n\t\t}\n\t}\n\treturn timecodes;\n};\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"ReactJSXRuntime\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blob\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"mediaUtils\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"url\"];","// packages/icons/src/library/chevron-down.tsx\nimport { Path, SVG } from \"@wordpress/primitives\";\nimport { jsx } from \"react/jsx-runtime\";\nvar chevron_down_default = /* @__PURE__ */ jsx(SVG, { viewBox: \"0 0 24 24\", xmlns: \"http://www.w3.org/2000/svg\", children: /* @__PURE__ */ jsx(Path, { d: \"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z\" }) });\nexport {\n  chevron_down_default as default\n};\n//# sourceMappingURL=chevron-down.mjs.map\n","// packages/icons/src/library/chevron-up.tsx\nimport { Path, SVG } from \"@wordpress/primitives\";\nimport { jsx } from \"react/jsx-runtime\";\nvar chevron_up_default = /* @__PURE__ */ jsx(SVG, { viewBox: \"0 0 24 24\", xmlns: \"http://www.w3.org/2000/svg\", children: /* @__PURE__ */ jsx(Path, { d: \"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z\" }) });\nexport {\n  chevron_up_default as default\n};\n//# sourceMappingURL=chevron-up.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerBlockType } from '@wordpress/blocks';\nimport Edit from './edit';\nimport save from './save';\nimport metadata from './block.json';\nimport { videopack as videopackIcon } from '../../assets/icon';\n\nregisterBlockType(metadata.name, {\n\ticon: videopackIcon,\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n\n\t/**\n\t * @see ./save.js\n\t */\n\tsave,\n});\n"],"names":["videopack","_jsxs","width","height","xmlns","viewBox","children","_jsx","transform","cx","cy","r","fill","stroke","strokeWidth","d","volumeDown","volumeUp","save","insertImage","sortAscending","sortDescending","useEntityRecord","useEffect","useMemo","useState","InspectorControls","useBlockProps","VideoSettings","Thumbnails","AdditionalFormats","VideoPlayer","jsx","jsxs","Fragment","_Fragment","SingleVideoBlock","setAttributes","attributes","options","isSelected","externalSourceGroups","id","src","showOverlay","setShowOverlay","videoData","record","attachment","hasResolved","newAttributes","source_url","title","raw","caption","embedlink","link","poster","meta","updatedAttributes","Object","keys","reduce","acc","key","undefined","length","playerAttributes","newPlayerAttributes","sources","source_groups","className","PanelBody","PanelRow","RangeControl","SelectControl","TextControl","ToggleControl","__","useVideoSettings","handleSettingChange","preloadOptions","displayAttributes","setDisplayAttributes","initialOpen","gifmode","__nextHasNoMarginBottom","label","onChange","value","checked","autoplay","help","muted","loop","__next40pxDefaultSize","volume","beforeIcon","afterIcon","initialPosition","withInputField","min","max","step","controls","playback_rate","preload","hideCancelButton","embeddable","downloadlink","embedcode","overlay_title","view_count","getBlobByURL","isBlobURL","Button","Placeholder","BlockControls","BlockIcon","MediaPlaceholder","MediaReplaceFlow","store","blockEditorStore","useDispatch","useSelect","noticesStore","apiFetch","getSettings","icon","ALLOWED_MEDIA_TYPES","Edit","setOptions","setExternalSourceGroups","blockProps","createErrorNotice","mediaUpload","select","postId","getCurrentPostId","getMedia","setAttributesFromMedia","then","response","file","filesList","onFileChange","videoFile","onSelectVideo","onError","onUploadError","allowedTypes","path","encodeURIComponent","data","catch","error","console","attachmentObject","media_attributes","url","total_thumbnails","rendered","starts","video","videoArray","Array","isArray","some","item","hasOwnProperty","onSelectURL","newSrc","filename","split","pop","includes","substring","lastIndexOf","decodeURIComponent","e","message","type","placeholder","content","withIllustration","instructions","onSelect","accept","group","mediaId","mediaURL","sprintf","Spinner","__experimentalConfirmDialog","ConfirmDialog","useRef","coreStore","EncodeFormatStatus","getVideoFormats","enqueueJob","assignFormat","deleteFile","deleteJob","ffmpeg_exists","videoFormats","setVideoFormats","encodeMessage","setEncodeMessage","itemToDelete","setItemToDelete","deleteInProgress","setDeleteInProgress","isConfirmOpen","setIsConfirmOpen","isLoading","setIsLoading","isEncoding","setIsEncoding","progressTimerRef","updateVideoFormats","currentVideoFormats","newFormats","forEach","newFormat","oldFormat","encoding_now","progress","percent","JSON","stringify","fetchVideoFormats","formats","pollVideoFormats","siteSettings","getSite","shouldPoll","values","format","status","incrementEncodeProgress","updatedVideoFormats","elapsed","Date","getTime","started","remaining","video_duration","totalDurationInSeconds","speedMatch","speed","String","match","parseFloat","increment","remainingPercent","Math","pollTimer","setInterval","current","clearInterval","handleFormatCheckbox","event","formatId","prevVideoFormats","updatedFormats","handleEnqueue","videopack_config","formatsToEncode","entries","filter","queueMessage","queueList","encode_list","Intl","ListFormat","language","replace","style","log","join","queuePosition","new_queue_position","errorMessage","details","onSelectFormat","media","handleFileDelete","formatData","handleJobDelete","jobId","openConfirmDialog","job_id","name","handleConfirm","handleCancel","somethingToEncode","obj","encodeButtonTitle","isEncodeButtonDisabled","confirmDialogMessage","canUploadFiles","canUser","groupedFormats","codec","codecId","push","sort","a","b","resolution","map","codecGroup","encode","enabled","format_id","ffmpegExists","onCheckboxChange","onDeleteFile","onCancelJob","isOpen","onConfirm","onCancel","variant","onClick","text","disabled","CheckboxControl","__experimentalDivider","Divider","MediaUpload","EncodeProgress","getCheckboxCheckedState","getCheckboxDisabledState","exists","status_l10n","was_picked","render","open","size","deletable","isBusy","isDestructive","convertToTimecode","time","isNaN","padZero","num","floor","toString","padStart","h","m","s","hh","mm","ss","round","percentText","fps","error_message","BaseControl","Dashicon","Icon","useCallback","saveAllThumbnails","setPosterImage","generateThumbnail","createThumbnailFromCanvas","captureVideoFrame","calculateTimecodes","chevronUp","chevronDown","poster_id","isExternal","thumbVideoPanel","videoRef","posterImageButton","isPlaying","setIsPlaying","isOpened","setIsOpened","currentTime","setCurrentTime","thumbChoices","setThumbChoices","isSaving","setIsSaving","VIDEO_POSTER_ALLOWED_MEDIA_TYPES","window","mejs","players","mejsContainer","document","querySelector","mejsId","player","setPoster","onSelectPoster","image","Number","onRemovePoster","focus","handleGenerate","browserThumbnailsEnabled","browser_thumbnails","newThumbImages","i","generateThumb","thumb","real_thumb_url","generateThumbCanvases","thumbsInt","newThumbCanvases","timePoints","duration","random","canvas","ffmpeg_thumb_watermark","toDataURL","canvasObject","ffmpegError","togglePlayback","paused","play","pause","pauseVideo","playVideo","handleSliderChange","handleTimeUpdate","addEventListener","removeEventListener","handleSaveThumbnail","currentTarget","classList","add","setImgAsPoster","setCanvasAsPoster","handleSaveAllThumbnails","firstThumbType","uploadPromises","Promise","all","thumbUrls","setPosterData","thumb_url","thumb_id","new_poster","new_poster_id","metaData","edit","featured_media","wp","frame","get","collection","props","set","ignore","library","handleVideoKeyboardControl","stopImmediatePropagation","code","playbackRate","preventDefault","handleUseThisFrame","handleToggleVideoPlayer","next","alt","VisualLabel","ref","index","tabIndex","_n","BelowVideo","viewStarts","MetaBar","twitter_button","facebook_button","metaBarItems","noTitleMeta","shareIsOpen","setShareIsOpen","embedItems","embedLink","EmbedElements","target","readOnly","href","download","VideoJS","playerRef","skin","onPlay","onPause","previousSkinRef","initTimer","setTimeout","firstChild","removeChild","videoElement","createElement","setAttribute","appendChild","videojs","on","isDisposed","playbackRates","removeClass","addClass","currentSrc","clearTimeout","off","dispose","decodeEntities","onReady","decodedAttributes","embed_method","playsinline","start","pauseothervideos","endofvideooverlay","auto_res","pixel_ratio","right_click","fullwidth","actualAutoplay","wrapperRef","videoJsOptions","setVideoJsOptions","allSources","flatMap","renderReady","handlePlay","remove","handlePause","MediaElementPlayer","fluid","responsive","hasResolutions","plugins","resolutionSelector","force_types","defaultResSource","find","default","default_res","videoSourceElements","source","GenericPlayer","autoPlay","playsInline","WordPressDefaultPlayer","handleVideoPlayerReady","el","_x","useDebounce","updateAttachmentCallback","method","updateAttachment","addQueryArgs","getFilename","getQueue","toggleQueue","action","clearQueue","removeJob","attachmentId","parentId","videoSrc","resolve","reject","toBlob","blob","Error","formData","FormData","append","uploadThumbnail","body","attachment_id","thumb_urls","getVideoGallery","args","getUsersWithCapability","capability","getFreemiusPage","page","getRecentVideos","posts","testFFmpegCommand","rotate","allSettings","videopack_options","saveWPSettings","newSettings","resetVideopackSettings","thumburl","thumbnail_index","generate_button","startBatchProcess","additionalData","getBatchProgress","getThumbnailCandidates","watermarkOptions","isTempVideo","crossOrigin","onSeeked","videoWidth","videoHeight","ctx","getContext","drawImage","drawWatermark","load","onLoadedMetadata","seekTime","oneShotSeek","scale","align","x","valign","y","img","Image","onload","canvasWidth","canvasHeight","watermarkWidth","watermarkHeight","horizontalOffset","verticalOffset","xPos","yPos","onerror","getVideoMetadata","timeout","onloadedmetadata","count","timecodes","position","randomOffset","registerBlockType","metadata","videopackIcon"],"sourceRoot":""}