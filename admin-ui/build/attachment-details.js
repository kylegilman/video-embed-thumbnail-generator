(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.i18n,n=window.wp.apiFetch;var a=e.n(n);const r=window.wp.components,s=(window.wp.compose,window.wp.coreData),o=window.wp.element,i=window.ReactJSXRuntime,c=window.wp.blockEditor,l=window.wp.mediaUtils,d=window.wp.url,u=window.wp.primitives,m=(0,i.jsx)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)(u.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),p=(0,i.jsx)(u.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)(u.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),h=({setAttributes:e,attributes:n,attachmentRecord:s,options:u})=>{const{id:h,total_thumbnails:_,src:g,poster:f,poster_id:b}=n,v=(0,o.useRef)(),j=(0,o.useRef)(),w=(0,o.useRef)(),y=(0,o.useRef)(),[k,x]=(0,o.useState)(!1),[R,N]=(0,o.useState)(!1),[E,C]=(0,o.useState)(!1),[S,I]=(0,o.useState)([]),[T,O]=(0,o.useState)(!1),B="/videopack/v1/thumbs";(0,o.useEffect)(()=>{f||j.current.on("loadedmetadata",()=>{$("generate")})},[j.current]);const $=async(e="generate")=>{if(O(!0),u?.ffmpeg_exists&&!u?.browser_thumbnails){const t=[];for(let n=1;n<=Number(_);n++){const a={src:(await P(n,e)).real_thumb_url,type:"ffmpeg"};t.push(a),I([...t])}}else L(e)},L=(0,o.useCallback)(async e=>{const t=Number(_),n=[],a=[...Array(t)].map((n,a)=>{let r=(a+1)/(t+1)*j.current.duration;if("random"===e){const e=Math.floor(Math.random()*(j.current.duration/t));r=Math.max(r-e,0)}return r}),r=()=>{let e;D().then(s=>{try{e={src:s.toDataURL(),type:"canvas",canvasObject:s}}catch(e){return console.error(e),j.current.removeEventListener("timeupdate",r),void O(!1)}n.push(e),I([...n]),n.length===t?(j.current.removeEventListener("timeupdate",r),O(!1)):j.current.currentTime=a[n.length]}).catch(e=>{console.error("Error processing canvas:",e)})};j.current.addEventListener("timeupdate",r),j.current.currentTime=a[0]}),M=()=>{j.current?.paused?(j.current.play(),x(!0)):(j.current?.pause(),x(!1))},q=()=>{j.current.pause(),x(!1)};(0,o.useEffect)(()=>{const e=()=>{C(j.current.currentTime)};return j.current?.addEventListener("timeupdate",e),()=>{j.current?.removeEventListener("timeupdate",e)}},[]);const D=async()=>{const e=document.createElement("canvas");if(e.width=j.current.videoWidth,e.height=j.current.videoHeight,e.getContext("2d").drawImage(j.current,0,0,e.width,e.height),!u?.ffmpeg_thumb_watermark?.url)return e;try{const n=function(e){return new Promise(async(n,a)=>{try{u?.ffmpeg_thumb_watermark?.url||a(new Error("No thumbnail watermark set"));const r=e.getContext("2d"),s=new Image,{url:o,scale:i,align:c,x:l,valign:d,y:m}=u.ffmpeg_thumb_watermark;s.crossOrigin="Anonymous",s.src=o,s.onload=()=>{const o=e.width,u=e.height,p=o*i/100,h=u*i/100,_=o*l/100,g=u*m/100;let f,b;switch(c){case"left":f=_;break;case"center":f=(o-p)/2+_;break;case"right":f=o-p-_;break;default:return void a(new Error((0,t.__)("Invalid horizontal alignment provided")))}switch(d){case"top":b=g;break;case"center":b=(u-h)/2+g;break;case"bottom":b=u-h-g;break;default:return void a(new Error((0,t.__)("Invalid vertical alignment provided")))}r.drawImage(s,f,b,p,h),n(e)},s.onerror=()=>{a(new Error((0,t.__)("Failed to load watermark image")))}}catch(e){a(e)}})}(e);return n}catch(e){console.error("Error drawing watermark:",e)}},A=async(e,n=null)=>{const a=(0,d.getFilename)(g),r=a.substring(0,a.lastIndexOf("."))||a,s=null!==n?`_thumb_canvas_${n+1}.png`:"_thumb_canvas.png",o=null!==n?` ${(0,t.__)("thumbnail")} ${n+1}`:` ${(0,t.__)("thumbnail")}`;try{const t=await new Promise(t=>e.toBlob(e=>{t(new File([e],`${r}${s}`,{type:"image/png"}))},"image/png"));O(!0);const n=await(0,l.uploadMedia)({filesList:[t],allowedTypes:["image/png"],title:`${r}${o}`});F(n.url,n.id),O(!1)}catch(e){console.error((0,t.__)("Upload error:"),e)}},F=(t,n)=>{e({poster:t,poster_id:n}),I([]),s?.edit({featured_media:n?Number(n):null,meta:{"_kgflashmediaplayer-poster":t,"_kgflashmediaplayer-poster-id":Number(n)}}).then(e=>{s.save().then(e=>{console.log(s)})}).catch(e=>{console.error(e)})},P=async(e,t)=>{try{const n=(0,d.addQueryArgs)(B,{url:g,total_thumbnails:_,thumbnail_index:e,attachment_id:h,generate_button:t});return await a()({path:n})}catch(e){console.error(e)}},U=e=>{switch(e.stopImmediatePropagation(),e.code){case"Space":M();break;case"ArrowLeft":q(),j.current.currentTime=j.current.currentTime-.042;break;case"ArrowRight":q(),j.current.currentTime=j.current.currentTime+.042;break;case"KeyJ":k&&(j.current.playbackRate=Math.max(0,j.current.playbackRate-1));break;case"KeyK":q();break;case"KeyL":k&&(j.current.playbackRate=j.current.playbackRate+1),j.current.play(),x(!0);break;default:return}e.preventDefault()};return(0,i.jsx)("div",{className:"videopack-thumbnail-generator",children:(0,i.jsxs)(r.PanelBody,{title:(0,t.__)("Thumbnails"),children:[f&&(0,i.jsx)("img",{className:"videopack-current-thumbnail",src:f,ref:w}),(0,i.jsxs)(r.BaseControl,{className:"editor-video-poster-control",children:[(0,i.jsx)(r.BaseControl.VisualLabel,{children:(0,t.__)("Video Thumbnail")}),(0,i.jsx)(c.MediaUpload,{title:(0,t.__)("Select video thumbnail"),onSelect:function(t){e({poster:t.url,poster_id:Number(t.id)})},allowedTypes:["image"],render:({open:e})=>(0,i.jsx)(r.Button,{variant:"secondary",onClick:e,ref:y,children:f?(0,t.__)("Replace"):(0,t.__)("Select")})}),!!f&&(0,i.jsx)(r.Button,{onClick:function(){e({poster:void 0}),y.current.focus()},variant:"tertiary",children:(0,t.__)("Remove")})]}),(0,i.jsx)(r.TextControl,{value:_,onChange:t=>{e(t?{total_thumbnails:Number(t)}:{total_thumbnails:""})},className:"videopack-numberofthumbs",disabled:T}),(0,i.jsx)(r.Button,{variant:"secondary",onClick:()=>$("generate"),className:"videopack-generate",disabled:T,children:(0,t.__)("Generate")}),(0,i.jsx)(r.Button,{variant:"secondary",onClick:()=>$("random"),className:"videopack-generate",disabled:T,children:(0,t.__)("Random")}),S.length>0&&(0,i.jsx)(r.Button,{variant:"primary",onClick:async()=>{O(!0);const e=S[0]?.type;if("canvas"===e){for(const[e,n]of S.entries())try{const a=(0,d.getFilename)(g),r=a.substring(0,a.lastIndexOf("."))||a,s=await new Promise(t=>n.canvasObject.toBlob(n=>{t(new File([n],`${r}_thumb_canvas_${e+1}.png`,{type:"image/png"}))},"image/png"));await(0,l.uploadMedia)({filesList:[s],allowedTypes:["image/png"],title:`${r} ${(0,t.__)("thumbnail")} ${e+1}`})}catch(t){console.error(`Error uploading canvas thumbnail ${e+1}:`,t)}I([])}else if("ffmpeg"===e){const e=S.map(e=>e.src);try{await a()({path:`${B}/save_all`,method:"POST",data:{attachment_id:h,thumb_urls:e}}),I([])}catch(e){console.error("Error saving all FFmpeg thumbnails:",e)}}O(!1)},disabled:T,children:(0,t.__)("Save All")}),S.length>0&&(0,i.jsx)("div",{className:"videopack-thumbnail-holder"+(T?" disabled":""),children:S.map((e,n)=>(0,i.jsxs)("div",{className:"videopack-thumbnail",onClick:t=>{((e,t,n)=>{e.currentTarget.classList.add("saving"),O(!0),"ffmpeg"===t.type?(async(e,t)=>{try{const n=await a()({path:B,method:"PUT",data:{attachment_id:h,thumburl:e,thumbnail_index:t}});F(n.thumb_url,n.thumb_id)}catch(e){console.error(e)}})(t.src):A(t.canvasObject,n)})(t,e,n)},children:[(0,i.jsx)("img",{src:e.src,alt:`Thumbnail ${n+1}`,title:(0,t.__)("Save and set thumbnail")}),(0,i.jsx)(r.Spinner,{})]},n))}),(0,i.jsxs)("div",{className:"components-panel__body videopack-thumb-video "+(R?"is-opened":""),children:[(0,i.jsx)("h2",{className:"components-panel__body-title",children:(0,i.jsxs)("button",{className:"components-button components-panel__body-toggle",type:"button",onClick:e=>{e.preventDefault();const t=!R;N(t),t&&v.current?(v.current.focus(),v.current.addEventListener("keydown",U)):v.current.addEventListener("keydown",U)},"aria-expanded":R,children:[(0,i.jsx)("span",{"aria-hidden":"true",children:(0,i.jsx)(r.Icon,{className:"components-panel__arrow",icon:R?m:p})}),(0,t.__)("Choose From Video")]})}),(0,i.jsxs)("div",{className:"videopack-thumb-video-panel",tabIndex:0,ref:v,children:[(0,i.jsx)("video",{src:g,ref:j,muted:!0,preload:"metadata",onClick:M}),(0,i.jsx)(r.Button,{className:"videopack-play-pause",onClick:M,children:(0,i.jsx)(r.Dashicon,{icon:k?"controls-pause":"controls-play"})}),!isNaN(j.current?.duration)&&(0,i.jsx)(r.RangeControl,{__nextHasNoMarginBottom:!0,min:0,max:j.current.duration,step:"any",initialPosition:0,value:j.current.currentTime,onChange:e=>{j.current.currentTime=e,C(e)},className:"videopack-thumbvideo-slider",type:"slider"}),(0,i.jsx)(r.Button,{variant:"secondary",onClick:async()=>{O(!0);const e=await D();A(e)},disabled:T,children:(0,t.__)("Use this frame")})]})]})]})})},_=window.wp.data,g=({setAttributes:e,attributes:n,attachmentRecord:s,options:l})=>{const{id:d,src:u,height:m}=n,{ffmpeg_exists:p}=l,[h,g]=(0,o.useState)(),[f,b]=(0,o.useState)(),[v,j]=(0,o.useState)(null),[w,y]=(0,o.useState)(null),[k,x]=(0,o.useState)(!1),[R,N]=(0,o.useState)(!1),[E,C]=(0,o.useState)(!1),S=(0,o.useRef)(null),I=(0,o.useRef)(null),T="/videopack/v1/queue",O=()=>{d&&a()({path:"/videopack/v1/formats/"+d}).then(e=>{if(g(e),e&&"object"==typeof e){const t={...e};Object.keys(t).forEach(e=>{t[e]&&void 0===t[e].checked&&(t[e].checked=!1)}),g(t)}})};(0,o.useEffect)(()=>{O()},[d]);const B=e=>!!(!1===e||null===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length),$=(e,t)=>{if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(const r of n)if(!a.includes(r)||!$(e[r],t[r]))return!1;return!0},L=(0,_.useSelect)(e=>e("core").getSite(),[]),M=()=>{if(console.log("progress"),E){const e=Object.entries(h).reduce((e,[t,n])=>{if(B(n.progress))e[t]=n;else{const a=n.progress.current_seconds+parseInt(n.progress.fps)/30;let r=Math.round(n.progress.current_seconds/parseInt(n.progress.duration)*100);r>100&&(r=100),0!=r&&(n.progress.elapsed=n.progress.elapsed+1,isNaN(n.progress.remaining)||(n.progress.remaining>0?n.progress.remaining--:n.progress.remaing=0)),e[t]={...n,progress:{...n.progress,current_seconds:a,elapsed:n.progress.elapsed,percent_done:r,remaining:n.progress.remaining}}}return e},{});g(e)}},q=()=>{console.log("update"),u&&d&&a()({path:"/videopack/v1/formats/"+d,method:"GET"}).then(e=>{$(h,e)||g(e)}).catch(e=>console.error("Error polling video formats:",e))};(0,o.useEffect)(()=>(C(!!h&&Object.values(h).some(e=>e.hasOwnProperty("encoding_now")&&e.encoding_now)),S.current=setTimeout(q,5e3),E?(null===I.current&&(I.current=setInterval(M,1e3)),()=>{null!==I.current&&(clearInterval(I.current),I.current=null),null!==S.current&&(clearTimeout(S.current),S.current=null)}):(clearInterval(I.current),void(I.current=null))),[h,E]);const D=e=>{console.log("select")},A=e=>{if(!e)return b((0,t.__)("Error: Cannot delete job, missing job ID.")),void console.error("Cannot delete job: Missing job ID");y(e),a()({path:`${T}/${e}`,method:"DELETE"}).then(e=>{b((0,t.__)("Job cancelled/deleted successfully.")),O()}).catch(e=>{console.error("Job delete failed:",e),b((0,t.sprintf)((0,t.__)("Error deleting job: %s"),e.message)),O()}).finally(()=>{y(null)})},F=(e,t)=>{const n=h?.[t];n&&(j({type:e,formatId:t,jobId:n.job_id,childId:n.child_id,name:n.name}),x(!0))},P=e=>{if(null==e||isNaN(e))return"--:--";const t=e=>Math.floor(e).toString().padStart(2,"0"),n=Math.floor(e/3600),a=Math.floor(e%3600/60),r=Math.floor(e%60);return(n>0?t(n)+":":"")+t(a)+":"+t(r)},U=({format:e})=>{const n=h?.[e];if("processing"===n?.status&&!B(n?.progress)){const e=(0,t.sprintf)((0,t.__)("%d%%"),n.progress.percent_done),a=()=>{n.job_id&&A(n.job_id)};return(0,i.jsxs)("div",{className:"videopack-encode-progress",children:[(0,i.jsx)("div",{className:"videopack-meter",children:(0,i.jsx)("div",{className:"videopack-meter-bar",style:{width:e},children:(0,i.jsx)("div",{className:"videopack-meter-text",children:n.progress.percent_done>20&&e})})}),n.job_id&&(0,i.jsx)(r.Button,{onClick:a,variant:"secondary",isDestructive:!0,size:"small",isBusy:w===n.job_id,children:(0,t.__)("Cancel")}),(0,i.jsxs)("div",{className:"videopack-encode-progress-small-text",children:[(0,i.jsx)("span",{children:(0,t.__)("Elapsed:")+" "+P(n.progress.elapsed)}),(0,i.jsx)("span",{children:(0,t.__)("Remaining:")+" "+P(n.progress.remaining)}),(0,i.jsx)("span",{children:(0,t.__)("fps:")+" "+n.progress.fps})]})]})}return"failed"!==n?.status||B(n?.error_message)?null:(0,i.jsxs)("div",{className:"videopack-encode-error",children:[(0,t.sprintf)((0,t.__)("Error: %s"),n.error_message),n.job_id&&(0,i.jsx)(r.Button,{onClick:()=>F("job",e),variant:"link",text:(0,t.__)("Delete Job"),isDestructive:!0,isBusy:w===n.job_id})]})},z=()=>!!h&&Object.values(h).some(e=>e.checked&&e.is_available&&"queued"!==e.status&&"processing"!==e.status&&"completed"!==e.status&&"pending_replacement"!==e.status),J=(()=>{if(!h)return{};let e={...h};if(l.hide_video_formats&&l.encode&&(e=Object.fromEntries(Object.entries(e).filter(([e,t])=>!0===l.encode[e]||"not_queued"!==t.status))),s?.record?.media_details?.height){const t=s.record.media_details.height;e=Object.fromEntries(Object.entries(e).filter(([e,n])=>!n.height||n.height<=t||!0===n.replaces_original))}return e})(),V=R||!p||!z();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.PanelBody,{title:(0,t.__)("Additional Formats"),children:(0,i.jsxs)(c.MediaUploadCheck,{children:[(0,i.jsx)(r.PanelRow,{children:h?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{className:"videopack-formats-list"+(p?"":" no-ffmpeg"),children:Object.keys(J).map(e=>{const n=J[e];if(!n)return null;const a=!p||!n.is_available||"not_queued"!==n.status;return(0,i.jsxs)("li",{children:[p&&n.is_available&&"not_queued"===n.status?(0,i.jsx)(r.CheckboxControl,{__nextHasNoMarginBottom:!0,className:"videopack-format",label:n.name,checked:n.checked,disabled:a,onChange:t=>((e,t)=>{g(n=>{const a={...n};return a[t]&&(a[t].checked=e),a})})(t,e)}):(0,i.jsx)("span",{className:"videopack-format",children:n.name}),"not_queued"!==n.status&&(0,i.jsx)("span",{className:"videopack-format-status",children:n.status_l10n}),n.exists&&"not_queued"===n.status&&!n.was_picked&&(0,i.jsx)(r.Button,{variant:"secondary",onClick:()=>D(),className:"videopack-format-button",size:"small",title:(0,t.__)("Link existing file"),children:(0,t.__)("Link")}),n.was_picked&&(0,i.jsx)(c.MediaUpload,{title:(0,t.sprintf)((0,t.__)("Replace %s"),n.name),onSelect:D,allowedTypes:["video"],render:({open:e})=>(0,i.jsx)(r.Button,{variant:"secondary",onClick:e,className:"videopack-format-button",size:"small",title:(0,t.__)("Replace file"),children:(0,t.__)("Replace")})}),n.deletable&&n.child_id&&(0,i.jsx)(r.Button,{isBusy:w===e,onClick:()=>F("file",e),variant:"link",text:(0,t.__)("Delete File"),isDestructive:!0}),("processing"===n.status||"failed"===n.status)&&(0,i.jsx)(U,{format:e}),(0,i.jsx)(r.__experimentalDivider,{})]},e)})}),(0,i.jsx)(r.__experimentalConfirmDialog,{isOpen:k,onConfirm:()=>{x(!1),v&&("file"===v.type&&v.childId?(e=>{const n=h?.[e];if(!n||!n.child_id)return b((0,t.__)("Error: Cannot delete file, missing attachment ID.")),void console.error("Cannot delete file: Missing child_id for format",e);y(e),a()({path:`/wp/v2/media/${n.child_id}?force=true`,method:"DELETE"}).then(()=>{b((0,t.__)("File deleted successfully.")),O()}).catch(e=>{console.error("File delete failed:",e),b((0,t.sprintf)((0,t.__)("Error deleting file: %s"),e.message)),O()}).finally(()=>{y(null)})})(v.formatId):"job"===v.type&&v.jobId&&A(v.jobId)),j(null)},onCancel:()=>{j(null),x(!1)},children:v?"file"===v.type?(0,t.sprintf)((0,t.__)("You are about to permanently delete the encoded %s video file from your site. This action cannot be undone."),v.name):"job"===v.type?(0,t.sprintf)((0,t.__)("You are about to permanently delete the encoding job for the %s video. This will also delete the encoded video file if it exists (if created by this job and not yet a separate attachment). This action cannot be undone."),v.name):void 0:""})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.Spinner,{})})}),p&&h&&(0,i.jsxs)(r.PanelRow,{children:[(0,i.jsx)(r.Button,{variant:"secondary",onClick:()=>{N(!0);const e=Object.entries(h).filter(([e,t])=>t.checked&&t.is_available&&"queued"!==t.status&&"processing"!==t.status&&"completed"!==t.status).reduce((e,[t,n])=>(e[t]=!0,e),{});a()({path:T+"/"+d,method:"PUT",data:{url:u,formats:e,parent_id:s?.record?.post}}).then(e=>{console.log(e),b((()=>{const n=e?.enqueue_data?.encode_list?new Intl.ListFormat(L?.language?L.language.replace("_","-"):"en-US",{style:"long",type:"conjunction"}).format(Object.values(e?.enqueue_data?.encode_list)):"";if(0==e?.enqueue_data?.new_queue_position){const a=e?.enqueue_data?.existing_queue_position;return"[]"!==!JSON.stringify(e?.enqueue_data?.encode_list)?(0,t.sprintf)((0,t.__)("%1$s updated in existing queue entry in position %2$s."),n,a):(0,t.sprintf)((0,t.__)("Video is already %1$s in the queue."),a)}if(1===e?.enqueue_data?.new_queue_position)return(0,t.__)("Starting...");{const a=e?.enqueue_data?.new_queue_position;return(0,t.sprintf)((0,t.__)("%1$s added to queue in position %2$s."),n,a)}})()),N(!1),O()}).catch(e=>{console.error(e),b((0,t.sprintf)((0,t.__)("Error enqueueing: %s"),e.message)),N(!1),O()})},title:z()?R?(0,t.__)("Loading..."):(0,t.__)("Encode selected formats"):(0,t.__)("Select formats to encode"),text:(0,t.__)("Encode"),disabled:V}),R&&(0,i.jsx)(r.Spinner,{}),f&&(0,i.jsx)("span",{className:"videopack-encode-message",children:f})]})]})})})},f=({attachmentAttributes:e})=>{const{id:t}=e,[n,c]=(0,o.useState)(),[l,d]=(0,o.useState)(),u=isNaN(t)?null:(0,s.useEntityRecord)("postType","attachment",t);return(0,o.useEffect)(()=>(console.log("Attachment component mounted."),a()({path:"/videopack/v1/settings",method:"GET"}).then(e=>{c(e)}),()=>console.log("Component unmounted!")),[]),(0,o.useEffect)(()=>{d({id:t,numberofthumbs:e?.meta?.["_kgvid-meta"]?.numberofthumbs||n?.numberofthumbs,src:e?.url,poster:e?.meta?.["_kgflashmediaplayer-poster"]||e?.image?.src,poster_id:e?.meta?.["_kgflashmediaplayer-poster-id"]})},[n]),l&&u.hasResolved&&n?(0,i.jsxs)("div",{className:"videopack-attachment-details",children:[(0,i.jsx)(h,{setAttributes:d,attributes:l,attachmentRecord:u,options:n}),(0,i.jsx)(g,{setAttributes:d,attributes:l,attachmentRecord:u,options:n})]}):(0,i.jsx)(r.Spinner,{})};jQuery(function(){if(wp.media&&wp.media.view&&wp.media.view.Attachment.Details){var e=wp.media.view.Attachment.Details;wp.media.view.Attachment.Details=e.extend({render:function(){if(this.videopackReactRootInstance&&(ReactDOM.unmountComponentAtNode(this.videopackReactRootInstance),this.videopackReactRootInstance=null,console.log("unmount")),e.prototype.render.apply(this,arguments),"video"===this.model.attributes.type||"gif"===this.model.attributes.subtype&&this.model.attributes.meta?.["_kgvid-meta"]?.animated){var t=this.$el.find(".settings");if(t.length>0){const e=document.createElement("div");e.id="videopack-attachment-details-root",t.append(e);var n=this.$el.find("#videopack-attachment-details-root").get(0);n?(this.videopackReactRootInstance=ReactDOM.createRoot(n),this.videopackReactRootInstance.render((0,i.jsx)(f,{attachmentAttributes:this.model.attributes})),this.reactComponentMounted=!0):console.error("Failed to initialize the React root element.")}}},remove:function(){this.videopackReactRootInstance&&(this.videopackReactRootInstance.unmount(),this.videopackReactRootInstance=null),e.prototype.remove.call(this)}})}}())})();