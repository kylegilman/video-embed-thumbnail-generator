{"version":3,"file":"attachment-details.js","mappings":"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","sources":["webpack://videopack-block/./node_modules/@wordpress/icons/build-module/library/chevron-down.js","webpack://videopack-block/./node_modules/@wordpress/icons/build-module/library/chevron-up.js","webpack://videopack-block/./src/AdditionalFormats.js","webpack://videopack-block/./src/Thumbnails/Thumbnails.js","webpack://videopack-block/./src/Thumbnails/Thumbnails.scss?500e","webpack://videopack-block/./src/attachment-details/AttachmentDetails.js","webpack://videopack-block/./src/icon.js","webpack://videopack-block/external window [\"wp\",\"apiFetch\"]","webpack://videopack-block/external window [\"wp\",\"blockEditor\"]","webpack://videopack-block/external window [\"wp\",\"components\"]","webpack://videopack-block/external window [\"wp\",\"compose\"]","webpack://videopack-block/external window [\"wp\",\"coreData\"]","webpack://videopack-block/external window [\"wp\",\"data\"]","webpack://videopack-block/external window [\"wp\",\"element\"]","webpack://videopack-block/external window [\"wp\",\"i18n\"]","webpack://videopack-block/external window [\"wp\",\"mediaUtils\"]","webpack://videopack-block/external window [\"wp\",\"primitives\"]","webpack://videopack-block/external window [\"wp\",\"url\"]","webpack://videopack-block/external window \"ReactJSXRuntime\"","webpack://videopack-block/webpack/bootstrap","webpack://videopack-block/webpack/runtime/compat get default export","webpack://videopack-block/webpack/runtime/define property getters","webpack://videopack-block/webpack/runtime/hasOwnProperty shorthand","webpack://videopack-block/webpack/runtime/make namespace object","webpack://videopack-block/./src/attachment-details/attachment-details.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst chevronDown = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z\"\n  })\n});\nexport default chevronDown;\n//# sourceMappingURL=chevron-down.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst chevronUp = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z\"\n  })\n});\nexport default chevronUp;\n//# sourceMappingURL=chevron-up.js.map","import { __, _x, sprintf, } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport {\n\tButton,\n\tCheckboxControl,\n\tDashicon,\n\tIcon,\n\tPanelBody,\n\tPanelRow,\n\tSpinner,\n\t__experimentalDivider as Divider,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport {\n\tMediaUpload,\n\tMediaUploadCheck,\n\t__experimentalGetElementClassName,\n} from '@wordpress/block-editor';\nimport {\n\tuseRef,\n\tuseEffect,\n\tuseState,\n} from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\nconst AdditionalFormats = ( {\n\tsetAttributes,\n\tattributes,\n\tattachmentRecord,\n\toptions,\n} ) => {\n\n\tconst {\n\t\tid,\n\t\tsrc,\n\t\theight,\n\t} = attributes;\n\tconst { ffmpeg_exists } = options;\n\tconst [ videoFormats, setVideoFormats ] = useState();\n\tconst [ encodeMessage, setEncodeMessage ] = useState();\n\tconst [ itemToDelete, setItemToDelete ] = useState( null ); // { type: 'file'/'job', formatId: string, jobId?: int, childId?: int, name?: string }\n\tconst [ deleteInProgress, setDeleteInProgress ] = useState( null ); // Stores formatId or jobId being deleted\n\tconst [ isConfirmOpen, setIsConfirmOpen ] = useState( false );\n\tconst [ isLoading, setIsLoading ] = useState( false );\n\tconst [ isEncoding, setIsEncoding ] = useState( false );\n\tconst checkboxTimerRef = useRef(null);\n\tconst progressTimerRef = useRef(null);\n\tconst queueApiPath = '/videopack/v1/queue';\n\n\tconst fetchVideoFormats = () => {\n\t\tif ( ! id ) return; // Don't fetch if there's no ID.\n\t\tapiFetch( { path: '/videopack/v1/formats/' + id } ).then( ( response ) => {\n\t\t\tsetVideoFormats( response );\n\t\t\t// Initialize .checked property if not present\n\t\t\tif ( response && typeof response === 'object' ) {\n\t\t\t\tconst initializedFormats = { ...response };\n\t\t\t\tObject.keys( initializedFormats ).forEach( ( key ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tinitializedFormats[ key ] &&\n\t\t\t\t\t\ttypeof initializedFormats[ key ].checked === 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\tinitializedFormats[ key ].checked = false;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tsetVideoFormats( initializedFormats );\n\t\t\t}\n\t\t} );\n\t};\n\n\tuseEffect(() => {\n\t\tfetchVideoFormats();\n\t}, [id]); // Fetch formats when the attachment ID changes\n\n\tconst isEmpty = ( value ) => {\n\n\t\tif( value === false\n\t\t\t|| value === null\n\t\t\t|| ( Array.isArray(value) && value.length === 0 )\n\t\t\t|| ( typeof value === 'object' && Object.keys(value).length === 0 )\n\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tconst deepEqual = ( obj1, obj2 ) => {\n\n\t\tif (obj1 === obj2) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (typeof obj1 !== 'object'\n\t\t\t|| typeof obj2 !== 'object'\n\t\t\t|| obj1 === null\n\t\t\t|| obj2 === null\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst keys1 = Object.keys(obj1);\n\t\tconst keys2 = Object.keys(obj2);\n\n\t\tif (keys1.length !== keys2.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (const key of keys1) {\n\t\t\tif (!keys2.includes(key)\n\t\t\t\t|| !deepEqual(obj1[key], obj2[key])\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tconst siteSettings = useSelect( ( select ) => {\n\t\treturn select( 'core' ).getSite();\n\t}, [] );\n\n\tconst checkIsEncoding = ( formats ) => {\n\t\tif ( ! videoFormats ) {\n\t\t\treturn false;\n\t\t}\n\t\t// Check if any format has status 'processing' or 'encoding'\n\t\treturn Object.values(videoFormats).some(\n\t\t\t(format) => format.hasOwnProperty('encoding_now') && format.encoding_now\n\t\t);\n\t}\n\n\tconst incrementEncodeProgress = () => {\n\t\tconsole.log('progress');\n\t\tif ( isEncoding ) { // Use the state variable\n\t\t\tconst updatedVideoFormats = Object.entries(videoFormats).reduce((updated, [key, format]) => {\n\t\t\t\tif ( ! isEmpty( format.progress ) ) {\n\n\t\t\t\t\tconst currentSeconds = format.progress.current_seconds + ( parseInt( format.progress.fps ) / 30 );\n\n\t\t\t\t\tlet percentDone = Math.round( format.progress.current_seconds / parseInt( format.progress.duration ) * 100 );\n\t\t\t\t\tif ( percentDone > 100 ) {\n\t\t\t\t\t\tpercentDone = 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( percentDone != 0 ) {\n\t\t\t\t\t\tformat.progress.elapsed = format.progress.elapsed + 1;\n\t\t\t\t\t\tif ( ! isNaN( format.progress.remaining ) ) {\n\t\t\t\t\t\t\tif ( format.progress.remaining > 0 ) {\n\t\t\t\t\t\t\t\tformat.progress.remaining--;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tformat.progress.remaing = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tupdated[key] = {\n\t\t\t\t\t\t...format,\n\t\t\t\t\t\tprogress: {\n\t\t\t\t\t\t\t...format.progress,\n\t\t\t\t\t\t\tcurrent_seconds: currentSeconds,\n\t\t\t\t\t\t\telapsed: format.progress.elapsed,\n\t\t\t\t\t\t\tpercent_done: percentDone,\n\t\t\t\t\t\t\tremaining: format.progress.remaining,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tupdated[key] = format;\n\t\t\t\t}\n\t\t\t\treturn updated;\n\t\t\t}, {} );\n\n\t\t\tsetVideoFormats(updatedVideoFormats);\n\t\t}\n\t}\n\n\tconst pollVideoFormats = () => {\n\t\tconsole.log('update');\n\t\tif ( src && id ) {\n\t\t\tapiFetch({ path: '/videopack/v1/formats/' + id, method: 'GET' })\n\t\t\t.then( response => {\n\t\t\t\tif ( ! deepEqual( videoFormats, response ) ) {\n\t\t\t\t\tsetVideoFormats(response);\n\t\t\t\t}\n\t\t\t} ).catch(error => console.error(\"Error polling video formats:\", error));\n\t\t}\n\t}\n\n\tuseEffect( () => {\n\t\t// Set initial encoding state based on fetched formats\n\t\tsetIsEncoding( checkIsEncoding( videoFormats ) );\n\n\t\t// Schedule polling for updates\n\t\tcheckboxTimerRef.current = setTimeout( pollVideoFormats, 5000 );\n\n\t\t// Manage progress timer based on encoding state\n\t\tif ( ! isEncoding ) {\n\t\t\tclearInterval(progressTimerRef.current);\n\t\t\tprogressTimerRef.current = null;\n\n\t\t\treturn;\n\t\t}\n\t\tif (progressTimerRef.current === null) {\n\t\t\tprogressTimerRef.current = setInterval(\tincrementEncodeProgress, 1000 );\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (progressTimerRef.current !== null) {\n\t\t\t\tclearInterval(progressTimerRef.current);\n\t\t\t\tprogressTimerRef.current = null;\n\t\t\t}\n\t\t\tif (checkboxTimerRef.current !== null) {\n\t\t\t\tclearTimeout(checkboxTimerRef.current);\n\t\t\t\tcheckboxTimerRef.current = null;\n\t\t\t}\n\t\t};\n\n\t}, [videoFormats, isEncoding] ); // Depend on videoFormats and isEncoding state\n\n\tconst handleFormatCheckbox = ( event, format ) => {\n\t\tsetVideoFormats(prevVideoFormats => {\n\t\t\tconst updatedFormats = { ...prevVideoFormats };\n\t\t\tif (updatedFormats[format]) {\n\t\t\t\tupdatedFormats[format].checked = event;\n\t\t\t}\n\t\t\treturn updatedFormats;\n\t\t});\n\t\t// Note: Checkbox state is now purely UI. Saving to DB happens on \"Encode\" button click.\n\t}\n\n\tconst onSelectFormat = ( media ) => {\n\t\tconsole.log('select');\n\t}\n\n\tconst handleEnqueue = () => {\n\n\t\tsetIsLoading(true);\n\n\t\t// Get list of format IDs that are checked and available\n\t\tconst formatsToEncode = Object.entries( videoFormats )\n\t\t\t.filter( ( [ key, value ] ) => value.checked && value.is_available && value.status !== 'queued' && value.status !== 'processing' && value.status !== 'completed' )\n\t\t\t.reduce( ( acc, [ key, value ] ) => {\n\t\t\t\tacc[key] = true; // Backend expects an object { format_id: true, ... }\n\t\t\t\treturn acc;\n\t\t\t}, {} );\n\n\n\t\tapiFetch({\n\t\t\tpath: queueApiPath + '/' + id,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: {\n\t\t\t\turl: src,\n\t\t\t\tformats: formatsToEncode, // Send array of format IDs\n\t\t\t\tparent_id: attachmentRecord?.record?.post\n\t\t\t}\n\t\t})\n\t\t.then( response => {\n\t\t\tconsole.log(response);\n\t\t\tconst queueMessage = () => {\n\n\t\t\t\tconst queueList = ( () => {\n\t\t\t\t\tif ( response?.enqueue_data?.encode_list ) {\n\t\t\t\t\t\treturn new Intl.ListFormat(\n\t\t\t\t\t\t\tsiteSettings?.language ? siteSettings.language.replace('_', '-') : 'en-US',\n\t\t\t\t\t\t\t{ style: \"long\", type: \"conjunction\" }\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.format( Object.values( response?.enqueue_data?.encode_list ) );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn '';\n\t\t\t\t})();\n\n\t\t\t\tif ( response?.enqueue_data?.new_queue_position == false ) {\n\n\t\t\t\t\tconst queuePosition = response?.enqueue_data?.existing_queue_position;\n\n\t\t\t\t\tif ( ! JSON.stringify(response?.enqueue_data?.encode_list) !== '[]' ) {\n\n\t\t\t\t\t\treturn sprintf( __( '%1$s updated in existing queue entry in position %2$s.' ),\n\t\t\t\t\t\t\tqueueList,\n\t\t\t\t\t\t\tqueuePosition\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\treturn sprintf( __('Video is already %1$s in the queue.'), queuePosition );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( response?.enqueue_data?.new_queue_position === 1 ) {\n\n\t\t\t\t\t\treturn __( 'Starting...' );\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst queuePosition = response?.enqueue_data?.new_queue_position;\n\n\t\t\t\t\t\treturn sprintf( __( '%1$s added to queue in position %2$s.' ),\n\t\t\t\t\t\t\tqueueList,\n\t\t\t\t\t\t\tqueuePosition\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetEncodeMessage( queueMessage() );\n\t\t\tsetIsLoading( false );\n\t\t\tfetchVideoFormats(); // Re-fetch to update statuses\n\n\t\t} )\n\t\t.catch( error => {\n\t\t\tconsole.error(error);\n\t\t\tsetEncodeMessage( sprintf( __( 'Error enqueueing: %s' ), error.message ) );\n\t\t\tsetIsLoading( false );\n\t\t\tfetchVideoFormats(); // Re-fetch to ensure UI is consistent\n\t\t} );\n\t}\n\n\tconst formatPickable = ( format ) => {\n\t\tif ( videoFormats && videoFormats[format]\n\t\t\t&& (\n\t\t\t\t// A format is \"pickable\" if the file doesn't exist AND it's not already queued/processing/completed\n\t\t\t\t( ! videoFormats[format].exists && videoFormats[format].status === 'not_queued' )\n\t\t\t\t|| videoFormats[format].was_picked\n\t\t\t)\n\t\t\t&& ! videoFormats[format].encoding_now\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// Deletes the actual media file (WP Attachment)\n\tconst handleFileDelete = ( formatId ) => {\n\t\tconst formatData = videoFormats?.[formatId];\n\t\tif ( !formatData || !formatData.child_id ) {\n\t\t\tsetEncodeMessage( __( 'Error: Cannot delete file, missing attachment ID.' ) );\n\t\t\tconsole.error('Cannot delete file: Missing child_id for format', formatId);\n\t\t\treturn;\n\t\t}\n\t\tsetDeleteInProgress(formatId); // Mark this formatId as being deleted\n\t\tapiFetch({\n\t\t\tpath: `/wp/v2/media/${formatData.child_id}?force=true`,\n\t\t\tmethod: 'DELETE',\n\t\t  }).then(() => {\n\t\t\tsetEncodeMessage( __( 'File deleted successfully.' ) );\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status from backend\n\t\t  }).catch((error) => {\n\t\t\tconsole.error('File delete failed:', error);\n\t\t\tsetEncodeMessage( sprintf( __( 'Error deleting file: %s' ), error.message ) );\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t  }).finally(() => {\n\t\t\tsetDeleteInProgress(null);\n\t\t  });\n\t}\n\n\t// Deletes/Cancels a queue job\n\tconst handleJobDelete = ( jobId ) => {\n\t\tif ( !jobId ) {\n\t\t\tsetEncodeMessage( __( 'Error: Cannot delete job, missing job ID.' ) );\n\t\t\tconsole.error('Cannot delete job: Missing job ID');\n\t\t\treturn;\n\t\t}\n\t\tsetDeleteInProgress(jobId); // Mark this jobId as being deleted\n\t\tapiFetch({\n\t\t\tpath: `${queueApiPath}/${jobId}`,\n\t\t\tmethod: 'DELETE',\n\t\t}).then((response) => {\n\t\t\tsetEncodeMessage( __( 'Job cancelled/deleted successfully.' ) );\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t}).catch((error) => {\n\t\t\tconsole.error('Job delete failed:', error);\n\t\t\tsetEncodeMessage( sprintf( __( 'Error deleting job: %s' ), error.message ) );\n\t\t\tfetchVideoFormats(); // Re-fetch to get the latest status\n\t\t}).finally(() => {\n\t\t\tsetDeleteInProgress(null);\n\t\t});\n\t}\n\n\n\tconst openConfirmDialog = ( type, formatId ) => {\n\t\tconst formatData = videoFormats?.[formatId];\n\t\tif (!formatData) return;\n\n\t\tsetItemToDelete({\n\t\t\ttype, // 'file' or 'job'\n\t\t\tformatId,\n\t\t\tjobId: formatData.job_id,\n\t\t\tchildId: formatData.child_id,\n\t\t\tname: formatData.name,\n\t\t});\n\t\tsetIsConfirmOpen( true );\n\t}\n\n\tconst handleConfirm = () => {\n\t\tsetIsConfirmOpen( false );\n\t\tif (itemToDelete) {\n\t\t\tif (itemToDelete.type === 'file' && itemToDelete.childId) {\n\t\t\t\thandleFileDelete( itemToDelete.formatId );\n\t\t\t} else if (itemToDelete.type === 'job' && itemToDelete.jobId) {\n\t\t\t\thandleJobDelete( itemToDelete.jobId );\n\t\t\t}\n\t\t}\n\t\tsetItemToDelete( null );\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetItemToDelete( null );\n\t\tsetIsConfirmOpen( false );\n\t};\n\n\tconst convertToTimecode = ( time ) => {\n\t\tif ( time === null || time === undefined || isNaN( time ) ) {\n\t\t\treturn '--:--';\n\t\t}\n\t\tconst padZero = (num) => Math.floor(num).toString().padStart(2, '0');\n\n\t\tconst h = Math.floor(time / 3600);\n\t\tconst m = Math.floor((time % 3600) / 60);\n\t\tconst s = Math.floor(time % 60);\n\n\t\tconst hh = h > 0 ? padZero(h) + ':' : '';\n\t\tconst mm = padZero(m);\n\t\tconst ss = padZero(s);\n\n\t\treturn hh + mm + ':' + ss;\n\t}\n\n\tconst EncodeProgress = ( { format } ) => {\n\n\t\tconst formatData = videoFormats?.[format];\n\n\t\tif ( formatData?.status === 'processing' && ! isEmpty( formatData?.progress ) ) {\n\n\t\t\tconst percentText = sprintf( __( '%d%%' ), formatData.progress.percent_done );\n\t\t\tconst onCancelJob = () => {\n\t\t\t\tif ( formatData.job_id ) {\n\t\t\t\t\thandleJobDelete( formatData.job_id );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn(\n\t\t\t\t<div className='videopack-encode-progress'>\n\t\t\t\t\t<div className='videopack-meter'>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName='videopack-meter-bar'\n\t\t\t\t\t\t\tstyle={ { width: percentText } }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className='videopack-meter-text'>\n\t\t\t\t\t\t\t\t{ formatData.progress.percent_done > 20 && percentText }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ formatData.job_id && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ onCancelJob }\n\t\t\t\t\t\t\tvariant='secondary'\n\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\tisBusy={ deleteInProgress === formatData.job_id }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className='videopack-encode-progress-small-text'>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ __( 'Elapsed:' ) + ' ' + convertToTimecode( formatData.progress.elapsed ) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ __( 'Remaining:' ) + ' ' + convertToTimecode( formatData.progress.remaining ) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ __( 'fps:' ) + ' ' + formatData.progress.fps }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t// Display error message if status is failed\n\t\tif ( formatData?.status === 'failed' && ! isEmpty( formatData?.error_message ) ) {\n\t\t\treturn (\n\t\t\t\t<div className='videopack-encode-error'>\n\t\t\t\t\t{ sprintf( __( 'Error: %s' ), formatData.error_message ) }\n\t\t\t\t\t{ formatData.job_id && ( // Allow deleting failed jobs\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ () => openConfirmDialog( 'job', format ) }\n\t\t\t\t\t\t\tvariant='link'\n\t\t\t\t\t\t\ttext={ __('Delete Job') }\n\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\tisBusy={ deleteInProgress === formatData.job_id }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n\n\tconst somethingToEncode = () => {\n\t\tif ( videoFormats ) {\n\t\t\t// Check if any format is checked AND available AND not already in a terminal/pending state\n\t\t\treturn Object.values(videoFormats).some(\n\t\t\t\t(obj) => obj.checked && obj.is_available && obj.status !== 'queued' && obj.status !== 'processing' && obj.status !== 'completed' && obj.status !== 'pending_replacement'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst encodeButtonTitle = () => {\n\t\tif ( somethingToEncode() ) {\n\t\t\treturn isLoading ? __( 'Loading...' ) : __( 'Encode selected formats' );\n\t\t}\n\t\telse {\n\t\t\treturn __( 'Select formats to encode' );\n\t\t}\n\t}\n\n\tconst getDisplayFormats = () => {\n\t\tif ( !videoFormats ) return {};\n\t\tlet displayFormats = { ...videoFormats };\n\n\t\tif ( options.hide_video_formats && options.encode ) {\n\t\t\tdisplayFormats = Object.fromEntries(\n\t\t\t\tObject.entries(displayFormats).filter( ( [key, format] ) =>\n\t\t\t\t\t( options.encode[key] === true ) || ( format.status !== 'not_queued' )\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tif ( attachmentRecord?.record?.media_details?.height ) {\n\t\t\tconst sourceHeight = attachmentRecord.record.media_details.height;\n\t\t\tdisplayFormats = Object.fromEntries(\n\t\t\t\tObject.entries(displayFormats).filter( ( [key, format] ) =>\n\t\t\t\t\t!format.height || format.height <= sourceHeight || format.replaces_original === true\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\treturn displayFormats;\n\t};\n\n\tconst displayFormats = getDisplayFormats();\n\tconst isEncodeButtonDisabled = isLoading || !ffmpeg_exists || !somethingToEncode();\n\n\tconst confirmDialogMessage = () => {\n\t\tif (!itemToDelete) return '';\n\t\tif (itemToDelete.type === 'file') {\n\t\t\treturn sprintf( __( 'You are about to permanently delete the encoded %s video file from your site. This action cannot be undone.' ), itemToDelete.name );\n\t\t}\n\t\tif (itemToDelete.type === 'job') {\n\t\t\treturn sprintf( __( 'You are about to permanently delete the encoding job for the %s video. This will also delete the encoded video file if it exists (if created by this job and not yet a separate attachment). This action cannot be undone.' ), itemToDelete.name );\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t<PanelBody title={ __( 'Additional Formats' ) }>\n\t\t\t<MediaUploadCheck>\n\t\t\t\t<PanelRow>\n\t\t\t\t\t{ videoFormats\n\t\t\t\t\t\t? <>\n\t\t\t\t\t\t<ul className={ `videopack-formats-list${ ffmpeg_exists ? '' : ' no-ffmpeg' }` }>\n\t\t\t\t\t\t\t{ Object.keys( displayFormats ).map( ( formatId ) => {\n\t\t\t\t\t\t\t\tconst formatData = displayFormats[formatId];\n\t\t\t\t\t\t\t\tif (!formatData) return null; // Should not happen if displayFormats is derived correctly\n\n\t\t\t\t\t\t\t\tconst isCheckboxDisabled = !ffmpeg_exists || !formatData.is_available || formatData.status !== 'not_queued';\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={ formatId } >\n\t\t\t\t\t\t\t\t\t{ ( ffmpeg_exists && formatData.is_available && formatData.status === 'not_queued' )\n\t\t\t\t\t\t\t\t\t\t? <CheckboxControl\n\t\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\t\tclassName='videopack-format'\n\t\t\t\t\t\t\t\t\t\t\tlabel={ formatData.name }\n\t\t\t\t\t\t\t\t\t\t\tchecked={ formatData.checked }\n\t\t\t\t\t\t\t\t\t\t\tdisabled={ isCheckboxDisabled }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ ( event ) => handleFormatCheckbox( event, formatId ) }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t: <span className='videopack-format'>\n\t\t\t\t\t\t\t\t\t\t\t{ formatData.name }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{ formatData.status !== 'not_queued' &&\n\t\t\t\t\t\t\t\t\t\t<span className='videopack-format-status'>\n\t\t\t\t\t\t\t\t\t\t\t{ formatData.status_l10n }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{ formatData.exists && formatData.status === 'not_queued' && !formatData.was_picked && (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => onSelectFormat( formatData ) } // Implement onSelectFormat for linking\n\t\t\t\t\t\t\t\t\t\t\tclassName='videopack-format-button'\n\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\ttitle={ __( 'Link existing file' ) }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Link' ) }\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{ formatData.was_picked && ( // Show \"Replace\" if it was manually picked/linked\n\t\t\t\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\t\t\t\ttitle={ sprintf( __( 'Replace %s' ), formatData.name ) }\n\t\t\t\t\t\t\t\t\t\t\tonSelect={ onSelectFormat } // Implement replace logic\n\t\t\t\t\t\t\t\t\t\t\tallowedTypes={ ['video'] }\n\t\t\t\t\t\t\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='videopack-format-button'\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={ __( 'Replace file' ) }\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Replace' ) }\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{ formatData.deletable && formatData.child_id && ( // Delete FILE button\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tisBusy={ deleteInProgress === formatId }\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => openConfirmDialog( 'file', formatId ) }\n\t\t\t\t\t\t\t\t\t\t\tvariant='link'\n\t\t\t\t\t\t\t\t\t\t\ttext={ __('Delete File') }\n\t\t\t\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{ (formatData.status === 'processing' || formatData.status === 'failed') &&\n\t\t\t\t\t\t\t\t\t\t<EncodeProgress format={ formatId } />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}) }\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ConfirmDialog\n\t\t\t\t\t\t\tisOpen={ isConfirmOpen }\n\t\t\t\t\t\t\tonConfirm={ handleConfirm }\n\t\t\t\t\t\t\tonCancel={ handleCancel }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ confirmDialogMessage() }\n\t\t\t\t\t\t</ConfirmDialog>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t: <><Spinner /></>\n\t\t\t\t\t}\n\t\t\t\t</PanelRow>\n\t\t\t\t{ ( ffmpeg_exists && videoFormats ) &&\n\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={ handleEnqueue }\n\t\t\t\t\t\t\ttitle={ encodeButtonTitle() }\n\t\t\t\t\t\t\ttext={ __( 'Encode' ) }\n\t\t\t\t\t\t\tdisabled={ isEncodeButtonDisabled }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{ isLoading && <Spinner /> }\n\t\t\t\t\t\t{ encodeMessage &&\n\t\t\t\t\t\t\t<span className='videopack-encode-message'>\n\t\t\t\t\t\t\t\t{ encodeMessage }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t}\n\t\t\t\t\t</PanelRow>\n\t\t\t\t}\n\t\t\t</MediaUploadCheck>\n\t\t</PanelBody>\n\t\t</>\n\t);\n}\n\nexport default AdditionalFormats;\n","import apiFetch from '@wordpress/api-fetch';\nimport {\n\tBaseControl,\n\tButton,\n\tDashicon,\n\tIcon,\n\tPanelBody,\n\tRangeControl,\n\tSpinner,\n\tTextControl,\n} from '@wordpress/components';\nimport {\n\tMediaUpload,\n\tMediaUploadCheck,\n\t__experimentalGetElementClassName,\n} from '@wordpress/block-editor';\nimport {\n\tuseCallback,\n\tuseRef,\n\tuseEffect,\n\tuseState,\n} from '@wordpress/element';\nimport { uploadMedia } from '@wordpress/media-utils';\nimport { __, _x } from '@wordpress/i18n';\nimport { addQueryArgs, getFilename } from '@wordpress/url';\nimport { chevronUp, chevronDown } from '@wordpress/icons';\nimport './Thumbnails.scss';\n\nconst Thumbnails = ( {\n\tsetAttributes,\n\tattributes,\n\tattachmentRecord,\n\toptions,\n} ) => {\n\tconst { id, total_thumbnails, src, poster, poster_id } = attributes;\n\tconst thumbVideoPanel = useRef();\n\tconst videoRef = useRef();\n\tconst currentThumb = useRef();\n\tconst posterImageButton = useRef();\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [isOpened, setIsOpened] = useState(false);\n\tconst [currentTime, setCurrentTime] = useState(false);\n\tconst [thumbChoices, setThumbChoices] = useState([]);\n\tconst [isSaving, setIsSaving] = useState(false);\n\tconst thumbApiPath = '/videopack/v1/thumbs';\n\n\tconst VIDEO_POSTER_ALLOWED_MEDIA_TYPES = [ 'image' ];\n\n\tuseEffect( () => {\n\t\tif ( ! poster ) {\n\t\t\tvideoRef.current.addEventListener('loadedmetadata', () => { handleGenerate( 'generate' ) } );\n\t\t}\n\t}, [videoRef.current] );\n\n\tfunction onSelectPoster( image ) {\n\t\tsetAttributes( { poster: image.url, poster_id: Number(image.id) } );\n\t}\n\n\tfunction onRemovePoster() {\n\t\tsetAttributes( { poster: undefined } );\n\n\t\t// Move focus back to the Media Upload button.\n\t\tposterImageButton.current.focus();\n\t}\n\n\tconst handleGenerate = async(type = 'generate') => {\n\t\tsetIsSaving(true);\n\t\tif ( options?.ffmpeg_exists\n\t\t\t&& ! options?.browser_thumbnails\n\t\t) {\n\t\t\tconst newThumbImages = [];\n\t\t\tfor (let i = 1; i <= Number(total_thumbnails); i++) {\n\t\t\t\tconst response = await generateThumb(i, type);\n\t\t\t\tconst thumb = {\n\t\t\t\t\tsrc: response.real_thumb_url,\n\t\t\t\t\ttype: 'ffmpeg',\n\t\t\t\t};\n\t\t\t\tnewThumbImages.push(thumb);\n\t\t\t\tsetThumbChoices([...newThumbImages]); // Update incrementally\n\t\t\t}\n\t\t} else {\n\t\t\tgenerateThumbCanvases(type);\n\t\t}\n\t}\n\n\tconst generateThumbCanvases = useCallback(async (type) => {\n\n\t\tconst thumbsInt = Number( total_thumbnails );\n\n\t\tconst newThumbCanvases = [];\n\t\tconst timePoints = [...Array(thumbsInt)].map(\n\t\t\t(_, i) => {\n\t\t\t\tlet movieoffset = ( ( i + 1 ) / ( thumbsInt + 1 ) ) * videoRef.current.duration;\n\t\t\t\tif ( type === 'random' ) {\n\t\t\t\t\tconst randomOffset = Math.floor(Math.random() * (videoRef.current.duration / thumbsInt));\n\t\t\t\t\tmovieoffset = Math.max(movieoffset - randomOffset, 0);\n\t\t\t\t}\n\t\t\t\treturn movieoffset;\n\t\t\t}\n\t\t);\n\n\t\tconst timeupdateListener = () => {\n\n\t\t\tlet thumb;\n\t\t\tdrawCanvasThumb() // This now returns a Promise resolving to a canvas object\n\t\t\t\t.then( ( canvas ) => {\n\t\t\t\t\ttry{\n\t\t\t\t\t\tthumb = {\n\t\t\t\t\t\t\tsrc: canvas.toDataURL(),\n\t\t\t\t\t\t\ttype: 'canvas',\n\t\t\t\t\t\t\tcanvasObject: canvas, // Store the canvas object for later upload\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tvideoRef.current.removeEventListener('timeupdate', timeupdateListener);\n\t\t\t\t\t\tsetIsSaving(false);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tnewThumbCanvases.push(thumb);\n\t\t\t\t\tsetThumbChoices([...newThumbCanvases]);\n\t\t\t\t\tif (newThumbCanvases.length === thumbsInt) {\n\t\t\t\t\t\tvideoRef.current.removeEventListener('timeupdate', timeupdateListener);\n\t\t\t\t\t\tsetIsSaving(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvideoRef.current.currentTime = timePoints[newThumbCanvases.length];\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error('Error processing canvas:', error);\n\t\t\t\t});\n\t\t}\n\n\t\tvideoRef.current.addEventListener('timeupdate', timeupdateListener);\n\t\tvideoRef.current.currentTime = timePoints[0];\n\t} );\n\n\t// function to toggle video playback\n\tconst togglePlayback = () => {\n\t\tif ( videoRef.current?.paused ) {\n\t\t\tvideoRef.current.play();\n\t\t\tsetIsPlaying(true);\n\t\t} else {\n\t\t\tvideoRef.current?.pause();\n\t\t\tsetIsPlaying(false);\n\t\t}\n\t}\n\n\tconst pauseVideo = () => {\n\t\tvideoRef.current.pause();\n\t\tsetIsPlaying( false );\n\t}\n\n\tconst playVideo = () => {\n\t\tvideoRef.current.play();\n\t\tsetIsPlaying( true );\n\t}\n\n\t// function to handle slider changes\n\tconst handleSliderChange = (value) => {\n\t\tvideoRef.current.currentTime = value;\n\t\tsetCurrentTime(value);\n\t}\n\n\tuseEffect(() => {\n\t\tconst handleTimeUpdate = () => {\n\t\t\tsetCurrentTime(videoRef.current.currentTime); // update currentTime state variable\n\t\t};\n\n\t\tvideoRef.current?.addEventListener('timeupdate', handleTimeUpdate);\n\t\treturn () => {\n\t\t\tvideoRef.current?.removeEventListener('timeupdate', handleTimeUpdate);\n\t\t};\n\t}, []);\n\n\tconst drawCanvasThumb = async () => {\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.width = videoRef.current.videoWidth;\n\t\tcanvas.height = videoRef.current.videoHeight;\n\t\tconst ctx = canvas.getContext('2d');\n\t\tctx.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n\n\t\tif ( options?.ffmpeg_thumb_watermark?.url ) {\n\t\t\ttry {\n\t\t\t\tconst watermarkCanvas = drawWatermarkOnCanvas( canvas );\n\t\t\t\treturn watermarkCanvas;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error drawing watermark:', error);\n\t\t\t}\n\t\t} else {\n\t\t\treturn canvas;\n\t\t}\n\t}\n\n\tconst handleSaveThumbnail = ( event, thumb, index ) => {\n\t\tevent.currentTarget.classList.add('saving');\n\t\tsetIsSaving(true);\n\t\tif( thumb.type === 'ffmpeg' ) {\n\t\t\tsetImgAsPoster( thumb.src ); // Pass the canvas object directly\n\t\t} else {\n\t\t\tsetCanvasAsPoster( thumb.canvasObject, index ); // Pass the canvas object directly\n\t\t}\n\t}\n\n\tconst handleSaveAllThumbnails = async () => {\n\t\tsetIsSaving(true); // Show spinner for the whole operation\n\t\tconst firstThumbType = thumbChoices[0]?.type; // Assuming all generated thumbs are of the same type\n\n\t\tif (firstThumbType === 'canvas') {\n\t\t\t// For canvas thumbnails, upload each one individually using uploadMedia\n\t\t\tfor (const [index, thumb] of thumbChoices.entries()) {\n\t\t\t\ttry {\n\t\t\t\t\tconst videoFilename = getFilename(src);\n\t\t\t\t\tconst thumbBasename = videoFilename.substring(0, videoFilename.lastIndexOf('.')) || videoFilename;\n\n\t\t\t\t\tconst file = await new Promise(resolve => thumb.canvasObject.toBlob(blob => {\n\t\t\t\t\t\tresolve(new File([blob], `${thumbBasename}_thumb_canvas_${index + 1}.png`, { type: \"image/png\" }));\n\t\t\t\t\t}, 'image/png'));\n\n\t\t\t\t\tawait uploadMedia({ // No need to store response, just upload\n\t\t\t\t\t\tfilesList: [file],\n\t\t\t\t\t\tallowedTypes: ['image/png'],\n\t\t\t\t\t\ttitle: `${thumbBasename} ${__('thumbnail')} ${index + 1}`,\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(`Error uploading canvas thumbnail ${index + 1}:`, error);\n\t\t\t\t\t// Optionally, show a notice for individual failures.\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetThumbChoices([]); // Clear choices after saving\n\t\t} else if (firstThumbType === 'ffmpeg') {\n\t\t\t// For FFmpeg thumbnails, send their temporary URLs to the server to be saved\n\t\t\tconst thumbUrls = thumbChoices.map(thumb => thumb.src);\n\t\t\ttry {\n\t\t\t\tawait apiFetch({\n\t\t\t\t\tpath: `${thumbApiPath}/save_all`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tattachment_id: id,\n\t\t\t\t\t\tthumb_urls: thumbUrls,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsetThumbChoices([]); // Clear choices after saving\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error saving all FFmpeg thumbnails:', error);\n\t\t\t}\n\t\t}\n\t\tsetIsSaving(false); // Hide spinner after all operations complete\n\t};\n\n\tfunction drawWatermarkOnCanvas( canvas ) {\n\t\treturn new Promise(async ( resolve, reject ) => {\n\t\t\ttry {\n\t\t\t\tif ( ! options?.ffmpeg_thumb_watermark?.url ) {\n\t\t\t\t\treject(new Error('No thumbnail watermark set'));\n\t\t\t\t}\n\t\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\t\tconst watermarkImage = new Image();\n\t\t\t\tconst {\n\t\t\t\t\turl,\n\t\t\t\t\tscale,\n\t\t\t\t\talign,\n\t\t\t\t\tx,\n\t\t\t\t\tvalign,\n\t\t\t\t\ty,\n\t\t\t\t} = options.ffmpeg_thumb_watermark;\n\n\t\t\t\twatermarkImage.crossOrigin = 'Anonymous';\n\t\t\t\twatermarkImage.src = url;\n\n\t\t\t\twatermarkImage.onload = () => {\n\t\t\t\t\tconst canvasWidth = canvas.width;\n\t\t\t\t\tconst canvasHeight = canvas.height;\n\t\t\t\t\tconst watermarkWidth = (canvasWidth * scale) / 100;\n\t\t\t\t\tconst watermarkHeight = (canvasHeight * scale) / 100;\n\n\t\t\t\t\tconst horizontalOffset = (canvasWidth * x) / 100;\n\t\t\t\t\tconst verticalOffset = (canvasHeight * y) / 100;\n\n\t\t\t\t\tlet xPos, yPos;\n\n\t\t\t\t\tswitch (align) {\n\t\t\t\t\t\tcase 'left':\n\t\t\t\t\t\txPos = horizontalOffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'center':\n\t\t\t\t\t\txPos = (canvasWidth - watermarkWidth) / 2 + horizontalOffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'right':\n\t\t\t\t\t\txPos = canvasWidth - watermarkWidth - horizontalOffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\treject( new Error( __( 'Invalid horizontal alignment provided' ) ) );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (valign) {\n\t\t\t\t\t\tcase 'top':\n\t\t\t\t\t\tyPos = verticalOffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'center':\n\t\t\t\t\t\tyPos = (canvasHeight - watermarkHeight) / 2 + verticalOffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'bottom':\n\t\t\t\t\t\tyPos = canvasHeight - watermarkHeight - verticalOffset;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\treject( new Error( __( 'Invalid vertical alignment provided') ) );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.drawImage(watermarkImage, xPos, yPos, watermarkWidth, watermarkHeight);\n\t\t\t\t\tresolve( canvas );\n\t\t\t\t};\n\n\t\t\t\twatermarkImage.onerror = () => {\n\t\t\t\t\treject(new Error( __('Failed to load watermark image') ) );\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst setCanvasAsPoster = async( canvasObject, thumbnailIndex = null ) => {\n\n\t\tconst videoFilename = getFilename( src );\n\t\tconst thumbBasename = videoFilename.substring(0, videoFilename.lastIndexOf('.')) || videoFilename;\n\t\tconst filenameSuffix = thumbnailIndex !== null ? `_thumb_canvas_${thumbnailIndex + 1}.png` : '_thumb_canvas.png';\n\t\tconst titleSuffix = thumbnailIndex !== null ? ` ${__('thumbnail')} ${thumbnailIndex + 1}` : ` ${__('thumbnail')}`;\n\n\t\ttry {\n\t\t\tconst file = await new Promise(resolve => canvasObject.toBlob(blob => {\n\t\t\t\tresolve(new File([blob], `${thumbBasename}${filenameSuffix}`, { type: \"image/png\" }));\n\t\t\t}, 'image/png'));\n\n\t\t\tsetIsSaving(true);\n\t\t\t// uploadMedia returns a promise that resolves with the media object.\n\t\t\tconst media = await uploadMedia( {\n\t\t\t\tfilesList: [ file ],\n\t\t\t\tallowedTypes: [ 'image/png' ],\n\t\t\t\ttitle: `${thumbBasename}${titleSuffix}`,\n\t\t\t} );\n\t\t\tsetPosterData(media.url, media.id);\n\t\t\tsetIsSaving(false);\n\t\t} catch ( error ) {\n\t\t\tconsole.error( __('Upload error:'), error );\n\t\t\t// createErrorNotice( error, { type: 'snackbar' } ); // Assuming createErrorNotice is available if needed\n\t\t}\n\t}\n\n\tconst setPosterData = ( new_poster, new_poster_id ) => {\n\t\tsetAttributes( { poster: new_poster, poster_id: new_poster_id } );\n\t\tsetThumbChoices([]);\n\t\tattachmentRecord?.edit( {\n\t\t\tfeatured_media: new_poster_id ? Number(new_poster_id) : null,\n\t\t\tmeta: {\n\t\t\t\t'_kgflashmediaplayer-poster': new_poster,\n\t\t\t\t'_kgflashmediaplayer-poster-id': Number(new_poster_id),\n\t\t\t},\n\t\t} )\n\t\t.then( response => {\n\t\t\tattachmentRecord.save()\n\t\t\t.then( response => {\n\t\t\t\tconsole.log(attachmentRecord);\n\t\t\t});\n\t\t} )\n\t\t.catch( error => {\n\t\t\tconsole.error(error);\n\t\t});\n\t}\n\n\tconst setImgAsPoster = async( thumb_url, index ) => {\n\t\ttry{\n\t\t\tconst response = await apiFetch({\n\t\t\t\tpath: thumbApiPath,\n\t\t\t\tmethod: 'PUT',\n\t\t\t\tdata: {\n\t\t\t\t\tattachment_id: id,\n\t\t\t\t\tthumburl: thumb_url,\n\t\t\t\t\tthumbnail_index: index,\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetPosterData(response.thumb_url, response.thumb_id);\n\t\t} catch ( error ) {\n\t\t\tconsole.error( error );\n\t\t}\n\t}\n\n\tconst generateThumb = async( i, type ) => {\n\t\ttry{\n\t\t\tconst path = addQueryArgs(\n\t\t\t\tthumbApiPath,\n\t\t\t\t{\n\t\t\t\t\turl: src,\n\t\t\t\t\ttotal_thumbnails: total_thumbnails,\n\t\t\t\t\tthumbnail_index: i,\n\t\t\t\t\tattachment_id: id,\n\t\t\t\t\tgenerate_button: type,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst response = await apiFetch({ path: path });\n\n\t\t\treturn response;\n\t\t} catch ( error ) {\n\t\t\tconsole.error( error );\n\t\t}\n\t}\n\n\tconst handleVideoKeyboardControl = ( event ) => {\n\n\t\tevent.stopImmediatePropagation();\n\n\t\tswitch (event.code) {\n\t\t\tcase 'Space': // spacebar\n\t\t\t\ttogglePlayback();\n\t\t\tbreak;\n\n\t\t\tcase 'ArrowLeft': // left\n\t\t\t\tpauseVideo();\n\t\t\t\tvideoRef.current.currentTime = videoRef.current.currentTime - 0.042;\n\t\t\tbreak;\n\n\t\t\tcase 'ArrowRight': // right\n\t\t\t\tpauseVideo();\n\t\t\t\tvideoRef.current.currentTime = videoRef.current.currentTime + 0.042;\n\t\t\tbreak;\n\n\t\t\tcase 'KeyJ': //j\n\t\t\t\tif ( isPlaying ) {\n\t\t\t\t\tvideoRef.current.playbackRate = Math.max( 0, videoRef.current.playbackRate - 1 );\n\t\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase 'KeyK': // k\n\t\t\t\tpauseVideo();\n\t\t\tbreak;\n\n\t\t\tcase 'KeyL': //l\n\t\t\t\tif ( isPlaying ) {\n\t\t\t\t\tvideoRef.current.playbackRate = videoRef.current.playbackRate + 1;\n\t\t\t\t}\n\t\t\t\tplayVideo();\n\t\t\tbreak;\n\n\t\t\tdefault: return; // exit this handler for other keys\n\t\t}\n\t\tevent.preventDefault(); // prevent the default action (scroll / move caret)\n\t}\n\n\tconst handleUseThisFrame = async () => {\n\t\tsetIsSaving(true);\n\t\tconst canvas = await drawCanvasThumb(); // Await the canvas object (no index for single frame)\n\t\tsetCanvasAsPoster( canvas ); // Pass the canvas object directly, index will be null\n\t}\n\n\tconst handleToggleVideoPlayer = ( event ) => {\n\t\tevent.preventDefault();\n\t\tconst next = ! isOpened;\n\t\tsetIsOpened( next );\n\t\tif ( next && thumbVideoPanel.current ) {\n\t\t\tthumbVideoPanel.current.focus();\n\t\t\tthumbVideoPanel.current.addEventListener('keydown', handleVideoKeyboardControl);\n\t\t}\n\t\telse {\n\t\t\tthumbVideoPanel.current.addEventListener('keydown', handleVideoKeyboardControl);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className='videopack-thumbnail-generator'>\n\t\t<PanelBody title={ __( 'Thumbnails' ) }>\n\t\t\t{ poster && <img\n\t\t\t\tclassName='videopack-current-thumbnail'\n\t\t\t\tsrc={ poster }\n\t\t\t\tref={ currentThumb }\n\t\t/> }\n\t\t\t<BaseControl className=\"editor-video-poster-control\">\n\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t{ __( 'Video Thumbnail' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<MediaUpload\n\t\t\t\ttitle={ __( 'Select video thumbnail' ) }\n\t\t\t\tonSelect={ onSelectPoster }\n\t\t\t\tallowedTypes={\n\t\t\t\tVIDEO_POSTER_ALLOWED_MEDIA_TYPES\n\t\t\t\t}\n\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={ open }\n\t\t\t\t\tref={ posterImageButton }\n\t\t\t\t>\n\t\t\t\t\t{ ! poster\n\t\t\t\t\t? __( 'Select' )\n\t\t\t\t\t: __( 'Replace' ) }\n\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t/>\n\t\t\t{ !! poster && (\n\t\t\t\t<Button\n\t\t\t\tonClick={ onRemovePoster }\n\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t>\n\t\t\t\t{ __( 'Remove' ) }\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t\t</BaseControl>\n\t\t\t<TextControl // This is the UI control for total_thumbnails.\n\t\t\t\tvalue={ total_thumbnails }\n\t\t\t\tonChange={ (value) => {\n\t\t\t\t\tif ( ! value ) {\n\t\t\t\t\t\tsetAttributes( { total_thumbnails: '' } );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetAttributes( { total_thumbnails: Number(value) } );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\tclassName='videopack-numberofthumbs'\n\t\t\t\tdisabled={ isSaving }\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tvariant='secondary'\n\t\t\t\tonClick={ () => handleGenerate('generate') }\n\t\t\t\tclassName='videopack-generate'\n\t\t\t\tdisabled={ isSaving }\n\t\t\t>\n\t\t\t\t{ __( 'Generate' ) }\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\tvariant='secondary'\n\t\t\t\tonClick={ () => handleGenerate('random') }\n\t\t\t\tclassName='videopack-generate'\n\t\t\t\tdisabled={ isSaving }\n\t\t\t>\n\t\t\t\t{ __( 'Random' ) }\n\t\t\t</Button>\n\t\t\t{ thumbChoices.length > 0 &&\n\t\t\t\t<Button\n\t\t\t\t\tvariant='primary'\n\t\t\t\t\tonClick={ handleSaveAllThumbnails }\n\t\t\t\t\tdisabled={ isSaving }>\n\t\t\t\t\t{ __( 'Save All' ) }\n\t\t\t\t</Button>\n\t\t\t}\n\t\t\t{ thumbChoices.length > 0 &&\n\t\t\t\t<div className={ `videopack-thumbnail-holder${ isSaving ? ' disabled' : '' }` }>\n\t\t\t\t\t{ thumbChoices.map( ( thumb, index ) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={ 'videopack-thumbnail' }\n\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\tonClick={ (event) => { handleSaveThumbnail( event, thumb, index ) } }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={ thumb.src }\n\t\t\t\t\t\t\t\talt={ `Thumbnail ${ index + 1 }` }\n\t\t\t\t\t\t\t\ttitle={ __('Save and set thumbnail') }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)) }\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<div\n\t\t\t\tclassName={ `components-panel__body videopack-thumb-video ${ isOpened ? 'is-opened' : '' }` }\n\t\t\t>\n\t\t\t\t<h2 className='components-panel__body-title'>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='components-button components-panel__body-toggle'\n\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\tonClick={ handleToggleVideoPlayer }\n\t\t\t\t\t\taria-expanded={ isOpened }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span aria-hidden=\"true\">\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\tclassName=\"components-panel__arrow\"\n\t\t\t\t\t\t\t\ticon={ isOpened ? chevronUp : chevronDown }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{ __( 'Choose From Video' ) }\n\t\t\t\t\t</button>\n\t\t\t\t</h2>\n\t\t\t\t<div\n\t\t\t\t\tclassName='videopack-thumb-video-panel'\n\t\t\t\t\ttabIndex={ 0 }\n\t\t\t\t\tref={ thumbVideoPanel }\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tsrc={ src }\n\t\t\t\t\t\tref={ videoRef }\n\t\t\t\t\t\tmuted={ true }\n\t\t\t\t\t\tpreload='metadata'\n\t\t\t\t\t\tonClick={ togglePlayback }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"videopack-play-pause\"\n\t\t\t\t\t\tonClick={ togglePlayback }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dashicon icon={ isPlaying ? 'controls-pause' : 'controls-play' } />\n\t\t\t\t\t</Button>\n\t\t\t\t\t{ ! isNaN(videoRef.current?.duration) && <RangeControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tmax={ videoRef.current.duration }\n\t\t\t\t\t\tstep='any'\n\t\t\t\t\t\tinitialPosition={ 0 }\n\t\t\t\t\t\tvalue={ videoRef.current.currentTime }\n\t\t\t\t\t\tonChange={ handleSliderChange }\n\t\t\t\t\t\tclassName='videopack-thumbvideo-slider'\n\t\t\t\t\t\ttype='slider'\n\t\t\t\t\t/> }\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant='secondary'\n\t\t\t\t\t\tonClick={ handleUseThisFrame }\n\t\t\t\t\t\tdisabled={ isSaving }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Use this frame' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</PanelBody>\n\t</div>\n\t);\n}\n\nexport default Thumbnails;\n","// extracted by mini-css-extract-plugin\nexport {};","import { __, _x } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport {\n\tButton,\n\tIcon,\n\tPanel,\n\tPanelRow,\n\tSpinner,\n\tTabPanel,\n\tTooltip,\n} from '@wordpress/components';\nimport { useDebounce } from '@wordpress/compose';\nimport { useEntityRecord } from '@wordpress/core-data';\nimport {\n\tcreateRoot,\n\tuseMemo,\n\tuseState,\n\tuseEffect,\n} from '@wordpress/element';\nimport { videopack } from '../icon';\nimport Thumbnails from '../Thumbnails/Thumbnails';\nimport AdditionalFormats from '../AdditionalFormats';\n\nconst AttachmentDetails = ( { attachmentAttributes } ) => {\n\tconst { id } = attachmentAttributes;\n\tconst [options, setOptions] = useState();\n\tconst [attributes, setAttributes] = useState();\n\tconst attachmentRecord = isNaN( id ) ? null : useEntityRecord( 'postType', 'attachment', id);\n\n\tuseEffect ( () => {\n\t\tconsole.log('Attachment component mounted.');\n\t\tapiFetch({\n\t\t\tpath: '/videopack/v1/settings',\n\t\t\tmethod: 'GET',\n\t\t})\n\t\t.then( response => {\n\t\t\tsetOptions(response);\n\t\t} );\n\t\treturn ( () => console.log('Component unmounted!') );\n\t}, [] );\n\n\tuseEffect ( () => {\n\t\tconst combinedAttributes = {\n\t\t\tid: id,\n\t\t\tnumberofthumbs: attachmentAttributes?.meta?.['_kgvid-meta']?.numberofthumbs || options?.numberofthumbs,\n\t\t\tsrc: attachmentAttributes?.url,\n\t\t\tposter: attachmentAttributes?.meta?.['_kgflashmediaplayer-poster'] || attachmentAttributes?.image?.src,\n\t\t\tposter_id: attachmentAttributes?.meta?.['_kgflashmediaplayer-poster-id'],\n\t\t}\n\t\tsetAttributes( combinedAttributes );\n\t}, [ options ] );\n\n\tif ( attributes && attachmentRecord.hasResolved && options ) {\n\t\treturn(\n\t\t\t<div className='videopack-attachment-details'>\n\t\t\t<Thumbnails\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\tattributes={ attributes }\n\t\t\t\tattachmentRecord={ attachmentRecord }\n\t\t\t\toptions={ options }\n\t\t\t/>\n\t\t\t<AdditionalFormats\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\tattributes={ attributes }\n\t\t\t\tattachmentRecord={ attachmentRecord }\n\t\t\t\toptions={ options }\n\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<Spinner />\n\t\t);\n\t}\n}\n\nexport default AttachmentDetails;\n","const videopack = <svg width='20px' height='20px' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 395.11 395.11\">\n<g data-name=\"Ellipse 1\" transform=\"rotate(-45 -201.149 592.789)\">\n  <circle\n    cx=\"360.24\"\n    cy=\"595.24\"\n    r=\"182.56\"\n    fill=\"none\"\n    stroke=\"#cd0000\"\n    strokeWidth=\"30\"\n  ></circle>\n</g>\n<path\n  fill=\"#cd0000\"\n  d=\"M95.4 108.3h45.81l57.42 98.69 55.57-98.69h47.49L198.54 286.81 95.4 109.68\"\n></path>\n<path fill=\"#f26a6b\" d=\"M254.2 108.3l-55.57 98.69-57.42-98.69\"></path>\n</svg>;\n\nconst volumeDown = <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"currentColor\">\n  <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n  <path d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/>\n</svg>;\n\nconst volumeUp = <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"currentColor\">\n  <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n  <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>\n</svg>;\n\nconst save = <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"currentColor\">\n  <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M17 3H3v18h18V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"/>\n</svg>;\n\nconst insertImage = <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"currentColor\">\n  <path d=\"M21 21V3H3v18h18zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n</svg>\n\nexport { insertImage, save, videopack, volumeDown, volumeUp };\n","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"mediaUtils\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { createRoot } from '@wordpress/element';\nimport AttachmentDetails from './AttachmentDetails';\n\njQuery(function ($) {\n    // Ensure wp.media is loaded.\n    if (typeof wp === 'undefined' || !wp.media || !wp.media.view || !wp.media.view.Attachment.Details) {\n        console.error('Videopack: wp.media.view.Attachment.Details is not available.');\n        return;\n    }\n\n    console.log('Videopack: Extending wp.media.view.Attachment.Details.');\n\n    const originalAttachmentDetails = wp.media.view.Attachment.Details;\n\n    wp.media.view.Attachment.Details = originalAttachmentDetails.extend({\n        // A reference to the React root instance.\n        videopackReactRoot: null,\n\n        render: function () {\n            console.log('Videopack: Rendering attachment details.');\n\n            // First, call the original render method.\n            originalAttachmentDetails.prototype.render.apply(this, arguments);\n\n            // Unmount any existing React component before re-rendering.\n            if (this.videopackReactRoot) {\n                console.log('Videopack: Unmounting existing React component.');\n                this.videopackReactRoot.unmount();\n                this.videopackReactRoot = null;\n            }\n\n            // Check if the attachment is a video or an animated GIF with our meta.\n            const isVideo = this.model.attributes.type === 'video';\n            const isAnimatedGif = this.model.attributes.subtype === 'gif' && this.model.attributes.meta?.['_kgvid-meta']?.animated;\n\n            if (isVideo || isAnimatedGif) {\n                console.log('Videopack: Video or animated GIF detected. Mounting React component.');\n\n                const settingsSection = this.$el.find('.settings');\n                if (settingsSection.length === 0) {\n                    console.error('Videopack: Could not find the .settings section in the attachment details sidebar.');\n                    return;\n                }\n\n                // Create and append the root div for our React component.\n                const reactRootDiv = document.createElement('div');\n                reactRootDiv.id = 'videopack-attachment-details-root';\n                settingsSection.append(reactRootDiv);\n\n                // Create a new React root and render the component.\n                this.videopackReactRoot = createRoot(reactRootDiv);\n                this.videopackReactRoot.render(\n                    <AttachmentDetails\n                        attachmentAttributes={this.model.attributes}\n                    />\n                );\n                console.log('Videopack: React component mounted successfully.');\n            } else {\n                console.log('Videopack: Attachment is not a video, skipping React component.');\n            }\n\n            return this;\n        },\n\n        remove: function () {\n            // Unmount the React component when the view is removed.\n            if (this.videopackReactRoot) {\n                console.log('Videopack: Unmounting React component on view removal.');\n                this.videopackReactRoot.unmount();\n                this.videopackReactRoot = null;\n            }\n\n            // Call the original remove method.\n            return originalAttachmentDetails.prototype.remove.apply(this, arguments);\n        },\n    });\n});"],"names":["__","_x","sprintf","apiFetch","Button","CheckboxControl","Dashicon","Icon","PanelBody","PanelRow","Spinner","__experimentalDivider","Divider","__experimentalConfirmDialog","ConfirmDialog","MediaUpload","MediaUploadCheck","__experimentalGetElementClassName","useRef","useEffect","useState","useSelect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdditionalFormats","setAttributes","attributes","attachmentRecord","options","id","src","height","ffmpeg_exists","videoFormats","setVideoFormats","encodeMessage","setEncodeMessage","itemToDelete","setItemToDelete","deleteInProgress","setDeleteInProgress","isConfirmOpen","setIsConfirmOpen","isLoading","setIsLoading","isEncoding","setIsEncoding","checkboxTimerRef","progressTimerRef","queueApiPath","fetchVideoFormats","path","then","response","initializedFormats","Object","keys","forEach","key","checked","isEmpty","value","Array","isArray","length","deepEqual","obj1","obj2","keys1","keys2","includes","siteSettings","select","getSite","checkIsEncoding","formats","values","some","format","hasOwnProperty","encoding_now","incrementEncodeProgress","console","log","updatedVideoFormats","entries","reduce","updated","progress","currentSeconds","current_seconds","parseInt","fps","percentDone","Math","round","duration","elapsed","isNaN","remaining","remaing","percent_done","pollVideoFormats","method","catch","error","current","setTimeout","clearInterval","setInterval","clearTimeout","handleFormatCheckbox","event","prevVideoFormats","updatedFormats","onSelectFormat","media","handleEnqueue","formatsToEncode","filter","is_available","status","acc","data","url","parent_id","record","post","queueMessage","queueList","enqueue_data","encode_list","Intl","ListFormat","language","replace","style","type","new_queue_position","queuePosition","existing_queue_position","JSON","stringify","message","formatPickable","exists","was_picked","handleFileDelete","formatId","formatData","child_id","finally","handleJobDelete","jobId","openConfirmDialog","job_id","childId","name","handleConfirm","handleCancel","convertToTimecode","time","undefined","padZero","num","floor","toString","padStart","h","m","s","hh","mm","ss","EncodeProgress","percentText","onCancelJob","className","children","width","onClick","variant","isDestructive","size","isBusy","error_message","text","somethingToEncode","obj","encodeButtonTitle","getDisplayFormats","displayFormats","hide_video_formats","encode","fromEntries","media_details","sourceHeight","replaces_original","isEncodeButtonDisabled","confirmDialogMessage","title","map","isCheckboxDisabled","__nextHasNoMarginBottom","label","disabled","onChange","status_l10n","onSelect","allowedTypes","render","open","deletable","isOpen","onConfirm","onCancel","BaseControl","RangeControl","TextControl","useCallback","uploadMedia","addQueryArgs","getFilename","chevronUp","chevronDown","Thumbnails","total_thumbnails","poster","poster_id","thumbVideoPanel","videoRef","currentThumb","posterImageButton","isPlaying","setIsPlaying","isOpened","setIsOpened","currentTime","setCurrentTime","thumbChoices","setThumbChoices","isSaving","setIsSaving","thumbApiPath","VIDEO_POSTER_ALLOWED_MEDIA_TYPES","addEventListener","handleGenerate","onSelectPoster","image","Number","onRemovePoster","focus","browser_thumbnails","newThumbImages","i","generateThumb","thumb","real_thumb_url","push","generateThumbCanvases","thumbsInt","newThumbCanvases","timePoints","_","movieoffset","randomOffset","random","max","timeupdateListener","drawCanvasThumb","canvas","toDataURL","canvasObject","removeEventListener","togglePlayback","paused","play","pause","pauseVideo","playVideo","handleSliderChange","handleTimeUpdate","document","createElement","videoWidth","videoHeight","ctx","getContext","drawImage","ffmpeg_thumb_watermark","watermarkCanvas","drawWatermarkOnCanvas","handleSaveThumbnail","index","currentTarget","classList","add","setImgAsPoster","setCanvasAsPoster","handleSaveAllThumbnails","firstThumbType","videoFilename","thumbBasename","substring","lastIndexOf","file","Promise","resolve","toBlob","blob","File","filesList","thumbUrls","attachment_id","thumb_urls","reject","Error","watermarkImage","Image","scale","align","x","valign","y","crossOrigin","onload","canvasWidth","canvasHeight","watermarkWidth","watermarkHeight","horizontalOffset","verticalOffset","xPos","yPos","onerror","thumbnailIndex","filenameSuffix","titleSuffix","setPosterData","new_poster","new_poster_id","edit","featured_media","meta","save","thumb_url","thumburl","thumbnail_index","thumb_id","generate_button","handleVideoKeyboardControl","stopImmediatePropagation","code","playbackRate","preventDefault","handleUseThisFrame","handleToggleVideoPlayer","next","ref","VisualLabel","alt","icon","tabIndex","muted","preload","min","step","initialPosition","Panel","TabPanel","Tooltip","useDebounce","useEntityRecord","createRoot","useMemo","videopack","AttachmentDetails","attachmentAttributes","setOptions","combinedAttributes","numberofthumbs","hasResolved","xmlns","viewBox","transform","cx","cy","r","fill","stroke","strokeWidth","d","volumeDown","volumeUp","insertImage","jQuery","$","wp","view","Attachment","Details","originalAttachmentDetails","extend","videopackReactRoot","prototype","apply","arguments","unmount","isVideo","model","isAnimatedGif","subtype","animated","settingsSection","$el","find","reactRootDiv","append","remove"],"sourceRoot":""}